[
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 1,
    "text": "DATA LINK CONTROL PROTOCOLS"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 2,
    "text": "2\nTopics covered\n• Data Link Layer Control Protocols\n-\nFlow control\n-\nError control"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 3,
    "text": "Flow Control\n• ensure sending entity does not overwhelm receiving entity\n• by preventing buffer overflow\n• influenced by:\n• transmission time\n• time taken to emit all bits into medium\n• propagation time\n• time for a bit to traverse the link\n• assume here no errors but varying delays"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 4,
    "text": "Model of Frame Transmission"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 5,
    "text": "Stop and Wait Flow Control\n• source transmits frame\n• destination receives frame and replies with \nacknowledgement (ACK)\n• source waits for ACK before sending next\n• destination can stop flow by not send ACK\n• works well for a few large frames\n• Stop and wait becomes inadequate if large block of data \nis split into small frames"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 6,
    "text": "Stop and Wait Link Utilization"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 7,
    "text": "Sliding Windows Flow Control\n• allows multiple numbered frames to be in transit\n• receiver has buffer W long\n• transmitter sends up to W frames without ACK\n• ACK includes number of next frame expected\n• sequence number is bounded by size of field (k)\n• frames are numbered modulo 2k\n• giving max window size of up to 2k - 1\n• receiver can ack frames without permitting further transmission \n(Receive Not Ready)\n• must send a normal acknowledge to resume\n• if have full-duplex link, can piggyback ACks"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 8,
    "text": "Sliding Window Diagram"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 9,
    "text": "Sliding Window Example"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 10,
    "text": "2. Error Control - detection and correction of errors \n• 2 types of errors are:\n• lost frames : fails to arrive at rxr\n• damaged frames : recognizable frame arrives..but bits damaged\n• common techniques for error control are based on :\n• error detection\n• positive acknowledgment : destn returns,  if successfully received error \nfree frames\n• retransmission after timeout\n• negative acknowledgement & retransmission"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 11,
    "text": "Automatic Repeat Request (ARQ) \ncollective name for such error control mechanisms. Most Error Control techniques are based on \n (1) Error Detection Scheme (e.g., Parity checks, CRC), and \n (2) Retransmission Scheme\n Error control schemes that involve error detection and retransmission \nof lost or corrupted frames are referred to as Automatic Repeat Request\n(ARQ) error control."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 12,
    "text": "3 standardized versions of ARQ retransmission schemes\n1. Stop-and-Wait ARQ\n2. Go-Back-N ARQ\n3. Selective Repeat ARQ\nThe protocol for sending ACKs in all ARQ protocols are based on the \nsliding window flow control scheme. Automatic Repeat Request (ARQ) (2)"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 13,
    "text": "1. Stop and Wait ARQ\n• source transmits single frame\n• wait for ACK\n• if received frame damaged, discard it & no ACK\n• transmitter waits till timeout\n• if no ACK within timeout, retransmit\n• if ACK damaged, transmitter will not recognize it\n• transmitter will retransmit\n• receiver gets two copies of frame"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 14,
    "text": "To avoid this problem, frames are alternatively labeled with    0 \nor 1. \n ie. Frames have 1-bit sequence numbers (SN = 0 or 1)\no   positive acknowledgment are   ACK0 / ACK1\no  ACK0 – frame numbered 1……\n1. Stop and Wait ARQ (2)"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 15,
    "text": "Stop and Wait\n• see example with \n both types of errors\n•  pros and cons\n• simple\n• inefficient"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 16,
    "text": "2. Go Back N ARQ (continuous ARQ)\n• based on sliding window \n• if no error, the operations are identical to Sliding Window. Use window \nto control number of outstanding frames\nA station may send multiple frames as allowed by the window size\na.\nReceiver sends a REJ i if frame i is in error. After that, the receiver \ndiscards all incoming frames until the frame in error was correctly \nretransmitted\nb. If sender receives a REJ i it will retransmit frame i and all packets i+1, \ni+2,... which have been sent, but not been acknowledged"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 17,
    "text": "Go Back N ARQ (2) - Handling \nEx. Station A sending frames to station B. After  each txn, A sets ACK \ntimer. B rxd (i-1), A just txd i. Contingencies (possibilities) are :\n1. Damaged Frame If rxd frame i  is invalid, B discards the frame. 2 subcases \na. Within a time A sends frame i+1. B receives it out of order and \nsends REJ i. A retransmits frame i  and all subsequent frames. b.\nor A times out and send RR frame with P bit set to 1, which B \nresponds by sending RR indicating next frame expected ie. frame i \n  transmitter then retransmits frames from i \nAlternatively just retransmit when timer out."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 18,
    "text": "2. Damaged RR (Acknowledgement)\n 2 subcases\na.\nreceiver gets frame i, sends RR(i+1) which is lost. acknowledgments  are cumulative, so next RR(i+n) may arrive \nbefore transmitter times out on frame I\nb.\nif transmitter times out, it sends ack with P bit set. Can  be \nrepeated a number of times before a reset procedure is initiated\n3. Damaged REJ (Rejection)\n• REJ, for a damaged frame, is lost\n• handled as for lost frame when transmitter times out..1b\nGo Back N ARQ (3) - Handling"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 19,
    "text": "Selective Reject ARQ\n• also called selective retransmission\n• only rejected frames are retransmitted\n• subsequent frames are accepted by the receiver \nand buffered\n• minimizes retransmission\n• receiver must maintain large enough buffer\n• more complex logic in transmitter\n• hence less widely used\n• useful for satellite links with long propagation \ndelays"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 20,
    "text": "Go Back N vs\nSelective \nReject"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 1,
    "text": "5: DataLink Layer\n5a-1\nChapter 5\nData Link Layer\nComputer Networking: \nA Top Down Approach \nFeaturing the Internet, \n2nd edition. Jim Kurose, Keith Ross\nAddison-Wesley, July \n2002. A note on the use of these ppt slides:\nWe’re making these slides freely available to all (faculty, students, readers). They’re in PowerPoint form so you can add, modify, and delete slides  \n(including this one) and slide content to suit your needs. They obviously \nrepresent a lot of work on our part. In return for use, we only ask the \nfollowing:\n\u0001 If you use these slides (e.g., in a class) in substantially unaltered form, \nthat you mention their source (after all, we’d like people to use our book!) \u0001 If you post any slides in substantially unaltered form on a www site, that \nyou note that they are adapted from (or perhaps identical to) our slides, and \nnote our copyright of this material. Thanks and enjoy! JFK/KWR\nAll material copyright 1996-2002\nJ.F Kurose and K.W. Ross, All Rights Reserved"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 2,
    "text": "5: DataLink Layer\n5a-2\nChapter 5: The Data Link Layer\nOur goals:\n❒understand principles behind data link layer \nservices:\n❍error detection, correction\n❍sharing a broadcast channel: multiple access\n❍link layer addressing\n❍reliable data transfer, flow control: done! ❒instantiation and implementation of various link \nlayer technologies"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 3,
    "text": "5: DataLink Layer\n5a-3\nChapter 5 outline\n❒5.1 Introduction and \nservices\n❒5.2 Error detection \nand correction \n❒5.3Multiple access \nprotocols\n❒5.4 LAN addresses \nand ARP\n❒5.5 Ethernet\n❒5.6 Hubs, bridges, and \nswitches\n❒5.7 Wireless links and \nLANs \n❒5.8 PPP\n❒5.9 ATM\n❒5.10 Frame Relay"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 4,
    "text": "5: DataLink Layer\n5a-4\nLink Layer: Introduction\nSome terminology:\n❒hosts and routers are nodes\n(bridges and switches too)\n❒communication channels that \nconnect adjacent nodes along \ncommunication path are links\n❍wired links\n❍wireless links\n❍LANs\n❒2-PDU is a frame,\nencapsulates datagram\n“link”\ndata-link layer has responsibility of \ntransferring datagram from one node \nto adjacent node over a link"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 5,
    "text": "5: DataLink Layer\n5a-5\nLink layer: context\n❒Datagram transferred by \ndifferent link protocols \nover different links:\n❍e.g., Ethernet on first link, \nframe relay on \nintermediate links, 802.11 \non last link\n❒Each  link protocol \nprovides different \nservices\n❍e.g., may or may not \nprovide rdt over link\ntransportation analogy\n❒trip from Princeton to \nLausanne\n❍limo: Princeton to JFK\n❍plane: JFK to Geneva\n❍train: Geneva to Lausanne\n❒tourist = datagram\n❒transport segment = \ncommunication link\n❒transportation mode = \nlink layer protocol\n❒travel agent = routing \nalgorithm"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 6,
    "text": "5: DataLink Layer\n5a-6\nLink Layer Services\n❒Framing, link access:\n❍encapsulate datagram into frame, adding header, trailer\n❍channel access if shared medium\n❍‘physical addresses’ used in frame headers to identify \nsource, dest  \n• different from IP address! ❒Reliable delivery between adjacent nodes\n❍we learned how to do this already (chapter 3)! ❍seldom used on low bit error link (fiber, some twisted \npair)\n❍wireless links: high error rates\n• Q: why both link-level and end-end reliability?"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 7,
    "text": "5: DataLink Layer\n5a-7\nLink Layer Services (more)\n❒Flow Control:\n❍pacing between adjacent sending and receiving nodes\n❒Error Detection:\n❍errors caused by signal attenuation, noise. ❍receiver detects presence of errors: \n• signals sender for retransmission or drops frame \n❒Error Correction:\n❍receiver identifies and corrects bit error(s) without \nresorting to retransmission\n❒Half-duplex and full-duplex\n❍with half duplex, nodes at both ends of link can transmit, \nbut not at same time"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 8,
    "text": "5: DataLink Layer\n5a-8\nAdaptors Communicating\n❒link layer implemented in \n“adaptor” (aka NIC)\n❍Ethernet card, PCMCI \ncard, 802.11 card\n❒sending side:\n❍encapsulates datagram in \na frame\n❍adds error checking bits, \nrdt, flow control, etc. ❒receiving side\n❍looks for errors, rdt, flow \ncontrol, etc\n❍extracts datagram, passes \nto rcving node\n❒adapter is semi-\nautonomous\n❒link & physical layers\nsending\nnode\nframe\nrcving\nnode\ndatagram\nframe\nadapter\nadapter\nlink layer protocol"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 9,
    "text": "5: DataLink Layer\n5a-9\nChapter 5 outline\n❒5.1 Introduction and \nservices\n❒5.2 Error detection \nand correction\n❒5.3Multiple access \nprotocols\n❒5.4 LAN addresses \nand ARP\n❒5.5 Ethernet\n❒5.6 Hubs, bridges, and \nswitches\n❒5.7 Wireless links and \nLANs \n❒5.8 PPP\n❒5.9 ATM\n❒5.10 Frame Relay"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 10,
    "text": "5: DataLink Layer 5a-10\nError Detection\nEDC= Error Detection and Correction bits (redundancy)\nD    = Data protected by error checking, may include header fields \n• Error detection not 100% reliable! • protocol may miss some errors, but rarely\n• larger EDC field yields better detection and correction"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 11,
    "text": "5: DataLink Layer 5a-11\nParity Checking\nSingle Bit Parity:\nDetect single bit errors\nTwo Dimensional Bit Parity:\nDetect and correct single bit errors\n0"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 12,
    "text": "5: DataLink Layer 5a-12\nInternet checksum\nSender:\n❒treat segment contents \nas sequence of 16-bit \nintegers\n❒checksum: addition (1’s \ncomplement sum) of \nsegment contents\n❒sender puts checksum \nvalue into UDP checksum \nfield\nReceiver:\n❒\ncompute checksum of received \nsegment\n❒\ncheck if computed checksum \nequals checksum field value:\n❍NO - error detected\n❍YES - no error detected. But \nmaybe errors nonetheless? More later …. Goal: detect “errors” (e.g., flipped bits) in transmitted \nsegment (note: used at transport layer only)"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 13,
    "text": "5: DataLink Layer 5a-13\nChecksumming: Cyclic Redundancy Check\n❒view data bits, D, as a binary number\n❒choose r+1 bit pattern (generator), G\n❒goal: choose r CRC bits, R, such that\n❍\n<D,R> exactly divisible by G (modulo 2) \n❍receiver knows G, divides <D,R> by G.  If non-zero remainder: \nerror detected! ❍can detect all burst errors less than r+1 bits\n❒widely used in practice (ATM, HDLC)"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 14,
    "text": "5: DataLink Layer 5a-14\nCRC Example\nWant:\nD.2r XOR R = nG\nequivalently:\nD.2r = nG XOR R \nequivalently:\nif we divide D.2r by \nG, want remainder R\nR = remainder[           ]\nD.2r\nG"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 15,
    "text": "5: DataLink Layer 5a-15\nChapter 5 outline\n❒5.1 Introduction and \nservices\n❒5.2 Error detection \nand correction \n❒5.3Multiple access \nprotocols\n❒5.4 LAN addresses \nand ARP\n❒5.5 Ethernet\n❒5.6 Hubs, bridges, and \nswitches\n❒5.7 Wireless links and \nLANs \n❒5.8 PPP\n❒5.9 ATM\n❒5.10 Frame Relay"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 16,
    "text": "5: DataLink Layer 5a-16\nMultiple Access Links and Protocols\nTwo types of “links”:\n❒point-to-point\n❍PPP for dial-up access\n❍point-to-point link between Ethernet switch and host\n❒broadcast (shared wire or medium)\n❍traditional Ethernet\n❍upstream HFC\n❍802.11 wireless LAN"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 17,
    "text": "5: DataLink Layer 5a-17\nMultiple Access protocols\n❒single shared broadcast channel \n❒two or more simultaneous transmissions by nodes: \ninterference \n❍only one node can send successfully at a time \nmultiple access protocol\n❒distributed algorithm that determines how nodes \nshare channel, i.e., determine when node can transmit\n❒communication about channel sharing must use channel \nitself! ❒what to look for in multiple access protocols:"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 18,
    "text": "5: DataLink Layer 5a-18\nIdeal Mulitple Access Protocol\nBroadcast channel of rate R bps\n1. When one node wants to transmit, it can send at \nrate R.\n2. When M nodes want to transmit, each can send at \naverage rate R/M\n3. Fully decentralized:\n❍no special node to coordinate transmissions\n❍no synchronization of clocks, slots\n4. Simple"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 19,
    "text": "5: DataLink Layer 5a-19\nMAC Protocols: a taxonomy\nThree broad classes:\n❒Channel Partitioning\n❍divide channel into smaller “pieces” (time slots, \nfrequency, code)\n❍allocate piece to node for exclusive use\n❒Random Access\n❍channel not divided, allow collisions\n❍“recover” from collisions\n❒“Taking turns”\n❍tightly coordinate shared access to avoid collisions"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 20,
    "text": "5: DataLink Layer 5a-20\nChannel Partitioning MAC protocols: TDMA\nTDMA: time division multiple access\n❒access to channel in \"rounds\" \n❒each station gets fixed length slot (length = pkt \ntrans time) in each round \n❒unused slots go idle \n❒example: 6-station LAN, 1,3,4 have pkt, slots 2,5,6 \nidle"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 21,
    "text": "5: DataLink Layer 5a-21\nChannel Partitioning MAC protocols: FDMA\nFDMA: frequency division multiple access\n❒channel spectrum divided into frequency bands\n❒each station assigned fixed frequency band\n❒unused transmission time in frequency bands go idle \n❒example: 6-station LAN, 1,3,4 have pkt, frequency \nbands 2,5,6 idle \nfrequency bands\ntime"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 22,
    "text": "5: DataLink Layer 5a-22\nChannel Partitioning (CDMA)\nCDMA (Code Division Multiple Access)\n❒unique “code” assigned to each user; i.e., code set partitioning\n❒used mostly in wireless broadcast channels (cellular, satellite,\netc)\n❒all users share same frequency, but each user has own \n“chipping” sequence (i.e., code) to encode data\n❒encoded signal = (original data) X (chipping sequence)\n❒decoding: inner-product of encoded signal and chipping \nsequence\n❒allows multiple users to “coexist” and transmit simultaneously \nwith minimal interference (if codes are “orthogonal”)"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 23,
    "text": "5: DataLink Layer 5a-23\nCDMA Encode/Decode"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 24,
    "text": "5: DataLink Layer 5a-24\nCDMA: two-sender interference"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 25,
    "text": "5: DataLink Layer 5a-25\nRandom Access Protocols\n❒When node has packet to send\n❍transmit at full channel data rate R.\n❍no a priori coordination among nodes\n❒two or more transmitting nodes -> “collision”,\n❒random access MAC protocol specifies: \n❍how to detect collisions\n❍how to recover from collisions (e.g., via delayed \nretransmissions)\n❒Examples of random access MAC protocols:\n❍slotted ALOHA\n❍ALOHA\n❍CSMA, CSMA/CD, CSMA/CA"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 26,
    "text": "5: DataLink Layer 5a-26\nSlotted ALOHA\nAssumptions\n❒all frames same size\n❒time is divided into \nequal size slots, time to \ntransmit 1 frame\n❒nodes start to transmit \nframes only at \nbeginning of slots\n❒nodes are synchronized\n❒if 2 or more nodes \ntransmit in slot, all \nnodes detect collision\nOperation\n❒when node obtains fresh \nframe, it transmits in next \nslot\n❒no collision, node can send \nnew frame in next slot\n❒if collision, node \nretransmits frame in each \nsubsequent slot with prob. p until success"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 27,
    "text": "5: DataLink Layer 5a-27\nSlotted ALOHA\nPros\n❒single active node can \ncontinuously transmit \nat full rate of channel\n❒highly decentralized: \nonly slots in nodes \nneed to be in sync\n❒simple\nCons\n❒collisions, wasting slots\n❒idle slots\n❒nodes may be able to \ndetect collision in less \nthan time to transmit \npacket"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 28,
    "text": "5: DataLink Layer 5a-28\nSlotted Aloha efficiency\n❒Suppose N nodes with \nmany frames to send, \neach transmits in slot \nwith probability p\n❒prob that 1st node has \nsuccess in a slot\n= p(1-p)N-1\n❒prob that any node has \na success = Np(1-p)N-1\n❒For max efficiency \nwith N nodes, find p* \nthat maximizes \nNp(1-p)N-1\n❒For many nodes, take \nlimit of Np*(1-p*)N-1 \nas N goes to infinity, \ngives 1/e = .37\nEfficiency is the long-run \nfraction of successful slots \nwhen there’s many nodes, each \nwith many frames to send\nAt best: channel\nused for useful \ntransmissions 37%\nof time!"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 29,
    "text": "5: DataLink Layer 5a-29\nPure (unslotted) ALOHA\n❒unslotted Aloha: simpler, no synchronization\n❒when frame first arrives\n❍transmit immediately \n❒collision probability increases:\n❍frame sent at t0 collides with other frames sent in [t0-1,t0+1]"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 30,
    "text": "5: DataLink Layer 5a-30\nPure Aloha efficiency\nP(success by given node) = P(node transmits) . P(no other node transmits in [p0-1,p0] . P(no other node transmits in [p0-1,p0] \n= p . (1-p)N-1 . (1-p)N-1\n= p . (1-p)2(N-1)\n… choosing optimum p and then letting n -> infty ...\n= 1/(2e) = .18 \nEven worse !"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 31,
    "text": "5: DataLink Layer 5a-31\nCSMA (Carrier Sense Multiple Access)\nCSMA: listen before transmit:\n❒If channel sensed idle: transmit entire frame\n❒If channel sensed busy, defer transmission \n❒Human analogy: don’t interrupt others!"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 32,
    "text": "5: DataLink Layer 5a-32\nCSMA collisions\ncollisions can still occur:\npropagation delay means \ntwo nodes may not hear\neach other’s transmission\ncollision:\nentire packet transmission \ntime wasted\nspatial layout of nodes \nnote:\nrole of distance & propagation \ndelay in determining collision \nprobability"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 33,
    "text": "5: DataLink Layer 5a-33\nCSMA/CD (Collision Detection)\nCSMA/CD: carrier sensing, deferral as in CSMA\n❍collisions detected within short time\n❍colliding transmissions aborted, reducing channel \nwastage \n❒collision detection:\n❍easy in wired LANs: measure signal strengths, \ncompare transmitted, received signals\n❍difficult in wireless LANs: receiver shut off while \ntransmitting\n❒human analogy: the polite conversationalist"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 34,
    "text": "5: DataLink Layer 5a-34\nCSMA/CD collision detection"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 35,
    "text": "5: DataLink Layer 5a-35\n“Taking Turns” MAC protocols\nchannel partitioning MAC protocols:\n❍share channel efficiently and fairly at high load\n❍inefficient at low load: delay in channel access, \n1/N bandwidth allocated even if only 1 active \nnode! Random access MAC protocols\n❍efficient at low load: single node can fully \nutilize channel\n❍high load: collision overhead\n“taking turns” protocols\nlook for best of both worlds!"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 36,
    "text": "5: DataLink Layer 5a-36\n“Taking Turns” MAC protocols\nPolling:\n❒master node \n“invites” slave nodes \nto transmit in turn\n❒concerns:\n❍polling overhead \n❍latency\n❍single point of \nfailure (master)\nToken passing:\n❒control token passed from \none node to next \nsequentially. ❒token message\n❒concerns:\n❍token overhead \n❍latency\n❍single point of failure (token)"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 37,
    "text": "5: DataLink Layer 5a-37\nSummary of MAC protocols\n❒What do you do with a shared media? ❍Channel Partitioning, by time, frequency or code\n• Time Division,Code Division, Frequency Division\n❍Random partitioning (dynamic), \n• ALOHA, S-ALOHA, CSMA, CSMA/CD\n• carrier sensing: easy in some technologies (wire), hard \nin others (wireless)\n• CSMA/CD used in Ethernet\n❍Taking Turns\n• polling from a central site, token passing"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 38,
    "text": "5: DataLink Layer 5a-38\nLAN technologies\nData link layer so far:\n❍services, error detection/correction, multiple \naccess \nNext: LAN technologies\n❍addressing\n❍Ethernet\n❍hubs, bridges, switches\n❍802.11\n❍PPP\n❍ATM"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 39,
    "text": "5: DataLink Layer 5a-39\nLAN Addresses and ARP\n32-bit IP address:\n❒network-layer address\n❒used to get datagram to destination IP network \n(recall IP network definition)\nLAN (or MAC or physical or Ethernet) address: \n❒used to get datagram from one interface to another \nphysically-connected interface (same network)\n❒48 bit MAC address (for most LANs) \nburned in the adapter ROM"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 40,
    "text": "5: DataLink Layer 5a-40\nLAN Addresses and ARP\nEach adapter on LAN has unique LAN address"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 41,
    "text": "5: DataLink Layer 5a-41\nLAN Address (more)\n❒MAC address allocation administered by IEEE\n❒manufacturer buys portion of MAC address space \n(to assure uniqueness)\n❒Analogy:\n(a) MAC address: like Social Security Number\n(b) IP address: like postal address\n❒MAC flat address  => portability \n❍can move LAN card from one LAN to another\n❒IP hierarchical address NOT portable\n❍depends on IP network to which node is attached"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 42,
    "text": "5: DataLink Layer 5a-42\nRecall earlier routing discussion\n223.1.1.1\n223.1.1.2\n223.1.1.3\n223.1.1.4\n223.1.2.9\n223.1.2.2\n223.1.2.1\n223.1.3.2\n223.1.3.1\n223.1.3.27\nA\nB\nE\nStarting at A, given IP \ndatagram addressed to B:\n❒look up net. address of B, find B \non same net. as A\n❒link layer send datagram to B \ninside link-layer frame\nB’s MAC\naddr\nA’s MAC\naddr\nA’s IP\naddr\nB’s IP\naddr\nIP payload\ndatagram\nframe\nframe source,\ndest address\ndatagram source,\ndest address"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 43,
    "text": "5: DataLink Layer 5a-43\nARP: Address Resolution Protocol\n❒Each IP node (Host, \nRouter) on LAN has  \nARP table\n❒ARP Table: IP/MAC \naddress mappings for \nsome LAN nodes\n< IP address; MAC address; TTL>\n❍\nTTL (Time To Live): time \nafter which address \nmapping will be forgotten \n(typically 20 min)\nQuestion: how to determine\nMAC address of B\nknowing B’s IP address?"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 44,
    "text": "5: DataLink Layer 5a-44\nARP protocol\n❒A wants to send datagram \nto B, and A knows B’s IP \naddress. ❒Suppose B’s MAC address \nis not in A’s ARP table. ❒A broadcasts ARP query \npacket, containing B's IP \naddress \n❍all machines on LAN \nreceive ARP query\n❒B receives ARP packet, \nreplies to A with its (B's) \nMAC address\n❍frame sent to A’s MAC \naddress (unicast)\n❒A caches (saves) IP-to-\nMAC address pair in its \nARP table until information \nbecomes old (times out) \n❍soft state: information \nthat times out (goes \naway) unless refreshed\n❒ARP is “plug-and-play”:\n❍nodes create their ARP \ntables without \nintervention from net \nadministrator"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 45,
    "text": "5: DataLink Layer 5a-45\nRouting to another LAN\nwalkthrough: send datagram from A to B via R\nassume  A knows B IP address\n❒Two ARP tables in  router R, one for each IP \nnetwork (LAN)\nA\nR\nB"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 46,
    "text": "5: DataLink Layer 5a-46\n❒A creates datagram with source A, destination B \n❒A uses ARP to get R’s MAC address for 111.111.111.110\n❒A creates link-layer frame with R's MAC address as dest, \nframe contains A-to-B IP datagram\n❒A’s data link layer sends frame \n❒R’s data link layer receives frame \n❒R removes IP datagram from Ethernet frame, sees its \ndestined to B\n❒R uses ARP to get B’s physical layer address \n❒R creates frame containing A-to-B IP datagram sends to B\nA\nR\nB"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 47,
    "text": "5: DataLink Layer 5a-47\nEthernet\n“dominant” LAN technology: \n❒cheap $20 for 100Mbs! ❒first widely used LAN technology\n❒Simpler, cheaper than token LANs and ATM\n❒Kept up with speed race: 10, 100, 1000 Mbps \nMetcalfe’s Ethernet\nsketch"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 48,
    "text": "5: DataLink Layer 5a-48\nEthernet Frame Structure\nSending adapter encapsulates IP datagram (or other \nnetwork layer protocol packet) in Ethernet frame\nPreamble:\n❒7 bytes with pattern 10101010 followed by one \nbyte with pattern 10101011\n❒used to synchronize receiver, sender clock rates"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 49,
    "text": "5: DataLink Layer 5a-49\nEthernet Frame Structure \n(more)\n❒Addresses: 6 bytes\n❍if adapter receives frame with matching destination \naddress, or with broadcast address (eg ARP packet), it \npasses data in frame to net-layer protocol\n❍otherwise, adapter discards frame\n❒Type: indicates the higher layer protocol, mostly \nIP but others may be supported such as Novell \nIPX and AppleTalk)\n❒CRC: checked at receiver, if error is detected, the \nframe is simply dropped"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 50,
    "text": "5: DataLink Layer 5a-50\nUnreliable, connectionless service\n❒Connectionless: No handshaking between sending \nand receiving adapter. ❒Unreliable: receiving adapter doesn’t send acks or \nnacks to sending adapter\n❍stream of datagrams passed to network layer can have \ngaps\n❍gaps will be filled if app is using TCP\n❍otherwise, app will see the gaps"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 51,
    "text": "5: DataLink Layer 5a-51\nEthernet uses CSMA/CD\n❒No slots\n❒adapter doesn’t transmit \nif it senses that some \nother adapter is \ntransmitting, that is, \ncarrier sense\n❒transmitting adapter \naborts when it senses \nthat another adapter is \ntransmitting, that is, \ncollision detection\n❒Before attempting a \nretransmission, \nadapter waits a \nrandom time, that is, \nrandom access"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 52,
    "text": "5: DataLink Layer 5a-52\nEthernet CSMA/CD algorithm\n1. Adaptor gets datagram \nfrom and creates frame\n2. If adapter senses channel \nidle, it starts to transmit \nframe. If it senses \nchannel busy, waits until \nchannel idle and then \ntransmits\n3. If adapter transmits \nentire frame without \ndetecting another \ntransmission, the adapter \nis done with frame ! 4. If adapter detects \nanother transmission while \ntransmitting,  aborts and \nsends jam signal\n5. After aborting, adapter \nenters exponential \nbackoff: after the mth\ncollision, adapter chooses \na K at random from \n{0,1,2,…,2m-1}. Adapter \nwaits K*512 bit times and \nreturns to Step 2"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 53,
    "text": "5: DataLink Layer 5a-53\nEthernet’s CSMA/CD (more)\nJam Signal: make sure all \nother transmitters are \naware of collision; 48 bits;\nBit time: .1 microsec for 10 \nMbps Ethernet ;\nfor K=1023, wait time is \nabout 50 msec\nExponential Backoff:\n❒Goal: adapt retransmission \nattempts to estimated \ncurrent load\n❍heavy load: random wait \nwill be longer\n❒first collision: choose K \nfrom {0,1}; delay is K x 512 \nbit transmission times\n❒after second collision: \nchoose K from {0,1,2,3}…\n❒after ten collisions, choose \nK from {0,1,2,3,4,…,1023}\nSee/interact with Java\napplet on AWL Web site:\nhighly recommended !"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 54,
    "text": "5: DataLink Layer 5a-54\nCSMA/CD efficiency\n❒Tprop = max prop between 2 nodes in LAN\n❒ttrans = time to transmit max-size frame\n❒Efficiency goes to 1 as tprop goes to 0\n❒Goes to 1 as ttrans goes to infinity\n❒Much better than ALOHA, but still decentralized, \nsimple, and cheap\ntrans\nprop t\nt\n/\n1\nefficiency\n+\n="
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 55,
    "text": "5: DataLink Layer 5a-55\nEthernet Technologies: 10Base2\n❒10: 10Mbps; 2: under 200 meters max  cable length\n❒thin coaxial cable in a bus topology\n❒repeaters used to connect up to multiple segments\n❒repeater repeats bits it hears on one interface to \nits other interfaces: physical layer device only! ❒has become a legacy technology"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 56,
    "text": "5: DataLink Layer 5a-56\n10BaseT and 100BaseT\n❒10/100 Mbps rate; latter called “fast ethernet”\n❒T stands for Twisted Pair\n❒Nodes connect to a hub: “star topology”; 100 m \nmax distance between nodes and hub\n❒Hubs are essentially physical-layer repeaters:\n❍bits coming in one link go out all other links\n❍no frame buffering\n❍no CSMA/CD at hub: adapters detect collisions\n❍provides net management functionality\nhub\nnodes"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 57,
    "text": "5: DataLink Layer 5a-57\nManchester encoding\n❒Used in 10BaseT, 10Base2\n❒Each bit has a transition\n❒Allows clocks in sending and receiving nodes to \nsynchronize to each other\n❍no need for a centralized, global clock among nodes! ❒Hey, this is physical-layer stuff!"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 58,
    "text": "5: DataLink Layer 5a-58\nGbit Ethernet\n❒use standard Ethernet frame format\n❒allows for point-to-point links and shared \nbroadcast channels\n❒in shared mode, CSMA/CD is used; short distances \nbetween nodes to be efficient\n❒uses hubs, called here “Buffered Distributors”\n❒Full-Duplex at 1 Gbps for point-to-point links\n❒10 Gbps now !"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 59,
    "text": "5: DataLink Layer 5a-59\nChapter 5 outline\n❒5.1 Introduction and \nservices\n❒5.2 Error detection \nand correction \n❒5.3Multiple access \nprotocols\n❒5.4 LAN addresses \nand ARP\n❒5.5 Ethernet\n❒5.6 Hubs, bridges, and \nswitches\n❒5.7 Wireless links and \nLANs \n❒5.8 PPP\n❒5.9 ATM\n❒5.10 Frame Relay"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 60,
    "text": "5: DataLink Layer 5a-60\nInterconnecting LAN segments\n❒Hubs\n❒Bridges\n❒Switches\n❍Remark: switches are essentially multi-port \nbridges. ❍What we say about bridges also holds for \nswitches!"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 61,
    "text": "5: DataLink Layer 5a-61\nInterconnecting with hubs\n❒Backbone hub interconnects LAN segments\n❒Extends max distance between nodes\n❒But individual segment collision domains become one \nlarge collision domain\n❍if a node in CS and a node EE transmit at same time: collision\n❒Can’t interconnect 10BaseT & 100BaseT"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 62,
    "text": "5: DataLink Layer 5a-62\nBridges\n❒Link layer device\n❍stores and forwards Ethernet frames\n❍examines frame header and selectively\nforwards  frame based on MAC dest address\n❍when frame is to be forwarded on segment, \nuses CSMA/CD to access segment\n❒transparent\n❍hosts are unaware of presence of bridges\n❒plug-and-play, self-learning\n❍bridges do not need to be configured"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 63,
    "text": "5: DataLink Layer 5a-63\nBridges: traffic isolation\n❒Bridge installation breaks LAN into LAN segments\n❒bridges filter packets:\n❍same-LAN-segment frames not usually \nforwarded onto other LAN segments\n❍segments become separate collision  domains\nbridge\ncollision \ndomain\ncollision \ndomain\n= hub\n= host\nLAN (IP network)\nLAN segment\nLAN segment"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 64,
    "text": "5: DataLink Layer 5a-64\nForwarding\nHow do determine to which LAN segment to \nforward frame? • Looks like a routing problem..."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 65,
    "text": "5: DataLink Layer 5a-65\nSelf learning\n❒A bridge has a bridge table\n❒entry in bridge table: \n❍(Node LAN Address, Bridge Interface, Time Stamp)\n❍stale entries in table dropped (TTL can be 60 min) \n❒bridges learn which hosts can be reached through \nwhich interfaces\n❍when frame received, bridge “learns”  location of \nsender: incoming LAN segment\n❍records sender/location pair in bridge table"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 66,
    "text": "5: DataLink Layer 5a-66\nFiltering/Forwarding\nWhen bridge receives a frame:\nindex bridge table using MAC dest address\nif entry found for destination\nthen{\nif dest on segment from which frame arrived\nthen drop the frame\nelse forward the frame on interface indicated\n}\nelse flood\nforward on all but the interface \non which the frame arrived"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 67,
    "text": "5: DataLink Layer 5a-67\nBridge example\nSuppose C sends frame to D and D replies back with \nframe to C. \n❒Bridge receives frame from from C\n❍notes in bridge table that C is on interface 1\n❍because D is not in table, bridge sends frame into \ninterfaces 2 and 3\n❒frame received by D"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 68,
    "text": "5: DataLink Layer 5a-68\nBridge Learning: example\n❒D generates frame for C, sends \n❒bridge receives frame\n❍notes in bridge table that D is on interface 2\n❍bridge knows C is on interface 1, so selectively forwards \nframe to interface 1"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 69,
    "text": "5: DataLink Layer 5a-69\nInterconnection without backbone\n❒Not recommended for two reasons:\n- single point of failure at Computer Science hub\n- all traffic between EE and SE must path over \nCS segment"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 70,
    "text": "5: DataLink Layer 5a-70\nBackbone configuration\nRecommended !"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 71,
    "text": "5: DataLink Layer 5a-71\nBridges Spanning Tree\n❒for increased reliability, desirable to have \nredundant, alternative paths from source to dest\n❒with multiple paths, cycles result - bridges may \nmultiply and forward frame forever\n❒solution: organize bridges in a spanning tree by \ndisabling subset of interfaces\nDisabled"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 72,
    "text": "5: DataLink Layer 5a-72\nSome bridge features\n❒Isolates collision domains resulting in higher total \nmax throughput\n❒limitless number of nodes and geographical \ncoverage\n❒Can connect different Ethernet types \n❒Transparent (“plug-and-play”): no configuration \nnecessary"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 73,
    "text": "5: DataLink Layer 5a-73\nBridges vs. Routers\n❒both store-and-forward devices\n❍routers: network layer devices (examine network layer \nheaders)\n❍bridges are link layer devices\n❒routers maintain routing tables, implement routing \nalgorithms\n❒bridges maintain bridge tables, implement filtering, \nlearning and spanning tree algorithms"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 74,
    "text": "5: DataLink Layer 5a-74\nRouters vs. Bridges\nBridges + and -\n+ Bridge operation is simpler requiring less packet \nprocessing\n+ Bridge tables are self learning \n- All traffic confined to spanning tree, even when \nalternative bandwidth is available\n- Bridges do not offer protection from broadcast \nstorms"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 75,
    "text": "5: DataLink Layer 5a-75\nRouters vs. Bridges\nRouters + and -\n+ arbitrary topologies can be supported, cycling is \nlimited by TTL counters (and good routing protocols)\n+ provide protection against broadcast storms\n- require IP address configuration (not plug and play)\n- require higher packet processing\n❒bridges do well in small (few hundred hosts) while \nrouters used in large networks (thousands of hosts)"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 76,
    "text": "5: DataLink Layer 5a-76\nEthernet Switches\n❒Essentially a multi-\ninterface bridge\n❒layer 2 (frame) forwarding, \nfiltering using LAN \naddresses\n❒Switching: A-to-A’ and B-\nto-B’ simultaneously, no \ncollisions\n❒large number of interfaces\n❒often: individual hosts, \nstar-connected into switch\n❍Ethernet, but no \ncollisions!"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 77,
    "text": "5: DataLink Layer 5a-77\nEthernet Switches\n❒cut-through switching: frame forwarded \nfrom input to output port without awaiting \nfor assembly of entire frame\n❍slight reduction in latency\n❒combinations of shared/dedicated, \n10/100/1000 Mbps interfaces"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 78,
    "text": "5: DataLink Layer 5a-78\nNot an atypical LAN (IP network)\nDedicated\nShared"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 79,
    "text": "5: DataLink Layer 5a-79\nSummary comparison\nhubs\nbridges\nrouters\nswitches\ntraffic\nisolation\nno\nyes\nyes\nyes\nplug & play\nyes\nyes\nno\nyes\noptimal\nrouting\nno\nno\nyes\nno\ncut\nthrough\nyes\nno\nno\nyes"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 80,
    "text": "5: DataLink Layer 5a-80\nChapter 5 outline\n❒5.1 Introduction and \nservices\n❒5.2 Error detection \nand correction \n❒5.3Multiple access \nprotocols\n❒5.4 LAN addresses \nand ARP\n❒5.5 Ethernet\n❒5.6 Hubs, bridges, and \nswitches\n❒5.7 Wireless links and \nLANs\n❒5.8 PPP\n❒5.9 ATM\n❒5.10 Frame Relay"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 81,
    "text": "5: DataLink Layer 5a-81\nIEEE 802.11 Wireless LAN\n❒802.11b\n❍2.4-5 GHz unlicensed \nradio spectrum\n❍up to 11 Mbps\n❍direct sequence spread \nspectrum (DSSS) in \nphysical layer\n• all hosts use same \nchipping code\n❍widely deployed, using \nbase stations\n❒802.11a\n❍5-6 GHz range\n❍up to 54 Mbps\n❒802.11g\n❍2.4-5 GHz range\n❍up to 54 Mbps\n❒All use CSMA/CA for \nmultiple access\n❒All have base-station \nand ad-hoc network \nversions"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 82,
    "text": "5: DataLink Layer 5a-82\nBase station approach\n❒Wireless host communicates with a base station\n❍base station = access point (AP)\n❒Basic Service Set (BSS) (a.k.a. “cell”) contains:\n❍wireless hosts\n❍access point (AP): base station\n❒BSSs combined to form distribution system (DS)"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 83,
    "text": "5: DataLink Layer 5a-83\nAd Hoc Network approach\n❒No AP (i.e., base station)\n❒wireless hosts communicate with each other\n❍to get packet from wireless host A to B may \nneed to route through wireless hosts X,Y,Z\n❒Applications:\n❍“laptop” meeting in conference room, car\n❍interconnection of “personal” devices\n❍battlefield \n❒IETF MANET \n(Mobile Ad hoc Networks) \nworking group"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 84,
    "text": "5: DataLink Layer 5a-84\nIEEE 802.11: multiple access\n❒Collision if 2 or more nodes transmit at same time\n❒CSMA makes sense:\n❍get all the bandwidth if you’re the only one transmitting\n❍shouldn’t cause a collision if you sense another transmission\n❒Collision detection doesn’t work: hidden terminal \nproblem"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 85,
    "text": "5: DataLink Layer 5a-85\nIEEE 802.11 MAC Protocol: CSMA/CA\n802.11 CSMA: sender\n- if sense channel idle for \nDISF sec. then transmit entire frame \n(no collision detection)\n-if sense channel busy \nthen binary backoff\n802.11 CSMA receiver\n- if received OK\nreturn ACK after SIFS\n(ACK is needed due to \nhidden terminal problem)"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 86,
    "text": "5: DataLink Layer 5a-86\nCollision avoidance mechanisms\n❒Problem:\n❍two nodes, hidden from each other, transmit complete \nframes to base station\n❍wasted bandwidth for long duration ! ❒Solution: \n❍small reservation packets\n❍nodes track reservation interval  with internal \n“network allocation vector” (NAV)"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 87,
    "text": "5: DataLink Layer 5a-87\nCollision Avoidance: RTS-CTS \nexchange\n❒sender transmits short \nRTS (request to send) \npacket: indicates \nduration of transmission\n❒receiver replies with \nshort CTS (clear to send) \npacket\n❍notifying (possibly hidden) \nnodes\n❒hidden nodes will  not \ntransmit for specified \nduration: NAV"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 88,
    "text": "5: DataLink Layer 5a-88\nCollision Avoidance: RTS-CTS \nexchange\n❒RTS and CTS short:\n❍collisions less likely, of \nshorter duration\n❍end result similar to \ncollision detection\n❒IEEE 802.11 allows:\n❍CSMA\n❍CSMA/CA: reservations\n❍polling from AP"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 89,
    "text": "5: DataLink Layer 5a-89\nA word about Bluetooth\n❒Low-power, small radius, \nwireless networking \ntechnology\n❍10-100 meters\n❒omnidirectional\n❍not line-of-sight infrared\n❒Interconnects gadgets\n❒2.4-2.5 GHz unlicensed \nradio band\n❒up to 721 kbps\n❒Interference from \nwireless LANs, digital \ncordless phones, \nmicrowave ovens:\n❍frequency hopping helps\n❒MAC protocol supports:\n❍error correction\n❍ARQ\n❒Each node has a 12-bit \naddress"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 90,
    "text": "5: DataLink Layer 5a-90\nChapter 5 outline\n❒5.1 Introduction and \nservices\n❒5.2 Error detection \nand correction \n❒5.3Multiple access \nprotocols\n❒5.4 LAN addresses \nand ARP\n❒5.5 Ethernet\n❒5.6 Hubs, bridges, and \nswitches\n❒5.7 Wireless links and \nLANs \n❒5.8 PPP\n❒5.9 ATM\n❒5.10 Frame Relay"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 91,
    "text": "5: DataLink Layer 5a-91\nPoint to Point Data Link Control\n❒one sender, one receiver, one link: easier than \nbroadcast link:\n❍no Media Access Control\n❍no need for explicit MAC addressing\n❍e.g., dialup link, ISDN line\n❒popular  point-to-point DLC protocols:\n❍PPP (point-to-point protocol)\n❍HDLC: High level data link control (Data link \nused to be considered “high layer” in protocol \nstack!"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 92,
    "text": "5: DataLink Layer 5a-92\nPPP Design Requirements [RFC 1557]\n❒packet framing: encapsulation of network-layer \ndatagram in data link frame \n❍carry network layer data of any network layer \nprotocol (not just IP) at same time\n❍ability to demultiplex upwards\n❒bit transparency: must carry any bit pattern in the \ndata field\n❒error detection (no correction)\n❒connection liveness: detect, signal link failure to \nnetwork layer\n❒network layer address negotiation: endpoint can \nlearn/configure each other’s network address"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 93,
    "text": "5: DataLink Layer 5a-93\nPPP non-requirements\n❒no error correction/recovery\n❒no flow control\n❒out of order delivery OK \n❒no need to support multipoint links (e.g., polling)\nError recovery, flow control, data re-ordering \nall relegated to higher layers!"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 94,
    "text": "5: DataLink Layer 5a-94\nPPP Data Frame\n❒Flag: delimiter (framing)\n❒Address: does nothing (only one option)\n❒Control: does nothing; in the future possible \nmultiple control fields\n❒Protocol: upper layer protocol to which frame \ndelivered (eg, PPP-LCP, IP, IPCP, etc)"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 95,
    "text": "5: DataLink Layer 5a-95\nPPP Data Frame\n❒info: upper layer data being carried\n❒check: cyclic redundancy check for error \ndetection"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 96,
    "text": "5: DataLink Layer 5a-96\nByte Stuffing\n❒“data transparency” requirement: data field must \nbe allowed to include flag pattern  <01111110>\n❍Q: is received <01111110> data or flag? ❒Sender: adds (“stuffs”) extra < 01111110> byte \nafter each < 01111110> data  byte\n❒Receiver:\n❍two 01111110 bytes in a row: discard first byte, \ncontinue data reception\n❍single 01111110: flag byte"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 97,
    "text": "5: DataLink Layer 5a-97\nByte Stuffing\nflag byte\npattern\nin data\nto send\nflag byte pattern plus\nstuffed byte in \ntransmitted  data"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 98,
    "text": "5: DataLink Layer 5a-98\nPPP Data Control Protocol\nBefore exchanging network-\nlayer data, data link peers \nmust\n❒configure PPP link (max. frame length, \nauthentication)\n❒learn/configure network\nlayer information\n❍for IP: carry IP Control \nProtocol (IPCP) msgs\n(protocol field: 8021) to \nconfigure/learn IP \naddress"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 99,
    "text": "5: DataLink Layer 5a-99\nChapter 5 outline\n❒5.1 Introduction and \nservices\n❒5.2 Error detection \nand correction \n❒5.3Multiple access \nprotocols\n❒5.4 LAN addresses \nand ARP\n❒5.5 Ethernet\n❒5.6 Hubs, bridges, and \nswitches\n❒5.7 Wireless links and \nLANs \n❒5.8 PPP\n❒5.9 ATM\n❒5.10 Frame Relay"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 100,
    "text": "5: DataLink Layer\n5a-\nAsynchronous Transfer Mode: ATM\n❒1990’s/00 standard for high-speed (155Mbps to \n622 Mbps and higher) Broadband Integrated \nService Digital Network architecture\n❒Goal: integrated, end-end transport of carry voice, \nvideo, data\n❍meeting timing/QoS requirements of voice, video \n(versus Internet best-effort model)\n❍“next generation” telephony: technical roots in \ntelephone world\n❍packet-switching (fixed length packets, called \n“cells”) using virtual circuits"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 101,
    "text": "5: DataLink Layer\n5a-\nATM architecture \n❒adaptation layer: only at edge of ATM network\n❍data segmentation/reassembly\n❍roughly analogous to Internet transport layer\n❒ATM layer: “network” layer\n❍cell switching, routing\n❒physical layer"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 102,
    "text": "5: DataLink Layer\n5a-\nATM:  network or link layer? Vision: end-to-end \ntransport: “ATM from \ndesktop to desktop”\n❍ATM is a network \ntechnology\nReality: used to connect \nIP backbone routers  \n❍“IP over ATM”\n❍ATM as switched \nlink layer, \nconnecting IP \nrouters"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 103,
    "text": "5: DataLink Layer\n5a-\nATM Adaptation Layer (AAL)\n❒ATM Adaptation Layer (AAL): “adapts” upper \nlayers (IP or native ATM applications)  to ATM \nlayer below\n❒AAL present only in end systems, not in switches\n❒AAL layer segment (header/trailer fields, data) \nfragmented across multiple ATM cells \n❍analogy: TCP segment in many IP packets"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 104,
    "text": "5: DataLink Layer\n5a-\nATM Adaptation Layer (AAL) [more]\nDifferent versions of AAL layers, depending on ATM \nservice class:\n❒AAL1: for CBR (Constant Bit Rate) services, e.g. circuit emulation\n❒AAL2: for VBR (Variable Bit Rate) services, e.g., MPEG video\n❒AAL5: for data (e.g., IP datagrams)\nAAL PDU\nATM cell\nUser data"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 105,
    "text": "5: DataLink Layer\n5a-\nAAL5 - Simple And Efficient \nAL (SEAL)\n❒AAL5: low overhead AAL used to carry IP \ndatagrams\n❍4 byte cyclic redundancy check \n❍PAD ensures payload multiple of 48bytes \n❍large AAL5 data unit to be fragmented into 48-\nbyte ATM cells"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 106,
    "text": "5: DataLink Layer\n5a-\nATM Layer\nService: transport cells across ATM network\n❒analogous to IP network layer\n❒very different services than IP network layer\nNetwork\nArchitecture\nInternet\nATM\nATM\nATM\nATM\nService\nModel\nbest effort\nCBR\nVBR\nABR\nUBR\nBandwidth\nnone\nconstant\nrate\nguaranteed\nrate\nguaranteed \nminimum\nnone\nLoss\nno\nyes\nyes\nno\nno\nOrder\nno\nyes\nyes\nyes\nyes\nTiming\nno\nyes\nyes\nno\nno\nCongestion\nfeedback\nno (inferred\nvia loss)\nno\ncongestion\nno\ncongestion\nyes\nno\nGuarantees ?"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 107,
    "text": "5: DataLink Layer\n5a-\nATM Layer: Virtual Circuits\n❒VC transport: cells carried on VC from source to dest\n❍call setup, teardown for each call before data can flow\n❍each packet carries VC identifier (not destination ID)\n❍every switch on source-dest path maintain “state” for each \npassing connection\n❍link,switch resources (bandwidth, buffers) may be allocated to \nVC: to get circuit-like perf. ❒Permanent VCs (PVCs)\n❍long lasting connections\n❍typically: “permanent” route between to IP routers\n❒Switched VCs (SVC):\n❍dynamically set up on per-call basis"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 108,
    "text": "5: DataLink Layer\n5a-\nATM VCs\n❒Advantages of ATM VC approach:\n❍QoS performance guarantee for connection \nmapped to VC (bandwidth, delay, delay jitter)\n❒Drawbacks of ATM VC approach:\n❍Inefficient support of datagram traffic\n❍one PVC between each source/dest pair) does \nnot scale (N*2 connections needed) \n❍SVC introduces call setup latency, processing \noverhead for short lived connections"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 109,
    "text": "5: DataLink Layer\n5a-\nATM Layer: ATM cell\n❒5-byte ATM cell header\n❒48-byte payload\n❍Why? : small payload -> short cell-creation delay \nfor digitized voice\n❍halfway between 32 and 64 (compromise!) Cell header\nCell format"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 110,
    "text": "5: DataLink Layer\n5a-\nATM cell header\n❒VCI: virtual channel ID\n❍will change from link to link thru net\n❒PT: Payload type (e.g. RM cell versus data cell) \n❒CLP: Cell Loss Priority bit\n❍CLP = 1 implies low priority cell, can be \ndiscarded if congestion\n❒HEC: Header Error Checksum\n❍cyclic redundancy check"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 111,
    "text": "5: DataLink Layer\n5a-\nATM Physical Layer (more)\nTwo pieces (sublayers) of physical layer:\n❒Transmission Convergence Sublayer (TCS): adapts \nATM layer above to PMD sublayer below\n❒Physical Medium Dependent: depends on physical \nmedium being used\nTCS Functions:\n❍Header checksum generation: 8 bits CRC \n❍Cell delineation\n❍With “unstructured” PMD sublayer, transmission \nof idle cells when no data cells to send"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 112,
    "text": "5: DataLink Layer\n5a-\nATM Physical Layer\nPhysical Medium Dependent (PMD) sublayer\n❒SONET/SDH: transmission frame structure (like a \ncontainer carrying bits); \n❍bit synchronization; \n❍bandwidth partitions (TDM); \n❍several speeds: OC3 = 155.52 Mbps; OC12 = 622.08 \nMbps; OC48 = 2.45 Gbps, OC192 = 9.6 Gbps\n❒TI/T3: transmission frame structure (old \ntelephone hierarchy): 1.5 Mbps/ 45 Mbps\n❒unstructured: just cells (busy/idle)"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 113,
    "text": "5: DataLink Layer\n5a-\nIP-Over-ATM\nClassic IP only\n❒3 “networks” (e.g., \nLAN segments)\n❒MAC (802.3) and IP \naddresses\nIP over ATM\n❒replace “network” \n(e.g., LAN segment) \nwith ATM network\n❒ATM addresses, IP \naddresses\nATM\nnetwork\nEthernet\nLANs\nEthernet\nLANs"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 114,
    "text": "5: DataLink Layer\n5a-\nIP-Over-ATM\nIssues:\n❒IP datagrams into \nATM AAL5 PDUs\n❒from IP addresses \nto ATM addresses\n❍just like IP \naddresses to \n802.3 MAC \naddresses! ATM\nnetwork\nEthernet\nLANs"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 115,
    "text": "5: DataLink Layer\n5a-\nDatagram Journey in IP-over-ATM Network\n❒at Source Host:\n❍IP layer maps between IP, ATM dest address (using ARP)\n❍passes datagram to AAL5\n❍AAL5 encapsulates data, segments cells, passes to ATM layer \n❒ATM network: moves cell along VC to destination\n❒at Destination Host:\n❍AAL5  reassembles cells into original datagram\n❍if CRC OK, datagram is passed to IP"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 116,
    "text": "5: DataLink Layer\n5a-\nChapter 5 outline\n❒5.1 Introduction and \nservices\n❒5.2 Error detection \nand correction \n❒5.3Multiple access \nprotocols\n❒5.4 LAN addresses \nand ARP\n❒5.5 Ethernet\n❒5.6 Hubs, bridges, and \nswitches\n❒5.7 Wireless links and \nLANs \n❒5.8 PPP\n❒5.9 ATM\n❒5.10 Frame Relay"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 117,
    "text": "5: DataLink Layer\n5a-\nFrame Relay\nLike ATM:\n❒wide area network technologies \n❒Virtual-circuit oriented \n❒origins in telephony world\n❒can be used to carry IP datagrams\n❍can thus be viewed as link layers by IP \nprotocol"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 118,
    "text": "5: DataLink Layer\n5a-\nFrame Relay\n❒Designed in late ‘80s, widely deployed in the ‘90s\n❒Frame relay service:\n❍no error control\n❍end-to-end congestion control"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 119,
    "text": "5: DataLink Layer\n5a-\nFrame Relay (more)\n❒Designed to interconnect corporate customer LANs\n❍typically permanent VC’s: “pipe” carrying aggregate \ntraffic between two routers \n❍switched VC’s: as in ATM\n❒corporate customer leases FR service from public \nFrame Relay network (e.g., Sprint, ATT)"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 120,
    "text": "5: DataLink Layer\n5a-\nFrame Relay (more)\n❒Flag bits, 01111110, delimit frame\n❒address:\n❍10 bit VC ID field\n❍3 congestion control bits\n• FECN: forward explicit congestion \nnotification (frame experienced congestion \non path)\n• BECN: congestion on reverse path\n• DE: discard eligibility\naddress\nflags\ndata\nCRC\nflags"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 121,
    "text": "5: DataLink Layer\n5a-\nFrame Relay -VC Rate Control\n❒Committed Information Rate (CIR)\n❍defined, “guaranteed” for each VC\n❍negotiated at VC set up time\n❍customer pays based on CIR\n❒DE bit: Discard Eligibility bit\n❍Edge FR switch measures traffic rate for each VC; \nmarks DE bit\n❍DE = 0: high priority, rate compliant frame; deliver \nat “all costs”\n❍DE = 1: low priority, eligible for congestion discard"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 122,
    "text": "5: DataLink Layer\n5a-\nFrame Relay - CIR & Frame Marking\n❒Access Rate: rate R of the access link between \nsource router (customer) and edge FR switch\n(provider); 64Kbps < R < 1,544Kbps\n❒Typically, many VCs (one per destination router) \nmultiplexed on the same access trunk; each VC has \nown CIR\n❒Edge FR switch measures traffic rate for each \nVC; it marks (i.e. DE = 1) frames which exceed CIR \n(these may be later dropped)\n❒Internet’s more recent differentiated service\nuses similar ideas"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 123,
    "text": "5: DataLink Layer\n5a-\nChapter 5: Summary\n❒principles behind data link layer services:\n❍error detection, correction\n❍sharing a broadcast channel: multiple access\n❍link layer addressing, ARP\n❒link layer technologies: Ethernet, hubs, \nbridges, switches,IEEE 802.11 LANs, PPP, \nATM, Frame Relay\n❒journey down the protocol stack now OVER! ❍next stops: multimedia, security, network \nmanagement"
  },
  {
    "unit": "Unit 4",
    "topic": "Slide",
    "source": "ppt",
    "page": 1,
    "text": "1\n\nUpon completion you will be able to:\nElectronic Mail:\nSMTP, POP, and IMAP\n\n Understand four configurations of email architecture\n Understand the functions and formats of a user agent\n Understand MIME and its capabilities and data types\n Understand the functions and commands of an  MTA\n Understand the function of POP3 and IMAP4\nObjectives"
  },
  {
    "unit": "Unit 4",
    "topic": "Slide",
    "source": "ppt",
    "page": 2,
    "text": "2\n  ARCHITECTURE\nTo explain the architecture of email, we give four scenarios. We begin with the simplest situation and add complexity as we proceed. The fourth scenario is the most common in the exchange of email.\n\n\nUser Agent - software program that composes, reads, replies to, and forwards messages.  It also handles mailboxes.\n\nMessage Transfer Agent - the actual mail transfer is done through message transfer agents.  SMTP is an example of an MTA.\n\nMessage Access Agent - the software that pulls messages out of a mailbox.  POP3 and IMAP4 are examples of MAAs."
  },
  {
    "unit": "Unit 4",
    "topic": "Slide",
    "source": "ppt",
    "page": 3,
    "text": "3\nFirst and second scenario\n\n\n\n\n\n\n\nFirst scenario: sender and\nreceiver on same system\nso need only two UAs.\n\n\n\nSecond scenario: sender\nand receiver on different\nsystems so need two\nUAs and pair of MTAs"
  },
  {
    "unit": "Unit 4",
    "topic": "Slide",
    "source": "ppt",
    "page": 4,
    "text": "4\nThird scenario"
  },
  {
    "unit": "Unit 4",
    "topic": "Slide",
    "source": "ppt",
    "page": 5,
    "text": "5\nFourth scenario\n\n\n\n\n\n\n\nWhen both sender and\nreceiver are connected\nto the mail server via a\nLAN or a WAN, we need\ntwo UAs, two pairs of \nMTAs (client and server),and a pair of MAAs (client and server). \nThis is the most common \nsituation today."
  },
  {
    "unit": "Unit 4",
    "topic": "Slide",
    "source": "ppt",
    "page": 6,
    "text": "6\n   USER AGENT\nThe user agent (UA) provides service to the user to make the process of sending and receiving a message easier.\nThe topics discussed in this section include:\nServices Provided by a User Agent \nUser Agent Types \nSending Mail \nReceiving Mail \nAddresses \nMailing List \nMIME"
  },
  {
    "unit": "Unit 4",
    "topic": "Slide",
    "source": "ppt",
    "page": 7,
    "text": "7\nUser agent\n\n\n\n\n\n\n\nLike many applications, email programs can be command driven\nor GUI-based."
  },
  {
    "unit": "Unit 4",
    "topic": "Slide",
    "source": "ppt",
    "page": 8,
    "text": "8\nFormat of an email"
  },
  {
    "unit": "Unit 4",
    "topic": "Slide",
    "source": "ppt",
    "page": 9,
    "text": "9\nEmail address\n\n\n\n\n\n\n\nEmail also allows one name, an alias, to represent several different\nemail addresses: this is called a mailing list.  Every time an email\nis sent, the system checks the recipient’s name against the\nalias database."
  },
  {
    "unit": "Unit 4",
    "topic": "Slide",
    "source": "ppt",
    "page": 10,
    "text": "10\nMIME\n\n\n\n\n\n\n\nEmail can only send messages composed of 7-bit NVT ASCII.\n(NVT = network virtual terminal)  What if you tried to send\na file that was not in 7-bit ASCII?\nMIME (Multipurpose Internet Mail Extensions) allows an email\nsystem to send non-ASCII data."
  },
  {
    "unit": "Unit 4",
    "topic": "Slide",
    "source": "ppt",
    "page": 11,
    "text": "11\nMIME header\n\n\n\n\n\n\n\nMIME defines 5 headers that can be added to the original\nemail header section to define the transformation\nparameters:\nMIME version is currently 1.1"
  },
  {
    "unit": "Unit 4",
    "topic": "Slide",
    "source": "ppt",
    "page": 12,
    "text": "12\nData types and subtypes in MIME\nMIME allows seven different types of data (five of those\nhave subtypes).\nText: the original message is in 7-bit ASCII and no transformation\nby MIME is needed."
  },
  {
    "unit": "Unit 4",
    "topic": "Slide",
    "source": "ppt",
    "page": 13,
    "text": "13\nMultipart: the body contains multiple, independent parts.  Some\ntype of boundary is defined and this boundary is used to separate\nthe parts.  For example:\n\nContent-Type: multipart/mixed; boundary=xxxx\n\t--xxxx\n\tContent-type: text/plain;\n\t…………………….\n\t--xxxx\n\tContent-type: image/gif;\n\t…………………….\n\t--xxxx--"
  },
  {
    "unit": "Unit 4",
    "topic": "Slide",
    "source": "ppt",
    "page": 14,
    "text": "14\nData types and subtypes in MIME (Continued)\nVideo: MPEG - if the video includes sound, then the sound must\nbe sent separately using the audio content type\n\nApplication: Octet-stream - used for binary files"
  },
  {
    "unit": "Unit 4",
    "topic": "Slide",
    "source": "ppt",
    "page": 15,
    "text": "15\nContent-transfer-encoding\nThe next header defines the method used to encode the messages\ninto 0s and 1s for transport."
  },
  {
    "unit": "Unit 4",
    "topic": "Slide",
    "source": "ppt",
    "page": 16,
    "text": "16\nBase64\n\n\n\n\n\n\n\nThese values here\ncome from the\ntable on the next\nslide."
  },
  {
    "unit": "Unit 4",
    "topic": "Slide",
    "source": "ppt",
    "page": 17,
    "text": "17\nBase64 encoding table"
  },
  {
    "unit": "Unit 4",
    "topic": "Slide",
    "source": "ppt",
    "page": 18,
    "text": "18\nQuoted-printable\n\n\n\n\n\n\n\nBase-64 has a 25% overhead.  If the data has a high\npercentage of ASCII characters already, then use this\ntechnique.  (Not as common as Base-64.)\n= sign (not a 5) \t9D is ASCII rep of hex data"
  },
  {
    "unit": "Unit 4",
    "topic": "Slide",
    "source": "ppt",
    "page": 19,
    "text": "19\nSMTP range\n\n\n\n\n\n\n\nSMTP is used once between Sender and Sender’s mail server,\nand then again between the two mail servers."
  },
  {
    "unit": "Unit 4",
    "topic": "Slide",
    "source": "ppt",
    "page": 20,
    "text": "20\nCommands and responses\n\n\n\n\n\n\n\nCommands are sent from client to server; responses vice versa.\nCommands consist of keyword followed by zero or more\narguments.\n\n14 different commands.  First 5 are required by all institutions.\n\nNext 3 are often used and highly recommended.\n\nLast 6 are seldom used.\n\nAnd the commands are……"
  },
  {
    "unit": "Unit 4",
    "topic": "Slide",
    "source": "ppt",
    "page": 21,
    "text": "21\nCommands"
  },
  {
    "unit": "Unit 4",
    "topic": "Slide",
    "source": "ppt",
    "page": 22,
    "text": "22\nCommands\nHELO - used by client to identify himself.  The argument\nis the domain name of the client host.\nHELO: cs.depaul.edu\n\nMAIL FROM - Used to identify the sender of the message\nMAIL FROM:cwhite@cs.depaul.edu\n\nRCPT TO - used by client to identify the intended recipient\nof the message.  If multiple recipients, the command is\nrepeated.\nRCPT TO: myers@trinity.edu\n\nDATA - all lines that follow the DATA command are treated\nas the mail message.  The message is terminated by a line\ncontaining just one period.\n\nQUIT - this command terminates the message"
  },
  {
    "unit": "Unit 4",
    "topic": "Slide",
    "source": "ppt",
    "page": 23,
    "text": "23\nCommands\nRSET - aborts the current mail transaction.  The stored \ninformation about the sender and recipient is deleted.\n\nVRFY - used to verify the address of the recipient, which is\nsent as the argument.\nVRFY: myers@trinity.edu\n\nNOOP - used by the client to check the status of the recipient.\nIt requires an answer from the recipient."
  },
  {
    "unit": "Unit 4",
    "topic": "Slide",
    "source": "ppt",
    "page": 24,
    "text": "24\nResponses\nResponses are\n3-digit codes\n\nCodes that begin\nwith a 2 are\npositive completions\netc."
  },
  {
    "unit": "Unit 4",
    "topic": "Slide",
    "source": "ppt",
    "page": 25,
    "text": "25\nResponses (Continued)"
  },
  {
    "unit": "Unit 4",
    "topic": "Slide",
    "source": "ppt",
    "page": 26,
    "text": "26\nConnection establishment\n\n\n\n\n\n\n\nThe process of transferring a mail message occurs in three\nphases: connection establishment, mail transfer, and \nconnection termination."
  },
  {
    "unit": "Unit 4",
    "topic": "Slide",
    "source": "ppt",
    "page": 27,
    "text": "27\nMessage transfer"
  },
  {
    "unit": "Unit 4",
    "topic": "Slide",
    "source": "ppt",
    "page": 28,
    "text": "28\nConnection termination"
  },
  {
    "unit": "Unit 4",
    "topic": "Slide",
    "source": "ppt",
    "page": 29,
    "text": "29\nMESSAGE ACCESS AGENT:\u000b          POP AND IMAP\nThe third stage of mail delivery uses a message access agent; the client must pull messages from the server. Currently two message access protocols are available: Post Office Protocol, version 3 (POP3) and Internet Mail Access Protocol, version 4.\nThe topics discussed in this section include:\nPOP3 \nIMAP4"
  },
  {
    "unit": "Unit 4",
    "topic": "Slide",
    "source": "ppt",
    "page": 30,
    "text": "30\nPOP3 and IMAP4"
  },
  {
    "unit": "Unit 4",
    "topic": "Slide",
    "source": "ppt",
    "page": 31,
    "text": "31\nPOP3 and IMAP4\n\n\n\n\n\n\n\nPOP3 is simple and limited in functionality.\n\nNeed POP3 client on user machine and POP3 server\non the mail server machine.\n\nThe client opens a connection to the server on TCP\nport 110.\n\nIt then sends its user name and password to access\nthe mailbox. \n\nUser can then access the email.\n\nExample on next slide:"
  },
  {
    "unit": "Unit 4",
    "topic": "Slide",
    "source": "ppt",
    "page": 32,
    "text": "32\nPOP3"
  },
  {
    "unit": "Unit 4",
    "topic": "Slide",
    "source": "ppt",
    "page": 33,
    "text": "33\nPOP3 and IMAP4\n\n\n\n\n\n\n\nIMAP is more powerful and more complex than POP3.\n\nIn particular, with IMAP:\n\nA user can check the email header prior to downloading\n\nA user can search the contents of the email for a\nspecific string of characters prior to downloading\n\nA user can partially download email (helpful if email contains\nhuge attachments and connection is slow\n\nA user can create, delete, or rename mailboxes on the \nmail server\n\nA user can create a hierarchy of mailboxes in a folder for\nemail storage"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 1,
    "text": "Chapter 4 \nNetwork Layer \nComputer \nNetworking: A Top \nDown Approach  \n6th edition  \nJim Kurose, Keith Ross \nAddison-Wesley \nMarch 2012 \nA note on the use of these ppt slides: \nWe’re making these slides freely available to all (faculty, students, readers). They’re in PowerPoint form so you see the animations; and can add, modify, \nand delete slides  (including this one) and slide content to suit your needs. They obviously represent a lot of work on our part. In return for use, we only \nask the following: \n \n \nv  If you use these slides (e.g., in a class) that you mention their source \n(after all, we’d like people to use our book!) v  If you post any slides on a www site, that you note that they are adapted \nfrom (or perhaps identical to) our slides, and note our copyright of this \nmaterial. Thanks and enjoy! JFK/KWR \n \n     All material copyright 1996-2013 \n     J.F Kurose and K.W. Ross, All Rights Reserved \nNetwork Layer 4-1"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 2,
    "text": "Network Layer 4-2 \nChapter 4: network layer \nchapter goals:  \nv  understand principles behind network layer \nservices: \n§  network layer service models \n§  forwarding versus routing \n§  how a router works \n§  routing (path selection) \n§  broadcast, multicast \nv  instantiation, implementation in the Internet"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 3,
    "text": "Network Layer 4-3 \n4.1 introduction \n4.2 virtual circuit and \ndatagram networks \n4.3 what’s inside a router \n4.4 IP: Internet Protocol \n§  datagram format \n§  IPv4 addressing \n§  ICMP \n§  IPv6 \n4.5 routing algorithms \n§  link state \n§  distance vector \n§  hierarchical routing \n4.6 routing in the Internet \n§  RIP \n§  OSPF \n§  BGP \n4.7 broadcast and multicast \nrouting \nChapter 4: outline"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 4,
    "text": "Network Layer 4-4 \nNetwork layer \nv  transport segment from \nsending to receiving host  \nv  on sending side \nencapsulates segments \ninto datagrams \nv  on receiving side, delivers \nsegments to transport \nlayer \nv  network layer protocols \nin every host, router \nv  router examines header \nfields in all IP datagrams \npassing through it \napplication \ntransport \nnetwork \ndata link \nphysical \napplication \ntransport \nnetwork \ndata link \nphysical \n \nnetwork \ndata link \nphysical \n \nnetwork \ndata link \nphysical \n \nnetwork \ndata link \nphysical \n \nnetwork \ndata link \nphysical \n \nnetwork \ndata link \nphysical \n \nnetwork \ndata link \nphysical \n \nnetwork \ndata link \nphysical \n \nnetwork \ndata link \nphysical \n \nnetwork \ndata link \nphysical \n \nnetwork \ndata link \nphysical \n \nnetwork \ndata link \nphysical"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 5,
    "text": "Network Layer 4-5 \nTwo key network-layer functions \nv  forwarding: move packets \nfrom router’s input to \nappropriate router \noutput \nv  routing: determine route \ntaken by packets from \nsource to dest. §  routing algorithms \n \nanalogy: \nv  routing: process of \nplanning trip from source \nto dest \nv  forwarding: process of \ngetting through single \ninterchange"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 6,
    "text": "Network Layer 4-6 \n2 \n0111 \nvalue in arriving \npacket’s header \nrouting algorithm \nlocal forwarding table \nheader value output link \n0101 \n1001 \n2 \n1 \nInterplay between routing and forwarding \nrouting algorithm determines \nend-end-path through network \nforwarding table determines \nlocal forwarding at this router"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 7,
    "text": "Network Layer 4-7 \nConnection setup \nv  3rd important function in some network \narchitectures: \n§  ATM, frame relay, X.25 \nv  before datagrams flow, two end hosts and \nintervening routers establish virtual connection \n§  routers get involved \nv  network vs transport layer connection service: \n§  network: between two hosts (may also involve intervening \nrouters in case of VCs) \n§  transport: between two processes"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 8,
    "text": "Network Layer 4-8 \nNetwork service model \nQ: What service model for “channel” transporting \ndatagrams from sender to receiver? example services for \nindividual datagrams: \nv  guaranteed delivery \nv  guaranteed delivery with \nless than 40 msec delay \nexample services for a flow \nof datagrams: \nv  in-order datagram \ndelivery \nv  guaranteed minimum \nbandwidth to flow \nv  restrictions on changes in \ninter-packet spacing"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 9,
    "text": "Network Layer 4-9 \nNetwork layer service models: \nNetwork \nArchitecture \n \nInternet \n \nATM \n \nATM \n \nATM \n \nATM \nService \nModel \n \nbest effort \n \nCBR \n \nVBR \n \nABR \n \nUBR \nBandwidth \n \nnone \n \nconstant \nrate \nguaranteed \nrate \nguaranteed  \nminimum \nnone \nLoss \n \nno \n \nyes \n \nyes \n \nno \n \nno \nOrder \n \nno \n \nyes \n \nyes \n \nyes \n \nyes \nTiming \n \nno \n \nyes \n \nyes \n \nno \n \nno \nCongestion \nfeedback \n \nno (inferred \nvia loss) \nno \ncongestion \nno \ncongestion \nyes \n \nno \nGuarantees ?"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 10,
    "text": "Network Layer 4-10 \n4.1 introduction \n4.2 virtual circuit and \ndatagram networks \n4.3 what’s inside a router \n4.4 IP: Internet Protocol \n§  datagram format \n§  IPv4 addressing \n§  ICMP \n§  IPv6 \n4.5 routing algorithms \n§  link state \n§  distance vector \n§  hierarchical routing \n4.6 routing in the Internet \n§  RIP \n§  OSPF \n§  BGP \n4.7 broadcast and multicast \nrouting \nChapter 4: outline"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 11,
    "text": "Network Layer 4-11 \nConnection, connection-less service \nv  datagram network provides network-layer \nconnectionless service \nv  virtual-circuit network provides network-layer \nconnection service \nv  analogous to TCP/UDP connecton-oriented / \nconnectionless transport-layer services, but: \n§  service: host-to-host \n§  no choice: network provides one or the other \n§  implementation: in network core"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 12,
    "text": "Network Layer 4-12 \nVirtual circuits \nv  call setup, teardown for each call before data can flow \nv  each packet carries VC identifier (not destination host \naddress) \nv  every router on source-dest path maintains “state” for \neach passing connection \nv  link, router resources (bandwidth, buffers) may be \nallocated to VC (dedicated resources = predictable \nservice) \n \n“source-to-dest path behaves much like telephone \ncircuit” \n§  performance-wise \n§  network actions along source-to-dest path"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 13,
    "text": "Network Layer 4-13 \nVC implementation \na VC consists of: \n1.  path from source to destination \n2. VC numbers, one number for each link along path \n3.  entries in forwarding tables in routers along path \nv \npacket belonging to VC carries VC number \n(rather than dest address) \nv \nVC number can be changed on each link. § \nnew VC number comes from forwarding table"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 14,
    "text": "Network Layer 4-14 \nVC forwarding table \n22 \n1 \n2 3 \nVC number \ninterface \nnumber \nIncoming interface    Incoming VC #     Outgoing interface    Outgoing VC # \n1                          12                               3                          22 \n2                          63                               1                          18  \n3                           7                                2                          17 \n1                          97                               3                           87 \n…                          …                                …                            … \nforwarding table in \nnorthwest router: \nVC routers maintain connection state information!"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 15,
    "text": "Network Layer 4-15 \napplication \ntransport \nnetwork \ndata link \nphysical \nVirtual circuits: signaling protocols \nv  used to setup, maintain  teardown VC \nv  used in ATM, frame-relay, X.25 \nv  not used in today’s Internet \n1. initiate call \n2. incoming call \n3. accept call \n4. call connected \n5. data flow begins \n6. receive data \napplication \ntransport \nnetwork \ndata link \nphysical"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 16,
    "text": "Network Layer 4-16 \nDatagram networks \nv  no call setup at network layer \nv  routers: no state about end-to-end connections \n§  no network-level concept of “connection” \nv  packets forwarded using destination host address \n1. send datagrams \napplication \ntransport \nnetwork \ndata link \nphysical \napplication \ntransport \nnetwork \ndata link \nphysical \n2. receive datagrams"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 17,
    "text": "Network Layer 4-17 \n2 \nDatagram forwarding  table \nIP destination address in  \narriving packet’s header \nrouting algorithm \nlocal forwarding table \ndest address output  link \naddress-range 1 \naddress-range 2 \naddress-range 3 \naddress-range 4 \n2 \n1 \n4 billion IP addresses, so \nrather than list individual \ndestination address \nlist range of addresses \n(aggregate table entries)"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 18,
    "text": "Network Layer 4-18 \nDestination Address Range \n \n11001000 00010111 00010000 00000000 \nthrough                                  \n11001000 00010111 00010111 11111111 \n \n11001000 00010111 00011000 00000000 \nthrough \n11001000 00010111 00011000 11111111   \n \n11001000 00010111 00011001 00000000 \nthrough \n11001000 00010111 00011111 11111111   \n \notherwise \nLink Interface \n1 \n3   \n \nQ: but what happens if ranges don’t divide up so nicely? Datagram forwarding  table"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 19,
    "text": "Network Layer 4-19 \nLongest prefix matching \nDestination Address Range                         \n11001000 00010111 00010*** *********  \n11001000 00010111 00011000 ********* \n11001000 00010111 00011*** ********* \notherwise              \nDA: 11001000  00010111  00011000  10101010  \nexamples: \nDA: 11001000  00010111  00010110  10100001  \nwhich interface? which interface? when looking for forwarding table entry for given \ndestination address, use longest address prefix that \nmatches destination address. longest prefix matching \nLink interface \n1 \n3"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 20,
    "text": "Network Layer 4-20 \nDatagram or VC network: why? Internet (datagram) \nv  data exchange among \ncomputers \n§  “elastic” service, no strict \ntiming req. v  many link types  \n§  different characteristics \n§  uniform service difficult \nv  “smart” end systems \n(computers) \n§  can adapt, perform control, \nerror recovery \n§  simple inside network, \ncomplexity at “edge” \nATM (VC) \nv  evolved from telephony \nv  human conversation:  \n§  strict timing, reliability \nrequirements \n§  need for guaranteed service \nv  “dumb” end systems \n§  telephones \n§  complexity inside \nnetwork"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 21,
    "text": "Network Layer 4-21 \n4.1 introduction \n4.2 virtual circuit and \ndatagram networks \n4.3 what’s inside a router \n4.4 IP: Internet Protocol \n§  datagram format \n§  IPv4 addressing \n§  ICMP \n§  IPv6 \n4.5 routing algorithms \n§  link state \n§  distance vector \n§  hierarchical routing \n4.6 routing in the Internet \n§  RIP \n§  OSPF \n§  BGP \n4.7 broadcast and multicast \nrouting \nChapter 4: outline"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 22,
    "text": "Network Layer 4-22 \nRouter architecture overview \ntwo key router functions:  \nv  run routing algorithms/protocol (RIP, OSPF, BGP) \nv  forwarding datagrams from incoming to outgoing link \nhigh-seed  \nswitching \nfabric \nrouting  \nprocessor \nrouter input ports \nrouter output ports \nforwarding data \nplane  (hardware) \nrouting, management \ncontrol plane (software) \nforwarding tables computed, \npushed to input ports"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 23,
    "text": "Network Layer 4-23 \nline \ntermination \nlink  \nlayer  \nprotocol \n(receive) \nlookup, \nforwarding \n \n \nqueueing \nInput port functions \ndecentralized switching:  \nv  given datagram dest., lookup output port \nusing forwarding table in input port \nmemory (“match plus action”) \nv  goal: complete input port processing at \n‘line speed’ \nv  queuing: if datagrams arrive faster than \nforwarding rate into switch fabric \nphysical layer: \nbit-level reception \ndata link layer: \ne.g., Ethernet \nsee chapter 5 \nswitch \nfabric"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 24,
    "text": "Network Layer 4-24 \nSwitching fabrics \nv  transfer packet from input buffer to appropriate \noutput buffer \nv  switching rate: rate at which packets can be \ntransfer from inputs to outputs \n§  often measured as multiple of input/output line rate \n§  N inputs: switching rate N times line rate desirable \nv  three types of switching fabrics \nmemory \nmemory \nbus \ncrossbar"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 25,
    "text": "Network Layer 4-25 \nSwitching via memory \nfirst generation routers: \nv traditional computers with switching under direct control \nof CPU \nv packet copied to system’s memory \nv  speed limited by memory bandwidth (2 bus crossings per \ndatagram) \ninput \nport \n(e.g., \nEthernet) \nmemory \noutput \nport \n(e.g., \nEthernet) \nsystem bus"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 26,
    "text": "Network Layer 4-26 \nSwitching via a bus \nv  datagram from input port memory \n    to output port memory via a \nshared bus \nv  bus contention:  switching speed \nlimited by bus bandwidth \nv  32 Gbps bus, Cisco 5600: sufficient \nspeed for access and enterprise \nrouters \nbus"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 27,
    "text": "Network Layer 4-27 \nSwitching via interconnection network \nv  overcome  bus bandwidth limitations \nv  banyan networks, crossbar, other \ninterconnection nets initially \ndeveloped to connect processors in \nmultiprocessor \nv  advanced design: fragmenting \ndatagram into fixed length cells, \nswitch cells through the fabric. v  Cisco 12000: switches 60 Gbps \nthrough the interconnection \nnetwork \ncrossbar"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 28,
    "text": "Network Layer 4-28 \nOutput ports \nv  buffering required when datagrams arrive \nfrom fabric faster than the transmission \nrate \nv  scheduling discipline chooses among queued \ndatagrams for transmission \nline \ntermination \nlink  \nlayer  \nprotocol \n(send) \nswitch \nfabric \ndatagram \nbuffer \n \n \nqueueing \nThis slide in HUGELY important! Datagram (packets) can be lost \ndue to congestion, lack of buffers \nPriority scheduling – who gets best \nperformance, network neutrality"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 29,
    "text": "Network Layer 4-29 \nOutput port queueing \nv  buffering when arrival rate via switch exceeds \noutput line speed \nv  queueing (delay) and loss due to output port buffer \noverflow! at t, packets more \nfrom input to output \none packet time later \nswitch \nfabric \nswitch \nfabric"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 30,
    "text": "Network Layer 4-30 \nHow much buffering? v  RFC 3439 rule of thumb: average buffering equal \nto “typical” RTT (say 250 msec) times link \ncapacity C \n§  e.g., C = 10 Gpbs link: 2.5 Gbit buffer \nv  recent recommendation: with N flows, buffering \nequal to  \nRTT  C \n. N"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 31,
    "text": "Network Layer 4-31 \nInput port queuing \nv  fabric slower than input ports combined -> queueing may \noccur at input queues  \n§  queueing delay and loss due to input buffer overflow! v  Head-of-the-Line (HOL) blocking: queued datagram at front \nof queue prevents others in queue from moving forward \noutput port contention: \nonly one red datagram can be \ntransferred. lower red packet is blocked \nswitch \nfabric \none packet time \nlater: green packet \nexperiences HOL \nblocking \nswitch \nfabric"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 32,
    "text": "Network Layer 4-32 \n4.1 introduction \n4.2 virtual circuit and \ndatagram networks \n4.3 what’s inside a router \n4.4 IP: Internet Protocol \n§  datagram format \n§  IPv4 addressing \n§  ICMP \n§  IPv6 \n4.5 routing algorithms \n§  link state \n§  distance vector \n§  hierarchical routing \n4.6 routing in the Internet \n§  RIP \n§  OSPF \n§  BGP \n4.7 broadcast and multicast \nrouting \nChapter 4: outline"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 33,
    "text": "Network Layer 4-33 \nThe Internet network layer \nforwarding \ntable \nhost, router network layer functions: \nrouting protocols \n•  path selection \n•  RIP, OSPF, BGP \nIP protocol \n•  addressing conventions \n•  datagram format \n•  packet handling conventions \nICMP protocol \n•  error reporting \n•  router “signaling” \ntransport layer: TCP, UDP \nlink layer \nphysical layer \nnetwork \nlayer"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 34,
    "text": "Network Layer 4-34 \nver \nlength \n32 bits \ndata  \n(variable length, \ntypically a TCP  \nor UDP segment) \n16-bit identifier \nheader \n checksum \ntime to \nlive \n32 bit source IP address \nhead. len \ntype of \nservice \nflgs \nfragment \n offset \nupper \n layer \n32 bit destination IP address \noptions (if any) \nIP datagram format \nIP protocol version \nnumber \nheader length \n (bytes) \nupper layer protocol \nto deliver payload to \ntotal datagram \nlength (bytes) \n“type” of data  \nfor \nfragmentation/ \nreassembly \nmax number \nremaining hops \n(decremented at  \neach router) \ne.g. timestamp, \nrecord route \ntaken, specify \nlist of routers  \nto visit. how much overhead? v  20 bytes of TCP \nv  20 bytes of IP \nv  = 40 bytes + app \nlayer overhead"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 35,
    "text": "Network Layer 4-35 \nIP fragmentation, reassembly \nv  network links have MTU \n(max.transfer size) - \nlargest possible link-level \nframe \n§  different link types, \ndifferent MTUs  \nv  large IP datagram divided \n(“fragmented”) within net \n§  one datagram becomes \nseveral datagrams \n§  “reassembled” only at \nfinal destination \n§  IP header bits used to \nidentify, order related \nfragments \nfragmentation:  \nin: one large datagram \nout: 3 smaller datagrams \nreassembly \n… \n…"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 36,
    "text": "Network Layer 4-36 \nID \n=x \noffset \n=0 \nfragflag \n=0 \nlength \n=4000 \nID \n=x \noffset \n=0 \nfragflag \n=1 \nlength \n=1500 \nID \n=x \noffset \n=185 \nfragflag \n=1 \nlength \n=1500 \nID \n=x \noffset \n=370 \nfragflag \n=0 \nlength \n=1040 \none large datagram becomes \nseveral smaller datagrams \nexample: \nv  4000 byte datagram \nv  MTU = 1500 bytes \n1480 bytes in  \ndata field \noffset = \n1480/8  \nIP fragmentation, reassembly"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 37,
    "text": "Network Layer 4-37 \n4.1 introduction \n4.2 virtual circuit and \ndatagram networks \n4.3 what’s inside a router \n4.4 IP: Internet Protocol \n§  datagram format \n§  IPv4 addressing \n§  ICMP \n§  IPv6 \n4.5 routing algorithms \n§  link state \n§  distance vector \n§  hierarchical routing \n4.6 routing in the Internet \n§  RIP \n§  OSPF \n§  BGP \n4.7 broadcast and multicast \nrouting \nChapter 4: outline"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 38,
    "text": "Network Layer 4-38 \nIP addressing: introduction \nv  IP address: 32-bit \nidentifier for host, router \ninterface  \nv  interface: connection \nbetween host/router and \nphysical link \n§  router’s typically have \nmultiple interfaces \n§  host typically has one or \ntwo interfaces (e.g., wired \nEthernet, wireless 802.11) \nv  IP addresses associated \nwith each interface \n223.1.1.1 \n223.1.1.2 \n223.1.1.3 \n223.1.1.4 \n223.1.2.9 \n223.1.2.2 \n223.1.2.1 \n223.1.3.2 \n223.1.3.1 \n223.1.3.27 \n223.1.1.1 = 11011111 00000001 00000001 00000001 \n1 \n1"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 39,
    "text": "Network Layer 4-39 \nIP addressing: introduction \nQ: how are interfaces \nactually connected? A: we’ll learn about that \nin chapter 5, 6. 223.1.1.1 \n223.1.1.2 \n223.1.1.3 \n223.1.1.4 \n223.1.2.9 \n223.1.2.2 \n223.1.2.1 \n223.1.3.2 \n223.1.3.1 \n223.1.3.27 \nA: wired Ethernet interfaces \nconnected by Ethernet switches \nA: wireless WiFi interfaces \nconnected by WiFi base station \nFor now: don’t need to worry \nabout how one interface is \nconnected to another (with no \nintervening router)"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 40,
    "text": "Network Layer 4-40 \nSubnets \nv IP address:  \n§ subnet part - high order \nbits \n§ host part - low order \nbits  \nv what’s a subnet ? § device interfaces with \nsame subnet part of IP \naddress \n§ can physically reach \neach other without \nintervening router \nnetwork consisting of 3 subnets \n223.1.1.1 \n223.1.1.3 \n223.1.1.4 \n223.1.2.9 \n223.1.3.2 \n223.1.3.1 \nsubnet \n223.1.1.2 \n223.1.3.27 \n223.1.2.2 \n223.1.2.1"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 41,
    "text": "Network Layer 4-41 \nrecipe \nv  to determine the \nsubnets, detach each \ninterface from its host \nor router, creating \nislands of isolated \nnetworks \nv  each isolated network \nis called a subnet \nsubnet mask: /24 \nSubnets \n223.1.1.0/24 \n223.1.2.0/24 \n223.1.3.0/24 \n223.1.1.1 \n223.1.1.3 \n223.1.1.4 \n223.1.2.9 \n223.1.3.2 \n223.1.3.1 \nsubnet \n223.1.1.2 \n223.1.3.27 \n223.1.2.2 \n223.1.2.1"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 42,
    "text": "Network Layer 4-42 \nhow many? 223.1.1.1 \n223.1.1.3 \n223.1.1.4 \n223.1.2.2 \n223.1.2.1 \n223.1.2.6 \n223.1.3.2 \n223.1.3.1 \n223.1.3.27 \n223.1.1.2 \n223.1.7.0 \n223.1.7.1 \n223.1.8.0 \n223.1.8.1 \n223.1.9.1 \n223.1.9.2 \nSubnets"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 43,
    "text": "Network Layer 4-43 \nIP addressing: CIDR \nCIDR: Classless InterDomain Routing \n§  subnet portion of address of arbitrary length \n§  address format: a.b.c.d/x, where x is # bits in \nsubnet portion of address \n11001000  00010111  00010000  00000000 \nsubnet \npart \nhost \npart \n200.23.16.0/23"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 44,
    "text": "Network Layer 4-44 \nIP addresses: how to get one? Q: How does a host get IP address? v  hard-coded by system admin in a file \n§  Windows: control-panel->network->configuration->tcp/\nip->properties \n§  UNIX: /etc/rc.config \nv  DHCP: Dynamic Host Configuration Protocol: \ndynamically get address from as server \n§  “plug-and-play”"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 45,
    "text": "Network Layer 4-45 \nDHCP: Dynamic Host Configuration Protocol \ngoal: allow host to dynamically obtain its IP address from network \nserver when it joins network \n§  can renew its lease on address in use \n§  allows reuse of addresses (only hold address while \nconnected/“on”) \n§  support for mobile users who want to join network (more \nshortly) \nDHCP overview: \n§  host broadcasts “DHCP discover” msg [optional] \n§  DHCP server responds with “DHCP offer” msg [optional] \n§  host requests IP address: “DHCP request” msg \n§  DHCP server sends address: “DHCP ack” msg"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 46,
    "text": "Network Layer 4-46 \nDHCP client-server scenario \n223.1.1.0/24 \n223.1.2.0/24 \n223.1.3.0/24 \n223.1.1.1 \n223.1.1.3 \n223.1.1.4 \n223.1.2.9 \n223.1.3.2 \n223.1.3.1 \n223.1.1.2 \n223.1.3.27 \n223.1.2.2 \n223.1.2.1 \nDHCP \nserver \narriving DHCP \nclient needs  \naddress in this \nnetwork"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 47,
    "text": "Network Layer 4-47 \nDHCP server: 223.1.2.5 \narriving \n client \nDHCP discover \nsrc : 0.0.0.0, 68     \ndest. : 255.255.255.255,67 \nyiaddr:    0.0.0.0 \ntransaction ID: 654 \nDHCP offer \nsrc: 223.1.2.5, 67      \ndest:  255.255.255.255, 68 \nyiaddrr: 223.1.2.4 \ntransaction ID: 654 \nlifetime: 3600 secs \nDHCP request \nsrc:  0.0.0.0, 68     \ndest::  255.255.255.255, 67 \nyiaddrr: 223.1.2.4 \ntransaction ID: 655 \nlifetime: 3600 secs \nDHCP ACK \nsrc: 223.1.2.5, 67      \ndest:  255.255.255.255, 68 \nyiaddrr: 223.1.2.4 \ntransaction ID: 655 \nlifetime: 3600 secs \nDHCP client-server scenario \nBroadcast: is there a \nDHCP server out there? Broadcast: I’m a DHCP \nserver! Here’s an IP \naddress you can use \nBroadcast: OK.  I’ll take \nthat IP address! Broadcast: OK.  You’ve \ngot that IP address!"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 48,
    "text": "Network Layer 4-48 \nDHCP: more than IP addresses \nDHCP can return more than just allocated IP \naddress on subnet: \n§  address of first-hop router for client \n§  name and IP address of DNS sever \n§  network mask (indicating network versus host portion \nof address)"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 49,
    "text": "Network Layer 4-49 \nv  connecting laptop needs \nits IP address, addr of \nfirst-hop router, addr of \nDNS server: use DHCP \nrouter with DHCP  \nserver built into  \nrouter \nv  DHCP request encapsulated \nin UDP, encapsulated in IP, \nencapsulated in 802.1 \nEthernet \n v  Ethernet frame broadcast \n(dest: FFFFFFFFFFFF) on LAN, \nreceived at router running \nDHCP server \nv  Ethernet demuxed to IP \ndemuxed, UDP demuxed to \nDHCP  \n168.1.1.1 \n \nDHCP \nUDP \nIP \nEth \nPhy \nDHCP \nDHCP \nDHCP \nDHCP \nDHCP \nDHCP \nUDP \nIP \nEth \nPhy \nDHCP \nDHCP \nDHCP \nDHCP \nDHCP \nDHCP: example"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 50,
    "text": "Network Layer 4-50 \nv  DCP server formulates \nDHCP ACK containing \nclient’s IP address, IP \naddress of first-hop \nrouter for client, name & \nIP address of DNS server \nv  encapsulation of DHCP \nserver, frame forwarded \nto client, demuxing up to \nDHCP at client \nDHCP: example \nrouter with DHCP  \nserver built into  \nrouter \nDHCP \nDHCP \nDHCP \nDHCP \nDHCP \nUDP \nIP \nEth \nPhy \nDHCP \nDHCP \nUDP \nIP \nEth \nPhy \nDHCP \nDHCP \nDHCP \nDHCP \nv  client now knows its IP \naddress, name and IP \naddress of DSN server, IP \naddress of its first-hop \nrouter"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 51,
    "text": "Network Layer 4-51 \nDHCP: Wireshark \noutput (home LAN) \nMessage type: Boot Reply (2) \nHardware type: Ethernet \nHardware address length: 6 \nHops: 0 \nTransaction ID: 0x6b3a11b7 \nSeconds elapsed: 0 \nBootp flags: 0x0000 (Unicast) \nClient IP address: 192.168.1.101 (192.168.1.101) \nYour (client) IP address: 0.0.0.0 (0.0.0.0) \nNext server IP address: 192.168.1.1 (192.168.1.1) \nRelay agent IP address: 0.0.0.0 (0.0.0.0) \nClient MAC address: Wistron_23:68:8a (00:16:d3:23:68:8a) \nServer host name not given \nBoot file name not given \nMagic cookie: (OK) \nOption: (t=53,l=1) DHCP Message Type = DHCP ACK \nOption: (t=54,l=4) Server Identifier = 192.168.1.1 \nOption: (t=1,l=4) Subnet Mask = 255.255.255.0 \nOption: (t=3,l=4) Router = 192.168.1.1 \nOption: (6) Domain Name Server \n     Length: 12; Value: 445747E2445749F244574092;  \n      IP Address: 68.87.71.226; \n      IP Address: 68.87.73.242;  \n      IP Address: 68.87.64.146 \nOption: (t=15,l=20) Domain Name = \"hsd1.ma.comcast.net.\" reply \nMessage type: Boot Request (1) \nHardware type: Ethernet \nHardware address length: 6 \nHops: 0 \nTransaction ID: 0x6b3a11b7 \nSeconds elapsed: 0 \nBootp flags: 0x0000 (Unicast) \nClient IP address: 0.0.0.0 (0.0.0.0) \nYour (client) IP address: 0.0.0.0 (0.0.0.0) \nNext server IP address: 0.0.0.0 (0.0.0.0) \nRelay agent IP address: 0.0.0.0 (0.0.0.0) \nClient MAC address: Wistron_23:68:8a (00:16:d3:23:68:8a) \nServer host name not given \nBoot file name not given \nMagic cookie: (OK) \nOption: (t=53,l=1) DHCP Message Type = DHCP Request \nOption: (61) Client identifier \n     Length: 7; Value: 010016D323688A;  \n     Hardware type: Ethernet \n     Client MAC address: Wistron_23:68:8a (00:16:d3:23:68:8a) \nOption: (t=50,l=4) Requested IP Address = 192.168.1.101 \nOption: (t=12,l=5) Host Name = \"nomad\" \nOption: (55) Parameter Request List \n     Length: 11; Value: 010F03062C2E2F1F21F92B \n     1 = Subnet Mask; 15 = Domain Name \n     3 = Router; 6 = Domain Name Server \n     44 = NetBIOS over TCP/IP Name Server \n     …… \nrequest"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 51,
    "text": "Network Layer 4-51 \nDHCP: Wireshark \noutput (home LAN) \nMessage type: Boot Reply (2) \nHardware type: Ethernet \nHardware address length: 6 \nHops: 0 \nTransaction ID: 0x6b3a11b7 \nSeconds elapsed: 0 \nBootp flags: 0x0000 (Unicast) \nClient IP address: 192.168.1.101 (192.168.1.101) \nYour (client) IP address: 0.0.0.0 (0.0.0.0) \nNext server IP address: 192.168.1.1 (192.168.1.1) \nRelay agent IP address: 0.0.0.0 (0.0.0.0) \nClient MAC address: Wistron_23:68:8a (00:16:d3:23:68:8a) \nServer host name not given \nBoot file name not given \nMagic cookie: (OK) \nOption: (t=53,l=1) DHCP Message Type = DHCP ACK \nOption: (t=54,l=4) Server Identifier = 192.168.1.1 \nOption: (t=1,l=4) Subnet Mask = 255.255.255.0 \nOption: (t=3,l=4) Router = 192.168.1.1 \nOption: (6) Domain Name Server \n     Length: 12; Value: 445747E2445749F244574092;  \n      IP Address: 68.87.71.226; \n      IP Address: 68.87.73.242;  \n      IP Address: 68.87.64.146 \nOption: (t=15,l=20) Domain Name = \"hsd1.ma.comcast.net.\" reply \nMessage type: Boot Request (1) \nHardware type: Ethernet \nHardware address length: 6 \nHops: 0 \nTransaction ID: 0x6b3a11b7 \nSeconds elapsed: 0 \nBootp flags: 0x0000 (Unicast) \nClient IP address: 0.0.0.0 (0.0.0.0) \nYour (client) IP address: 0.0.0.0 (0.0.0.0) \nNext server IP address: 0.0.0.0 (0.0.0.0) \nRelay agent IP address: 0.0.0.0 (0.0.0.0) \nClient MAC address: Wistron_23:68:8a (00:16:d3:23:68:8a) \nServer host name not given \nBoot file name not given \nMagic cookie: (OK) \nOption: (t=53,l=1) DHCP Message Type = DHCP Request \nOption: (61) Client identifier \n     Length: 7; Value: 010016D323688A;  \n     Hardware type: Ethernet \n     Client MAC address: Wistron_23:68:8a (00:16:d3:23:68:8a) \nOption: (t=50,l=4) Requested IP Address = 192.168.1.101 \nOption: (t=12,l=5) Host Name = \"nomad\" \nOption: (55) Parameter Request List \n     Length: 11; Value: 010F03062C2E2F1F21F92B \n     1 = Subnet Mask; 15 = Domain Name \n     3 = Router; 6 = Domain Name Server \n     44 = NetBIOS over TCP/IP Name Server \n     …… \nrequest"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 52,
    "text": "Network Layer 4-52 \nIP addresses: how to get one? Q: how does network get subnet part of IP addr? A: gets allocated portion of its provider ISP’s address \nspace \nISP's block          11001000  00010111  00010000  00000000    200.23.16.0/20  \n \nOrganization 0    11001000  00010111  00010000  00000000    200.23.16.0/23  \nOrganization 1    11001000  00010111  00010010  00000000    200.23.18.0/23  \nOrganization 2    11001000  00010111  00010100  00000000    200.23.20.0/23  \n   ...                                          …..                                   …. …. Organization 7    11001000  00010111  00011110  00000000    200.23.30.0/23"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 53,
    "text": "Network Layer 4-53 \nHierarchical addressing: route aggregation \n“Send me anything \nwith addresses  \nbeginning  \n200.23.16.0/20” \n200.23.16.0/23 \n200.23.18.0/23 \n200.23.30.0/23 \nFly-By-Night-ISP \nOrganization 0 \nOrganization 7 \nInternet \nOrganization 1 \nISPs-R-Us \n“Send me anything \nwith addresses  \nbeginning  \n199.31.0.0/16” \n200.23.20.0/23 \nOrganization 2 \n. . . . . . hierarchical addressing allows efficient advertisement of routing  \ninformation:"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 54,
    "text": "Network Layer 4-54 \nISPs-R-Us has a more specific route to Organization 1 \n“Send me anything \nwith addresses  \nbeginning  \n200.23.16.0/20” \n200.23.16.0/23 \n200.23.18.0/23 \n200.23.30.0/23 \nFly-By-Night-ISP \nOrganization 0 \nOrganization 7 \nInternet \nOrganization 1 \nISPs-R-Us \n“Send me anything \nwith addresses  \nbeginning 199.31.0.0/16 \nor 200.23.18.0/23” \n200.23.20.0/23 \nOrganization 2 \n. . . . . . Hierarchical addressing: more specific routes"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 55,
    "text": "Network Layer 4-55 \nIP addressing: the last word... \nQ: how does an ISP get block of addresses? A: ICANN: Internet Corporation for Assigned  \n     Names and Numbers http://www.icann.org/ \n§  allocates addresses \n§  manages DNS \n§  assigns domain names, resolves disputes"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 56,
    "text": "Network Layer 4-56 \nNAT: network address translation \n10.0.0.1 \n10.0.0.2 \n10.0.0.3 \n10.0.0.4 \n138.76.29.7 \nlocal network \n(e.g., home network) \n10.0.0/24 \nrest of \nInternet \ndatagrams with source or  \ndestination in this network \nhave 10.0.0/24 address for  \nsource, destination (as usual) \nall datagrams leaving local \nnetwork have same single \nsource NAT IP address: \n138.76.29.7,different source \nport numbers"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 57,
    "text": "Network Layer 4-57 \nmotivation: local network uses just one IP address as far \nas outside world is concerned: \n§  range of addresses not needed from ISP:  just one \nIP address for all devices \n§  can change addresses of devices in local network \nwithout notifying outside world \n§  can change ISP without changing addresses of \ndevices in local network \n§  devices inside local net not explicitly addressable, \nvisible by outside world (a security plus) \n \nNAT: network address translation"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 58,
    "text": "Network Layer 4-58 \n   implementation: NAT router must: \n \n§  outgoing datagrams: replace (source IP address, port #) of \nevery outgoing datagram to (NAT IP address, new port #) \n. . . remote clients/servers will respond using (NAT IP \naddress, new port #) as destination addr \n \n§  remember (in NAT translation table) every (source IP address, \nport #)  to (NAT IP address, new port #) translation pair \n \n§  incoming datagrams: replace (NAT IP address, new port #) in \ndest fields of every incoming datagram with corresponding \n(source IP address, port #) stored in NAT table \nNAT: network address translation"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 59,
    "text": "Network Layer 4-59 \n10.0.0.1 \n10.0.0.2 \n10.0.0.3 \nS: 10.0.0.1, 3345 \nD: 128.119.40.186, 80 \n10.0.0.4 \n138.76.29.7 \n1: host 10.0.0.1  \nsends datagram to  \n128.119.40.186, 80 \nNAT translation table \nWAN side addr        LAN side addr \n138.76.29.7, 5001   10.0.0.1, 3345 \n……                                         …… \nS: 128.119.40.186, 80  \nD: 10.0.0.1, 3345 \nS: 138.76.29.7, 5001 \nD: 128.119.40.186, 80 \n2: NAT router \nchanges datagram \nsource addr from \n10.0.0.1, 3345 to \n138.76.29.7, 5001, \nupdates table \nS: 128.119.40.186, 80  \nD: 138.76.29.7, 5001 \n3: reply arrives \n dest. address: \n 138.76.29.7, 5001 \n4: NAT router \nchanges datagram \ndest addr from \n138.76.29.7, 5001 to 10.0.0.1, 3345  \n \nNAT: network address translation"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 60,
    "text": "Network Layer 4-60 \nv  16-bit port-number field:  \n§  60,000 simultaneous connections with a single \nLAN-side address! v  NAT is controversial: \n§  routers should only process up to layer 3 \n§  violates end-to-end argument \n•  NAT possibility must be taken into account by app \ndesigners, e.g., P2P applications \n§  address shortage should instead be solved by \nIPv6 \nNAT: network address translation"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 61,
    "text": "Network Layer 4-61 \nNAT traversal problem \nv  client wants to connect to \nserver with address 10.0.0.1 \n§  server address 10.0.0.1 local to \nLAN (client can’t use it as \ndestination addr) \n§  only one externally visible NATed \naddress: 138.76.29.7 \nv  solution1: statically configure \nNAT to forward incoming \nconnection requests at given \nport to server \n§  e.g., (123.76.29.7, port 2500) \nalways forwarded to 10.0.0.1 port \n10.0.0.1 \n10.0.0.4 \nNAT  \nrouter \n138.76.29.7 \nclient \n?"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 62,
    "text": "Network Layer 4-62 \nNAT traversal problem \nv  solution 2: Universal Plug and Play \n(UPnP) Internet Gateway Device \n(IGD) Protocol. Allows NATed \nhost to: \nv  learn public IP address \n(138.76.29.7) \nv  add/remove port mappings \n(with lease times) \ni.e., automate static NAT port \nmap configuration \n10.0.0.1 \nNAT  \nrouter \nIGD"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 63,
    "text": "Network Layer 4-63 \nNAT traversal problem \nv  solution 3: relaying (used in Skype) \n§  NATed client establishes connection to relay \n§  external client connects to relay \n§  relay bridges packets between to connections \n \n138.76.29.7 \nclient \n1. connection to \nrelay initiated \nby NATed host \n2. connection to \nrelay initiated \nby client \n3. relaying  \nestablished \nNAT  \nrouter \n10.0.0.1"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 64,
    "text": "Network Layer 4-64 \n4.1 introduction \n4.2 virtual circuit and \ndatagram networks \n4.3 what’s inside a router \n4.4 IP: Internet Protocol \n§  datagram format \n§  IPv4 addressing \n§  ICMP \n§  IPv6 \n4.5 routing algorithms \n§  link state \n§  distance vector \n§  hierarchical routing \n4.6 routing in the Internet \n§  RIP \n§  OSPF \n§  BGP \n4.7 broadcast and multicast \nrouting \nChapter 4: outline"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 65,
    "text": "Network Layer 4-65 \nICMP: internet control message protocol \nv  used by hosts & routers \nto communicate network-\nlevel information \n§  error reporting: \nunreachable host, network, \nport, protocol \n§  echo request/reply (used by \nping) \nv  network-layer “above” IP: \n§  ICMP msgs carried in IP \ndatagrams \nv  ICMP message: type, code \nplus first 8 bytes of IP \ndatagram causing error \nType  Code  description \n0        0         echo reply (ping) \n3        0         dest. network unreachable \n3        1         dest host unreachable \n3        2         dest protocol unreachable \n3        3         dest port unreachable \n3        6         dest network unknown \n3        7         dest host unknown \n4        0         source quench (congestion \n                     control - not used) \n8        0         echo request (ping) \n9        0         route advertisement \n10      0         router discovery \n11      0         TTL expired \n12      0         bad IP header"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 66,
    "text": "Network Layer 4-66 \nTraceroute and ICMP \nv  source sends series of \nUDP segments to dest \n§  first set has TTL =1 \n§  second set has TTL=2, etc. §  unlikely port number \nv  when nth set of datagrams \narrives to nth router: \n§  router discards datagrams \n§  and sends source ICMP \nmessages (type 11, code 0) \n§  ICMP messages includes \nname of router & IP address \nv  when ICMP messages \narrives, source records \nRTTs \nstopping criteria: \nv  UDP segment eventually \narrives at destination host \nv  destination returns ICMP \n“port unreachable” \nmessage (type 3, code 3) \nv  source stops \n3 probes \n3 probes \n3 probes"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 67,
    "text": "Network Layer 4-67 \nIPv6: motivation \nv  initial motivation: 32-bit address space soon to be \ncompletely allocated. v  additional motivation: \n§  header format helps speed processing/forwarding \n§  header changes to facilitate QoS  \nIPv6 datagram format:  \n§  fixed-length 40 byte header \n§  no fragmentation allowed"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 68,
    "text": "Network Layer 4-68 \nIPv6 datagram format \npriority:  identify priority among datagrams in flow \nflow Label: identify datagrams in same “flow.”  \n                    (concept of“flow” not well defined). next header: identify upper layer protocol for data  \ndata \ndestination address \n(128 bits) \nsource address \n(128 bits) \npayload len \nnext hdr \nhop limit \nflow label \npri \nver \n32 bits"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 69,
    "text": "Network Layer 4-69 \nOther changes from IPv4 \nv  checksum: removed entirely to reduce processing \ntime at each hop \nv  options: allowed, but outside of header, indicated \nby “Next Header” field \nv  ICMPv6: new version of ICMP \n§  additional message types, e.g. “Packet Too Big” \n§  multicast group management functions"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 70,
    "text": "Network Layer 4-70 \nTransition from IPv4 to IPv6 \nv  not all routers can be upgraded simultaneously \n§  no “flag days” \n§  how will network operate with mixed IPv4 and \nIPv6 routers? v  tunneling: IPv6 datagram carried as payload in IPv4 \ndatagram among IPv4 routers \nIPv4 source, dest addr  \nIPv4 header fields  \nIPv4 datagram \nIPv6 datagram \nIPv4 payload  \nUDP/TCP payload \nIPv6 source dest addr \nIPv6 header fields"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 71,
    "text": "Network Layer 4-71 \nTunneling \nphysical view: \nIPv4 \nIPv4 \nA \nB \nIPv6 \nIPv6 \nE \nIPv6 \nIPv6 \nF \nC \nD \nlogical view: \nIPv4 tunnel  \nconnecting IPv6 routers \nE \nIPv6 \nIPv6 \nF \nA \nB \nIPv6 \nIPv6"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 72,
    "text": "Network Layer 4-72 \nflow: X \nsrc: A \ndest: F \n \n \ndata \nA-to-B: \nIPv6 \nFlow: X \nSrc: A \nDest: F \n \n \ndata \nsrc:B \ndest: E \nB-to-C: \nIPv6 inside \nIPv4 \nE-to-F: \nIPv6 \nflow: X \nsrc: A \ndest: F \n \n \ndata \nB-to-C: \nIPv6 inside \nIPv4 \nFlow: X \nSrc: A \nDest: F \n \n \ndata \nsrc:B \ndest: E \nphysical view: \nA \nB \nIPv6 \nIPv6 \nE \nIPv6 \nIPv6 \nF \nC \nD \nlogical view: \nIPv4 tunnel  \nconnecting IPv6 routers \nE \nIPv6 \nIPv6 \nF \nA \nB \nIPv6 \nIPv6 \nTunneling \nIPv4 \nIPv4"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 73,
    "text": "Network Layer 4-73 \nIPv6: adoption \nv  US National Institutes of Standards estimate [2013]: \n§  ~3% of industry IP routers \n§  ~11% of US gov’t routers \n \nv  Long (long!) time for deployment, use \n§  20 years and counting! §  think of application-level changes in last 20 years: WWW, \nFacebook, … \n§  Why?"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 74,
    "text": "Network Layer 4-74 \n4.1 introduction \n4.2 virtual circuit and \ndatagram networks \n4.3 what’s inside a router \n4.4 IP: Internet Protocol \n§  datagram format \n§  IPv4 addressing \n§  ICMP \n§  IPv6 \n4.5 routing algorithms \n§  link state \n§  distance vector \n§  hierarchical routing \n4.6 routing in the Internet \n§  RIP \n§  OSPF \n§  BGP \n4.7 broadcast and multicast \nrouting \nChapter 4: outline"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 75,
    "text": "Network Layer 4-75 \n2 \nIP destination address in  \narriving packet’s header \nrouting algorithm \nlocal forwarding table \ndest address output  link \naddress-range 1 \naddress-range 2 \naddress-range 3 \naddress-range 4 \n2 \n1 \nInterplay between routing, forwarding \nrouting algorithm determines \nend-end-path through network \nforwarding table determines \nlocal forwarding at this router"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 76,
    "text": "Network Layer 4-76 \nu \ny \nx \nw \nv \nz \n2 \n3 \n1 \n5 \n5 \ngraph: G = (N,E) \n \nN = set of routers = { u, v, w, x, y, z } \n \nE = set of links ={ (u,v), (u,x), (v,x), (v,w), (x,w), (x,y), (w,y), (w,z), (y,z) } \nGraph abstraction \naside: graph abstraction is useful in other network contexts, e.g.,  \nP2P, where N is set of peers and E is set of TCP connections"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 77,
    "text": "Network Layer 4-77 \nGraph abstraction: costs \nu \ny \nx \nw \nv \nz \n2 \n3 \n1 \n5 \n5 \nc(x,x’) = cost of link (x,x’) \n      e.g., c(w,z) = 5 \n \ncost could always be 1, or  \ninversely related to bandwidth, \nor inversely related to  \ncongestion \ncost of path (x1, x2, x3,…, xp) = c(x1,x2) + c(x2,x3) + … + c(xp-1,xp)   \nkey question: what is the least-cost path between u and z ? routing algorithm: algorithm that finds that least cost path"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 78,
    "text": "Network Layer 4-78 \nRouting algorithm classification \nQ: global or decentralized \ninformation? global: \nv  all routers have complete \ntopology, link cost info \nv  “link state” algorithms \ndecentralized:  \nv  router knows physically-\nconnected neighbors, link \ncosts to neighbors \nv  iterative process of \ncomputation, exchange of \ninfo with neighbors \nv  “distance vector” algorithms \nQ: static or dynamic? static:  \nv  routes change slowly over \ntime \ndynamic:  \nv  routes change more \nquickly \n§  periodic update \n§  in response to link \ncost changes"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 79,
    "text": "Network Layer 4-79 \n4.1 introduction \n4.2 virtual circuit and \ndatagram networks \n4.3 what’s inside a router \n4.4 IP: Internet Protocol \n§  datagram format \n§  IPv4 addressing \n§  ICMP \n§  IPv6 \n4.5 routing algorithms \n§  link state \n§  distance vector \n§  hierarchical routing \n4.6 routing in the Internet \n§  RIP \n§  OSPF \n§  BGP \n4.7 broadcast and multicast \nrouting \nChapter 4: outline"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 80,
    "text": "Network Layer 4-80 \nA Link-State Routing Algorithm \nDijkstra’s algorithm \nv  net topology, link costs \nknown to all nodes \n§  accomplished via “link state \nbroadcast”  \n§  all nodes have same info \nv  computes least cost paths \nfrom one node (‘source”) \nto all other nodes \n§  gives forwarding table for \nthat node \nv  iterative: after k \niterations, know least cost \npath to k dest.’s \nnotation: \nv  c(x,y): link cost from \nnode x to y;  = ∞ if not \ndirect neighbors \nv  D(v): current value of \ncost of path from source \nto dest. v \nv  p(v): predecessor node \nalong path from source to \nv \nv  N': set of nodes whose \nleast cost path definitively \nknown"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 81,
    "text": "Network Layer 4-81 \nDijsktra’s Algorithm \n1  Initialization:  \n2    N' = {u}  \n3    for all nodes v  \n4      if v adjacent to u  \n5          then D(v) = c(u,v)  \n6      else D(v) = ∞  \n8   Loop  \n9     find w not in N' such that D(w) is a minimum  \n10    add w to N'  \n11    update D(v) for all v adjacent to w and not in N' :  \n12       D(v) = min( D(v), D(w) + c(w,v) )  \n13    /* new cost to v is either old cost to v or known  \n14     shortest path cost to w plus cost from w to v */  \n15  until all nodes in N'"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 82,
    "text": "Network Layer 4-82 \nw \n4 \nv \nx \nu \n3 \n4 \ny \nz \n7 \nDijkstra’s algorithm: example \nStep \n \nN' \nD(v) \np(v) \n1 \n3 \n5 \nD(w) \np(w) \nD(x) \np(x) \nD(y) \np(y) \nD(z) \np(z) \nu \n∞  \n∞  \n7,u \n3,u \n5,u \nuw \n∞  \n11,w  \n6,w \n5,u \n14,x  \n11,w  \n6,w \nuwx \nuwxv \n14,x  \n10,v  \nuwxvy \n12,y  \nnotes: \nv  construct shortest path tree by \ntracing predecessor nodes \nv  ties can exist (can be broken \narbitrarily) \nuwxvyz"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 83,
    "text": "Network Layer 4-83 \nDijkstra’s algorithm: another example \nStep \n1 \n3 \n5 \nN' \nu \nux \nuxy \nuxyv \nuxyvw \nuxyvwz \nD(v),p(v) \n2,u \n2,u \n2,u \nD(w),p(w) \n5,u \n4,x \n3,y \n3,y \nD(x),p(x) \n1,u \nD(y),p(y) \n∞ \n2,x \nD(z),p(z) \n∞  \n∞  \n4,y \n4,y \n4,y \nu \ny \nx \nw \nv \nz \n2 \n3 \n1 \n5 \n5"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 84,
    "text": "Network Layer 4-84 \nDijkstra’s algorithm: example (2)  \nu \ny \nx \nw \nv \nz \nresulting shortest-path tree from u: \nv \nx \ny \nw \nz \n(u,v) \n(u,x) \n(u,x) \n(u,x) \n(u,x) \ndestination \nlink \nresulting forwarding table in u:"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 85,
    "text": "Network Layer 4-85 \nDijkstra’s algorithm, discussion \nalgorithm complexity: n nodes \nv  each iteration: need to check all nodes, w, not in N \nv  n(n+1)/2 comparisons: O(n2) \nv  more efficient implementations possible: O(nlogn) \noscillations possible: \nv  e.g., support link cost equals amount of carried traffic: \nA \nD \nC \nB \n1+e \ne \ne \n1 \n0 \ninitially \nA \nD \nC \nB \ngiven these costs, \nfind new routing…. resulting in new costs \n2+e \n0 \n1+e 1 \nA \nD \nC \nB \ngiven these costs, \nfind new routing…. resulting in new costs \n2+e \n1+e \n0 0 \nA \nD \nC \nB \ngiven these costs, \nfind new routing…. resulting in new costs \n2+e \n0 \n1+e 1"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 86,
    "text": "Network Layer 4-86 \n4.1 introduction \n4.2 virtual circuit and \ndatagram networks \n4.3 what’s inside a router \n4.4 IP: Internet Protocol \n§  datagram format \n§  IPv4 addressing \n§  ICMP \n§  IPv6 \n4.5 routing algorithms \n§  link state \n§  distance vector \n§  hierarchical routing \n4.6 routing in the Internet \n§  RIP \n§  OSPF \n§  BGP \n4.7 broadcast and multicast \nrouting \nChapter 4: outline"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 87,
    "text": "Network Layer 4-87 \nDistance vector algorithm  \nBellman-Ford equation (dynamic programming) \n \nlet \n   dx(y) := cost of least-cost path from x to y \nthen \n   dx(y) = min {c(x,v) + dv(y) } \n    \n \nv \ncost to neighbor v \nmin taken over all neighbors v of x \ncost from neighbor v to destination y"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 88,
    "text": "Network Layer 4-88 \nBellman-Ford example  \nu \ny \nx \nw \nv \nz \n2 \n3 \n1 \n5 \n5 \nclearly, dv(z) = 5, dx(z) = 3, dw(z) = 3 \ndu(z) = min { c(u,v) + dv(z), \n                    c(u,x) + dx(z), \n                    c(u,w) + dw(z) } \n         = min {2 + 5, \n                    1 + 3, \n                    5 + 3}  = 4 \nnode achieving minimum is next \nhop in shortest path, used in forwarding table \nB-F equation says:"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 89,
    "text": "Network Layer 4-89 \nDistance vector algorithm  \nv  Dx(y) = estimate of least cost from x to y \n§  x maintains  distance vector Dx = [Dx(y): y є N ] \nv  node x: \n§  knows cost to each neighbor v: c(x,v) \n§  maintains its neighbors’ distance vectors. For \neach neighbor v, x maintains  \nDv = [Dv(y): y є N ]"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 90,
    "text": "Network Layer 4-90 \nkey idea:  \nv  from time-to-time, each node sends its own \ndistance vector estimate to neighbors \nv  when x receives new DV estimate from neighbor, \nit updates its own DV using B-F equation: \nDx(y) ← minv{c(x,v) + Dv(y)}  for each node y ∊ N \nv  under minor, natural conditions, the estimate Dx(y) \nconverge to the actual least cost dx(y)  \nDistance vector algorithm"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 91,
    "text": "Network Layer 4-91 \niterative, asynchronous: \neach local iteration \ncaused by:  \nv  local link cost change  \nv  DV update message from \nneighbor \ndistributed: \nv  each node notifies \nneighbors only when its \nDV changes \n§  neighbors then notify their \nneighbors if necessary \n \nwait for (change in local link \ncost or msg from neighbor) \n \nrecompute estimates \n \nif DV to any dest has \nchanged, notify neighbors  \n \neach node: \nDistance vector algorithm"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 92,
    "text": "Network Layer 4-92 \nx   y   z \nx \ny \nz \n0  2   7 \n∞ ∞ ∞ \n∞ ∞ ∞ \nfrom \ncost to \nfrom \nfrom \nx   y   z \nx \ny \nz \nx   y   z \nx \ny \nz \n∞ ∞ \n∞ ∞ ∞ \ncost to \nx   y   z \nx \ny \nz \n∞ ∞ ∞ \n7 1 \ncost to \n∞ \n2   0   1 \n∞ ∞  ∞ \n2   0   1 \n7   1   0 \ntime \nx \nz \n2 \ny \nnode x \ntable \nDx(y) = min{c(x,y) + Dy(y), c(x,z) + Dz(y)}  \n             = min{2+0 , 7+1} = 2 \nDx(z) = min{c(x,y) +  \n      Dy(z), c(x,z) + Dz(z)}  \n= min{2+1 , 7+0} = 3 \n2 \nnode y \ntable \nnode z \ntable \ncost to \nfrom"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 93,
    "text": "Network Layer 4-93 \nx   y   z \nx \ny \nz \n0  2   3 \nfrom \ncost to \nx   y   z \nx \ny \nz \n0  2   7 \nfrom \ncost to \nx   y   z \nx \ny \nz \n0  2   3 \nfrom \ncost to \nx   y   z \nx \ny \nz \n0  2   3 \nfrom \ncost to \nx   y   z \nx \ny \nz \n0  2   7 \nfrom \ncost to \n2  0   1 \n7   1   0 \n2  0   1 \n3  1   0 \n2   0   1 \n3  1   0 \n2  0   1 \n3  1   0 \n2  0   1 \n3  1   0 \ntime \nx   y   z \nx \ny \nz \n0  2   7 \n∞ ∞ ∞ \n∞ ∞ ∞ \nfrom \ncost to \nfrom \nfrom \nx   y   z \nx \ny \nz \nx   y   z \nx \ny \nz \n∞ ∞ \n∞ ∞ ∞ \ncost to \nx   y   z \nx \ny \nz \n∞ ∞ ∞ \n7 1 \ncost to \n∞ \n2   0   1 \n∞ ∞  ∞ \n2   0   1 \n7   1   0 \ntime \nx \nz \n2 \ny \nnode x \ntable \nDx(y) = min{c(x,y) + Dy(y), c(x,z) + Dz(y)}  \n             = min{2+0 , 7+1} = 2 \nDx(z) = min{c(x,y) +  \n      Dy(z), c(x,z) + Dz(z)}  \n= min{2+1 , 7+0} = 3 \n2 \nnode y \ntable \nnode z \ntable \ncost to \nfrom"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 94,
    "text": "Network Layer 4-94 \nDistance vector: link cost changes \nlink cost changes: \nv  node detects local link cost change \nv  updates routing info, recalculates  \ndistance vector \nv  if DV changes, notify neighbors  \n“good \nnews  \ntravels \nfast” \nx \nz \n4 \ny \nt0 : y detects link-cost change, updates its DV, informs its \nneighbors. t1 : z receives update from y, updates its table, computes new \nleast cost to x , sends its neighbors its DV. t2 : y receives z’s update, updates its distance table. y’s least costs \ndo not change, so y  does not send a message to z."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 95,
    "text": "Network Layer 4-95 \nDistance vector: link cost changes \nlink cost changes: \nv  node detects local link cost change \nv  bad news travels slow - “count to \ninfinity” problem! v  44 iterations before algorithm \nstabilizes: see text \nx \nz \n4 \ny \npoisoned reverse:  \nv  If Z routes through Y to get to X : \n§  Z tells Y its (Z’s) distance to X is infinite (so Y won’t route \nto X via Z) \nv  will this completely solve count to infinity problem?"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 96,
    "text": "Network Layer 4-96 \nComparison of LS and DV algorithms \nmessage complexity \nv  LS: with n nodes, E links, O(nE) \nmsgs sent   \nv  DV: exchange between neighbors \nonly \n§  convergence time varies \nspeed of convergence \nv  LS: O(n2) algorithm requires \nO(nE) msgs \n§  may have oscillations \nv  DV: convergence time varies \n§  may be routing loops \n§  count-to-infinity problem \nrobustness: what happens if \nrouter malfunctions? LS:  \n§  node can advertise incorrect \nlink cost \n§  each node computes only its \nown table \nDV: \n§  DV node can advertise \nincorrect path cost \n§  each node’s table used by \nothers  \n•  error propagate thru \nnetwork"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 97,
    "text": "Network Layer 4-97 \n4.1 introduction \n4.2 virtual circuit and \ndatagram networks \n4.3 what’s inside a router \n4.4 IP: Internet Protocol \n§  datagram format \n§  IPv4 addressing \n§  ICMP \n§  IPv6 \n4.5 routing algorithms \n§  link state \n§  distance vector \n§  hierarchical routing \n4.6 routing in the Internet \n§  RIP \n§  OSPF \n§  BGP \n4.7 broadcast and multicast \nrouting \nChapter 4: outline"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 98,
    "text": "Network Layer 4-98 \nHierarchical routing \nscale: with 600 million \ndestinations: \nv  can’t store all dest’s in \nrouting tables! v  routing table exchange \nwould swamp links! administrative autonomy \nv  internet = network of \nnetworks \nv  each network admin may \nwant to control routing in \nits own network \nour routing study thus far - idealization  \nv  all routers identical \nv  network “flat” \n… not true in practice"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 99,
    "text": "Network Layer 4-99 \nv  aggregate routers into \nregions, “autonomous \nsystems” (AS) \nv  routers in same AS \nrun same routing \nprotocol \n§  “intra-AS” routing \nprotocol \n§  routers in different AS \ncan run different intra-\nAS routing protocol \ngateway router: \nv  at “edge” of its own AS \nv  has  link to router in \nanother AS \nHierarchical routing"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 100,
    "text": "Network Layer 4-100 \n3b \n1d \n3a \n1c \n2a \nAS3 \nAS1 \nAS2 \n1a \n2c \n2b \n1b \nIntra-AS \nRouting  \nalgorithm \nInter-AS \nRouting  \nalgorithm \nForwarding \ntable \n3c \nInterconnected ASes \nv  forwarding table  \nconfigured by both intra- \nand inter-AS routing \nalgorithm \n§  intra-AS sets entries \nfor internal dests \n§  inter-AS & intra-AS \nsets entries for \nexternal dests"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 101,
    "text": "Network Layer 4-101 \nInter-AS tasks \nv  suppose router in AS1 \nreceives datagram \ndestined outside of AS1: \n§  router should forward \npacket to gateway \nrouter, but which one? AS1 must: \n1. \nlearn which dests are \nreachable through AS2, \nwhich through AS3 \n2. \npropagate this \nreachability info to all \nrouters in AS1 \njob of inter-AS routing! AS3 \nAS2 \n3b \n3c \n3a \nAS1 \n1c \n1a \n1d \n1b \n2a \n2c \n2b \nother \nnetworks \nother \nnetworks"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 102,
    "text": "Network Layer 4-102 \nExample: setting forwarding table in router 1d \nv  suppose AS1 learns (via inter-AS protocol) that subnet x \nreachable via AS3 (gateway 1c), but not via AS2 \n§  inter-AS protocol propagates reachability info to all internal \nrouters \nv  router 1d determines from intra-AS routing info that its \ninterface I  is on the least cost path to 1c \n§  installs forwarding table entry (x,I) \nAS3 \nAS2 \n3b \n3c \n3a \nAS1 \n1c \n1a \n1d \n1b \n2a \n2c \n2b \nother \nnetworks \nother \nnetworks \nx \n…"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 103,
    "text": "Network Layer 4-103 \nExample: choosing among multiple ASes \nv  now suppose AS1 learns from inter-AS protocol that subnet \nx is reachable from AS3 and from AS2. v  to configure forwarding table, router 1d must determine \nwhich gateway it should forward packets towards for dest x \n§  this is also job of inter-AS routing protocol! AS3 \nAS2 \n3b \n3c \n3a \nAS1 \n1c \n1a \n1d \n1b \n2a \n2c \n2b \nother \nnetworks \nother \nnetworks \nx \n… \n?"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 104,
    "text": "Network Layer 4-104 \nlearn from inter-AS  \nprotocol that subnet  \nx is reachable via  \nmultiple gateways \nuse routing info \nfrom intra-AS  \nprotocol to determine \ncosts of least-cost  \npaths to each \nof the gateways \nhot potato routing: \nchoose the gateway \nthat has the  \nsmallest least cost \ndetermine from \nforwarding table the  \ninterface I that leads  \nto least-cost gateway. Enter (x,I) in  \nforwarding table \nExample: choosing among multiple ASes \nv  now suppose AS1 learns from inter-AS protocol that subnet \nx is reachable from AS3 and from AS2. v  to configure forwarding table, router 1d must determine \ntowards which gateway it should forward packets for dest x \n§  this is also job of inter-AS routing protocol! v  hot potato routing: send packet towards closest of two \nrouters."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 105,
    "text": "Network Layer 4-105 \n4.1 introduction \n4.2 virtual circuit and \ndatagram networks \n4.3 what’s inside a router \n4.4 IP: Internet Protocol \n§  datagram format \n§  IPv4 addressing \n§  ICMP \n§  IPv6 \n4.5 routing algorithms \n§  link state \n§  distance vector \n§  hierarchical routing \n4.6 routing in the Internet \n§  RIP \n§  OSPF \n§  BGP \n4.7 broadcast and multicast \nrouting \nChapter 4: outline"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 106,
    "text": "Network Layer 4-106 \nIntra-AS Routing \nv  also known as interior gateway protocols (IGP) \nv  most common intra-AS routing protocols: \n§  RIP: Routing Information Protocol \n§  OSPF: Open Shortest Path First \n§  IGRP: Interior Gateway Routing Protocol \n(Cisco proprietary)"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 107,
    "text": "Network Layer 4-107 \nRIP ( Routing Information Protocol) \nv  included in BSD-UNIX distribution in 1982 \nv  distance vector algorithm \n§  distance metric: # hops (max = 15 hops), each link has cost 1 \n§  DVs exchanged with neighbors every 30 sec in response message (aka \nadvertisement) \n§  each advertisement: list of up to 25 destination subnets (in IP addressing \nsense) \n \n \nD \nC \nB \nA \nu \nv \nw \nx \ny \nz \nsubnet    hops \n      u         1 \n      v         2 \n      w        2 \n      x         3 \n      y         3 \n      z         2 \n   \nfrom router A to destination subnets:"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 108,
    "text": "Network Layer 4-108 \nRIP: example  \ndestination subnet\n   next  router      # hops to dest \n \n w\n \n \n A\n y\n \n \n B\n z\n \n \n B\n x\n \n \n --\n …. …. .... \nrouting table in router D \nw \nx \ny \nz \nA \nC \nD \nB"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 109,
    "text": "Network Layer 4-109 \nw \nx \ny \nz \nA \nC \nD \nB \ndestination subnet\n   next  router      # hops to dest \n \n w\n \n \n A\n y\n \n \n B\n z\n \n \n B\n x\n \n \n --\n …. …. .... \nrouting table in router D \nA \n dest     next  hops \n   w\n   -       1 \n   x\n   -       1 \n   z\n   C      4 \n   …. …     ... \nA-to-D advertisement \nRIP: example"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 110,
    "text": "Network Layer 4-110 \nRIP: link failure, recovery  \nif no advertisement heard after 180 sec --> neighbor/\nlink declared dead \n§  routes via neighbor invalidated \n§  new advertisements sent to neighbors \n§  neighbors in turn send out new advertisements (if tables \nchanged) \n§  link failure info quickly (?) propagates to entire net \n§  poison reverse used to prevent ping-pong loops (infinite \ndistance = 16 hops)"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 111,
    "text": "Network Layer 4-111 \nRIP table processing \nv  RIP routing tables managed by application-level \nprocess called route-d (daemon) \nv  advertisements sent in UDP packets, periodically \nrepeated \nphysical \nlink \nnetwork       forwarding \n   (IP)             table \ntransport \n  (UDP) \nrouted \nphysical \nlink \nnetwork \n   (IP) \ntransprt \n  (UDP) \nrouted \nforwarding \ntable"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 112,
    "text": "Network Layer 4-112 \nOSPF (Open Shortest Path First) \nv  “open”: publicly available \nv  uses link state algorithm  \n§  LS packet dissemination \n§  topology map at each node \n§  route computation using Dijkstra’s algorithm \nv  OSPF advertisement carries one entry per neighbor  \nv  advertisements flooded to entire AS \n§  carried in OSPF messages directly over IP (rather than \nTCP or UDP \nv  IS-IS routing protocol: nearly identical to OSPF"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 113,
    "text": "Network Layer 4-113 \nOSPF “advanced” features (not in RIP) \nv  security: all OSPF messages authenticated (to prevent \nmalicious intrusion)  \nv  multiple same-cost paths allowed (only one path in \nRIP) \nv  for each link, multiple cost metrics for different TOS \n(e.g., satellite link cost set “low” for best effort ToS; \nhigh for real time ToS) \nv  integrated uni- and multicast support:  \n§  Multicast OSPF (MOSPF) uses same topology data \nbase as OSPF \nv  hierarchical OSPF in large domains."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 114,
    "text": "Network Layer 4-114 \nHierarchical OSPF \nboundary router \nbackbone router \narea 1 \narea 2 \narea 3 \nbackbone \narea \nborder \nrouters \ninternal \nrouters"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 115,
    "text": "Network Layer 4-115 \nv  two-level hierarchy: local area, backbone. §  link-state advertisements only in area  \n§  each nodes has detailed area topology; only know \ndirection (shortest path) to nets in other areas. v  area border routers: “summarize” distances  to nets in \nown area, advertise to other Area Border routers. v  backbone routers: run OSPF routing limited to \nbackbone. v  boundary routers: connect to other AS’s. Hierarchical OSPF"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 116,
    "text": "Network Layer 4-116 \nInternet inter-AS routing: BGP \nv  BGP (Border Gateway Protocol): the de facto \ninter-domain routing protocol \n§  “glue that holds the Internet together” \nv  BGP provides each AS a means to: \n§  eBGP: obtain subnet reachability information from \nneighboring ASs. §  iBGP: propagate reachability information to all AS-\ninternal routers. §  determine “good” routes to other networks based on \nreachability information and policy. v  allows subnet to advertise its existence to rest of \nInternet: “I am here”"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 117,
    "text": "Network Layer 4-117 \nBGP basics \nv  when AS3 advertises a prefix to AS1: \n§  AS3 promises it will forward datagrams towards that prefix \n§  AS3 can aggregate prefixes in its advertisement \nAS3 \nAS2 \n3b \n3c \n3a \nAS1 \n1c \n1a \n1d \n1b \n2a \n2c \n2b \nother \nnetworks \nother \nnetworks \nv  BGP session: two BGP routers (“peers”) exchange BGP \nmessages: \n§  advertising paths to different destination network prefixes (“path vector” \nprotocol)  \n§  exchanged over semi-permanent TCP connections \nBGP  \nmessage"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 118,
    "text": "Network Layer 4-118 \nBGP basics: distributing path information \nAS3 \nAS2 \n3b \n3a \nAS1 \n1c \n1a \n1d \n1b \n2a \n2c \n2b \nother \nnetworks \nother \nnetworks \nv  using eBGP session between 3a and 1c, AS3 sends prefix \nreachability info to AS1. §  1c can then use iBGP do distribute new prefix info to all routers \nin AS1 \n§  1b can then re-advertise new reachability info to AS2 over 1b-\nto-2a eBGP session \nv  when router learns of new prefix, it creates entry for \nprefix in its forwarding table. eBGP session \niBGP session"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 119,
    "text": "Network Layer 4-119 \nPath attributes and BGP routes \nv  advertised prefix includes BGP attributes  \n§  prefix + attributes = “route” \nv  two important attributes: \n§  AS-PATH: contains ASs through which prefix \nadvertisement has passed: e.g., AS 67, AS 17  \n§  NEXT-HOP: indicates specific internal-AS router to next-\nhop AS. (may be multiple links from current AS to next-\nhop-AS) \nv  gateway router receiving route advertisement uses \nimport policy to accept/decline \n§  e.g., never route through AS x \n§  policy-based routing"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 120,
    "text": "Network Layer 4-120 \nBGP route selection \nv  router may learn about more than 1 route to \ndestination AS, selects route based on: \n1.  local preference value attribute: policy decision \n2.  shortest AS-PATH  \n3.  closest NEXT-HOP router: hot potato routing \n4.  additional criteria"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 121,
    "text": "Network Layer 4-121 \nBGP messages \nv  BGP messages exchanged between peers over TCP \nconnection \nv  BGP messages: \n§  OPEN: opens TCP connection to peer and authenticates \nsender \n§  UPDATE: advertises new path (or withdraws old) \n§  KEEPALIVE: keeps connection alive in absence of \nUPDATES; also ACKs OPEN request \n§  NOTIFICATION: reports errors in previous msg; also \nused to close connection"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 122,
    "text": "Putting it Altogether: \nHow Does an Entry Get Into a \nRouter’s Forwarding Table? v  Answer is complicated! v  Ties together hierarchical routing (Section 4.5.3) \nwith BGP (4.6.3) and OSPF (4.6.2). v  Provides nice overview of BGP!"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 123,
    "text": "1 \n3 \nDest IP \nrouting algorithms \nlocal forwarding table \nprefix \noutput port \n138.16.64/22 \n124.12/16 \n212/8 \n………….. \n2 \n… \nHow does entry get in forwarding table? entry \nAssume prefix is \nin another AS."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 124,
    "text": "High-level overview \n1. Router becomes aware of prefix \n2. Router determines output port for prefix \n3. Router enters prefix-port in forwarding table \nHow does entry get in forwarding table?"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 125,
    "text": "Router becomes aware of prefix \nAS3 \nAS2 \n3b \n3c \n3a \nAS1 \n1c \n1a \n1d \n1b \n2a \n2c \n2b \nother \nnetworks \nother \nnetworks \nBGP  \nmessage \nv  BGP message contains “routes”  \nv  “route” is a prefix and attributes: AS-PATH, NEXT-HOP,\n… \nv  Example: route: \nv  Prefix:138.16.64/22 ;  AS-PATH:  AS3  AS131 ;  \nNEXT-HOP:  201.44.13.125"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 126,
    "text": "Router may receive multiple routes \nAS3 \nAS2 \n3b \n3c \n3a \nAS1 \n1c \n1a \n1d \n1b \n2a \n2c \n2b \nother \nnetworks \nother \nnetworks \nBGP  \nmessage \nv  Router may receive multiple routes for same prefix \nv  Has to select one route"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 127,
    "text": "v  Router selects route based on shortest AS-PATH \nSelect best BGP route to prefix \nv  Example: \n \nv  AS2 AS17  to 138.16.64/22  \nv  AS3 AS131 AS201 to 138.16.64/22  \nv  What if there is a tie? We’ll come back to that! select"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 128,
    "text": "Find best intra-route to BGP route \nv  Use selected route’s NEXT-HOP attribute  \n§  Route’s NEXT-HOP attribute is the IP address of the \nrouter interface that begins the AS PATH. v  Example:  \nv  AS-PATH:  AS2  AS17 ;  NEXT-HOP: 111.99.86.55 \nv  Router uses OSPF to find shortest path from 1c to \n111.99.86.55 \nAS3 \nAS2 \n3b \n3c \n3a \nAS1 \n1c \n1a \n1d \n1b \n2a \n2c \n2b \nother \nnetworks \nother \nnetworks \n111.99.86.55"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 129,
    "text": "Router identifies port for route \nv  Identifies port along the OSPF shortest path \nv  Adds prefix-port entry to its forwarding table: \n§  (138.16.64/22 , port 4)  \nAS3 \nAS2 \n3b \n3c \n3a \nAS1 \n1c \n1a \n1d \n1b \n2a \n2c \n2b \nother \nnetworks \nother \nnetworks \nrouter \nport \n2 3"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 130,
    "text": "Hot Potato Routing \nv  Suppose there two or more best inter-routes. v  Then choose route with closest NEXT-HOP \n§  Use OSPF to determine which gateway is closest \n§  Q: From 1c, chose AS3 AS131 or AS2 AS17? §   A: route AS3 AS201 since it is closer  \nAS3 \nAS2 \n3b \n3c \n3a \nAS1 \n1c \n1a \n1d \n1b \n2a \n2c \n2b \nother \nnetworks \nother \nnetworks"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 131,
    "text": "Summary \n1. Router becomes aware of prefix \n§ \nvia BGP route advertisements from other routers \n2. Determine router output port for prefix \n§ \nUse BGP route selection to find best inter-AS route \n§ \nUse OSPF to find best intra-AS route  leading to best \ninter-AS route \n§ \nRouter identifies router port for that best route \n3. Enter prefix-port entry in forwarding table \nHow does entry get in forwarding table?"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 132,
    "text": "Network Layer 4-132 \nBGP routing policy \nv  A,B,C are provider networks \nv  X,W,Y are customer (of provider networks) \nv  X is dual-homed: attached to two networks \n§  X does not want to route from B via X to C \n§  .. so X will not advertise to B a route to C \nA\nB \nC   \nW   \nX \nY \nlegend: \n  \ncustomer  \nnetwork: \n  \nprovider \n  \nnetwork"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 133,
    "text": "Network Layer 4-133 \nBGP routing policy (2) \nv  A advertises path AW  to B \nv  B advertises path BAW to X  \nv  Should B advertise path BAW to C? §  No way! B gets no “revenue” for routing CBAW since neither W nor \nC are B’s customers  \n§  B wants to force C to route to w via A \n§  B wants to route only to/from its customers! A\nB \nC   \nW   \nX \nY \nlegend: \n  \ncustomer  \nnetwork: \n  \nprovider \n  \nnetwork"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 134,
    "text": "Network Layer 4-134 \nWhy different Intra-, Inter-AS routing ? policy:  \nv  inter-AS: admin wants control over how its traffic \nrouted, who routes through its net. v  intra-AS: single admin, so no policy decisions needed \nscale: \nv  hierarchical routing saves table size, reduced update \ntraffic \nperformance:  \nv  intra-AS: can focus on performance \nv  inter-AS: policy may dominate over performance"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 135,
    "text": "Network Layer 4-135 \n4.1 introduction \n4.2 virtual circuit and \ndatagram networks \n4.3 what’s inside a router \n4.4 IP: Internet Protocol \n§  datagram format \n§  IPv4 addressing \n§  ICMP \n§  IPv6 \n4.5 routing algorithms \n§  link state \n§  distance vector \n§  hierarchical routing \n4.6 routing in the Internet \n§  RIP \n§  OSPF \n§  BGP \n4.7 broadcast and multicast \nrouting \nChapter 4: outline"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 136,
    "text": "Network Layer 4-136 \nR1 \nR2 \nR3 \nR4 \nsource \nduplication \nR1 \nR2 \nR3 \nR4 \nin-network \nduplication \nduplicate \ncreation/transmission \nduplicate \nduplicate \nBroadcast routing \nv  deliver packets from source to all other nodes \nv  source duplication is inefficient: \nv  source duplication: how does source determine \nrecipient addresses?"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 137,
    "text": "Network Layer 4-137 \nIn-network duplication \nv  flooding: when node receives broadcast packet, \nsends copy to all neighbors \n§  problems: cycles & broadcast storm \nv  controlled flooding: node only broadcasts pkt if it \nhasn’t broadcast same packet before \n§  node keeps track of packet ids already broadacsted \n§  or reverse path forwarding (RPF): only forward packet \nif it arrived on shortest path between node and source \nv  spanning tree: \n§  no redundant packets received by any node"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 138,
    "text": "Network Layer 4-138 \nA \nB \nG \nD \nE \nc \nF \nA \nB \nG \nD \nE \nc \nF \n(a) broadcast initiated at A \n(b) broadcast initiated at D \nSpanning tree \nv  first construct a spanning tree \nv  nodes then forward/make copies only along \nspanning tree"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 139,
    "text": "Network Layer 4-139 \nA \nB \nG \nD \nE \nc \nF \n2 \n4 \n(a) stepwise construction of \nspanning tree (center: E) \nA \nB \nG \nD \nE \nc \nF \n(b) constructed spanning \ntree \nSpanning tree: creation \nv  center node \nv  each node sends unicast join message to center \nnode \n§  message forwarded until it arrives at a node already \nbelonging to spanning tree"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 140,
    "text": "Network Layer 4-140 \nMulticast routing: problem statement \ngoal: find a tree (or trees) connecting routers having \nlocal mcast group members  \nv  tree: not all paths between routers used \nv  shared-tree: same tree used by all group members \nshared tree \nsource-based trees \ngroup  \nmember \nnot group  \nmember \nrouter \nwith a \ngroup  \nmember \nrouter \nwithout \ngroup  \nmember \nlegend \n \nv  source-based: different tree from each sender to rcvrs"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 141,
    "text": "Network Layer 4-141 \nApproaches for building mcast trees \napproaches: \nv  source-based tree: one tree per source \n§  shortest path trees \n§  reverse path forwarding \nv  group-shared tree: group uses one tree \n§  minimal spanning (Steiner)  \n§  center-based trees \n…we first look at basic approaches, then specific protocols \nadopting these approaches"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 142,
    "text": "Network Layer 4-142 \nShortest path tree \nv  mcast forwarding tree: tree of shortest path \nroutes from source to all receivers \n§  Dijkstra’s algorithm \ni \nrouter with attached \ngroup member \nrouter with no attached \ngroup member \nlink used for forwarding, \ni indicates order link \nadded by algorithm \nLEGEND \nR1 \nR2 \nR3 \nR4 \nR5 \nR6 \nR7 \n1 \n3 \n5 \ns: source"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 143,
    "text": "Network Layer 4-143 \nReverse path forwarding \nif (mcast datagram received on incoming link on \nshortest path back to center) \n   then flood datagram onto all outgoing links \n   else ignore datagram \nv  rely on router’s knowledge of unicast shortest \npath from it  to sender \nv  each router has simple forwarding behavior:"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 144,
    "text": "Network Layer 4-144 \nReverse path forwarding: example \nv  result is a source-specific reverse SPT \n§  may be a bad choice with asymmetric links \nrouter with attached \ngroup member \nrouter with no attached \ngroup member \ndatagram will be  forwarded \nLEGEND \nR1 \nR2 \nR3 \nR4 \nR5 \nR6 \nR7 \ns: source \ndatagram will not be  \nforwarded"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 145,
    "text": "Network Layer 4-145 \nReverse path forwarding: pruning \nv  forwarding tree contains subtrees with no mcast group \nmembers \n§  no need to forward datagrams down subtree \n§  “prune” msgs sent upstream by router with no \ndownstream group members \nrouter with attached \ngroup member \nrouter with no attached \ngroup member \nprune message \nLEGEND \nlinks with multicast \nforwarding \nP \nR1 \nR2 \nR3 \nR4 \nR5 \nR6 \nR7 \ns: source \nP \nP"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 146,
    "text": "Network Layer 4-146 \nShared-tree: steiner tree \nv  steiner tree: minimum cost tree connecting all \nrouters with attached group members \nv  problem is NP-complete \nv  excellent heuristics exists \nv  not used in practice: \n§  computational complexity \n§  information about entire network needed \n§  monolithic: rerun whenever a router needs to join/\nleave"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 147,
    "text": "Network Layer 4-147 \nCenter-based trees \nv  single delivery tree shared by all \nv  one router identified as “center” of tree \nv  to join: \n§  edge router sends unicast join-msg addressed to center \nrouter \n§  join-msg “processed” by intermediate routers and \nforwarded towards center \n§  join-msg either hits existing tree branch for this center, \nor arrives at center \n§  path taken by join-msg becomes new branch of tree for \nthis router"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 148,
    "text": "Network Layer 4-148 \nCenter-based trees: example \nsuppose R6 chosen as center: \nrouter with attached \ngroup member \nrouter with no attached \ngroup member \npath order in which join \nmessages generated \nLEGEND \n1 \n1 \nR1 \nR2 \nR3 \nR4 \nR5 \nR6 \nR7"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 149,
    "text": "Network Layer 4-149 \nInternet Multicasting Routing: DVMRP \nv  DVMRP: distance vector multicast routing \nprotocol, RFC1075 \nv  flood and prune:  reverse path forwarding, source-\nbased tree \n§  RPF tree based on DVMRP’s own routing tables \nconstructed by communicating DVMRP routers  \n§  no assumptions about underlying unicast \n§  initial datagram to mcast group flooded  everywhere \nvia RPF \n§  routers not wanting group: send upstream prune msgs"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 150,
    "text": "Network Layer 4-150 \nDVMRP: continued… \nv  soft state: DVMRP router periodically (1 min.) “forgets”  branches are pruned:  \n§  mcast data again flows down unpruned branch \n§  downstream router: reprune or else continue to receive \ndata \nv  routers can quickly regraft to tree  \n§  following IGMP join at leaf \nv  odds and ends \n§  commonly implemented in commercial router"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 151,
    "text": "Network Layer 4-151 \nTunneling \nQ: how to connect “islands” of multicast  routers in a \n“sea” of unicast routers? v  mcast datagram encapsulated inside “normal” (non-\nmulticast-addressed) datagram \nv  normal IP datagram sent thru “tunnel” via regular IP unicast \nto receiving mcast router (recall IPv6 inside IPv4 tunneling) \nv  receiving mcast router unencapsulates to get mcast \ndatagram \nphysical topology \nlogical topology"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 152,
    "text": "Network Layer 4-152 \nPIM: Protocol Independent Multicast \nv  not dependent on any specific underlying unicast \nrouting algorithm (works with all) \nv  two different multicast distribution scenarios : \ndense: \nv  group members densely \npacked, in “close” \nproximity. v  bandwidth more plentiful \nsparse: \nv  # networks with group \nmembers small wrt # \ninterconnected networks \nv  group members “widely \ndispersed” \nv  bandwidth not plentiful"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 153,
    "text": "Network Layer 4-153 \nConsequences of sparse-dense dichotomy:  \ndense \nv  group membership by \nrouters assumed until \nrouters explicitly prune \nv  data-driven construction on \nmcast tree (e.g., RPF) \nv  bandwidth and non-group-\nrouter processing profligate \nsparse: \nv  no membership until routers \nexplicitly join \nv  receiver- driven construction \nof mcast tree (e.g., center-\nbased) \nv  bandwidth and non-group-\nrouter processing conservative"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 154,
    "text": "Network Layer 4-154 \nPIM- dense mode \nflood-and-prune RPF: similar to DVMRP but… \nv  underlying unicast protocol provides RPF info \nfor incoming datagram \nv  less complicated (less efficient) downstream \nflood than DVMRP reduces reliance on \nunderlying routing algorithm \nv  has protocol mechanism for router to detect it \nis a leaf-node router"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 155,
    "text": "Network Layer 4-155 \nPIM - sparse mode \nv  center-based approach \nv  router sends join msg to \nrendezvous point (RP) \n§  intermediate routers \nupdate state and \nforward join \nv  after joining via RP, router \ncan switch to source-\nspecific tree \n§  increased \nperformance: less \nconcentration, shorter \npaths \nall data multicast \nfrom rendezvous \npoint \nrendezvous \npoint \njoin \njoin \njoin \nR1 \nR2 \nR3 \nR4 \nR5 \nR6 \nR7"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 156,
    "text": "Network Layer 4-156 \nsender(s): \nv  unicast data to RP, \nwhich distributes \ndown RP-rooted tree \nv  RP can extend mcast \ntree upstream to \nsource \nv  RP can send stop msg \nif no attached \nreceivers \n§  “no one is listening!” \nall data multicast \nfrom rendezvous \npoint \nrendezvous \npoint \njoin \njoin \njoin \nR1 \nR2 \nR3 \nR4 \nR5 \nR6 \nR7 \nPIM - sparse mode"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 157,
    "text": "Network Layer 4-157 \n4.1 introduction \n4.2 virtual circuit and \ndatagram networks \n4.3 what’s inside a router \n4.4 IP: Internet Protocol \n§  datagram format, IPv4 \naddressing, ICMP, IPv6 \n4.5 routing algorithms \n§  link state, distance vector, \nhierarchical routing \n4.6 routing in the Internet \n§  RIP, OSPF, BGP \n4.7 broadcast and multicast \nrouting \nChapter 4: done! v  understand principles behind network layer services: \n§  network layer service models, forwarding versus routing \nhow a router works, routing (path selection), broadcast, \nmulticast \nv  instantiation, implementation in the Internet"
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 1,
    "text": "Network Management - SNMP"
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 2,
    "text": "What is Network Management?\nBasic tasks that fall under this category are:"
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 3,
    "text": "Functional Areas of Network Management\n\n\nConfiguration Management - inventory, configuration, provisioning\nFault Management - reactive and proactive network fault management\nPerformance Management - # of packets dropped, timeouts, collisions, CRC errors\nSecurity Management - SNMP doesn’t provide much here \nAccounting Management - cost management and chargeback assessment\nAsset Management - statistics of equipment, facility, and administration personnel\nPlanning Management - analysis of trends to help justify a network upgrade or  \t\t\tbandwidth increase"
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 4,
    "text": "What is SNMP?\nSNMP is a tool (protocol) that allows for remote and local management of items on the network including servers, workstations, routers, switches and other managed devices.\nComprised of agents and managers\n\nAgent - process running on each managed node collecting information about the device it is running on.\nManager - process running on a management workstation that requests information about devices on the network."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 5,
    "text": "Advantages of using SNMP\nStandardized\nuniversally supported\nextendible\nportable\nallows distributed management access\nlightweight protocol"
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 6,
    "text": "Client Pull & Server Push\nSNMP is a “client pull” model\nSNMP is a “server push” model\nThe management system (client) “pulls” data from the agent (server).\nThe agent (server) “pushes” out a trap message to a (client) management system"
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 7,
    "text": "SNMP & The OSI Model"
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 8,
    "text": "Ports & UDP\n\n\nSNMP uses User Datagram Protocol (UDP) as the transport mechanism for SNMP messages\n\n\nUDP Port 161 - SNMP Messages\nUDP Port 162 - SNMP Trap Messages\nLike FTP, SNMP uses two well-known ports to operate:\n\n\n\n\nEthernet Frame\nIP Packet\nUDP Datagram\nSNMP Message\nCRC"
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 9,
    "text": "The Three Parts of SNMP\nSNMP network management is based on three parts:\nStructure of Management Information (SMI)\nRules specifying the format used to define objects managed on the network that the SNMP protocol accesses\nManagement Information Base (MIB)\nA map of the hierarchical order of all managed objects and how they are accessed\nSNMP Protocol\n\nDefines format of messages exchanged by management systems and agents.\nSpecifies the Get, GetNext, Set, and Trap operations"
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 10,
    "text": "Nodes\n\n\nItems in an SNMP Network are called nodes. There are different types of nodes.\nManaged nodes\nManagement nodes\nNodes that are not manageable by SNMP\nTypically runs an agent process that services requests from a management node\nTypically a workstation running some network management & monitoring software\nA node may not support SNMP, but may be manageable by SNMP through a proxy agent running on another machine\nNodes can be both managed nodes and a management node at the same time (typically this is the case, since you want to be able to manage the workstation that your management application is running on.)"
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 11,
    "text": "Community Names\n\n\nCommunity names are used to define where an SNMP message is destined for.\nThey mirror the same concept as a Windows NT or Unix domain.\nSet up your agents to belong to certain communities.\nSet up your management applications to monitor and receive traps from certain community names."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 12,
    "text": "SNMP Agents\nTwo basic designs of agents\n\nExtendible Agents\nOpen, modular design allows for adaptations to new management data and operational requirements"
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 13,
    "text": "Proxy & Gateway Agents\n\n\nProxy & Gateway Agents extend the capabilities of SNMP by allowing it to:\nManage a device that cannot support an SNMP agent\nManage a device that supports a non-SNMP management agent\nAllow a non-SNMP management system to access an SNMP agent\nProvide firewall-type security to other SNMP agents (UDP packet filtering)\nTranslate between different formats of SNMP messages (v1 and v2)\nConsolidate multiple managed nodes into a single network address (also to provide a single trap destination)"
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 14,
    "text": "Four Basic Operations\n\n\nGet\nGetNext\nSet\nTrap\nRetrieves the value of a MIB variable stored on the agent machine\n(integer, string, or address of another MIB variable)\nRetrieves the next value of the next lexical MIB variable\nChanges the value of a MIB variable\nAn unsolicited notification sent by an agent to a management application (typically a notification of something unexpected, like an error)"
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 15,
    "text": "Traps\n\n\nTraps are unrequested event reports that are sent to a management system by an SNMP agent process\nWhen a trappable event occurs, a trap message is generated by the agent and is sent to a trap destination (a specific, configured network address)\nMany events can be configured to signal a trap, like a network cable fault, failing NIC or Hard Drive, a “General Protection Fault”, or a power supply failure\nTraps can also be throttled -- You can limit the number of traps sent per second from the agent\nTraps have a priority associated with them -- Critical, Major, Minor, Warning, Marginal, Informational, Normal, Unknown"
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 16,
    "text": "Trap Receivers\n\n\nTraps are received by a management application.\nManagement applications can handle the trap in a few ways:\nPoll the agent that sent the trap for more information about the event, and the status of the rest of the machine.\nLog the reception of the trap.\nCompletely ignore the trap.\nManagement applications can be set up to send off an e-mail, call a voice mail and leave a message, or send an alpha-numeric page to the network administrator’s pager that says:\u000b\n Your PDC just Blue-Screened at 03:46AM. Have a nice day.   :)"
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 17,
    "text": "Languages of SNMP\n\n\nStructure of Management Information (SMI)\nAbstract Syntax Notation One (ASN.1)\nBasic Encoding Rules (BER)\nspecifies the format used for defining managed objects that are accessed via the SNMP protocol\nused to define  the format of SNMP messages and managed objects (MIB modules) using an unambiguous data description format\nused to encode the SNMP messages into a format suitable for transmission across a network"
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 18,
    "text": "SMIv1\n\n\nStructure of Management Information\nSMIv1 is described in RFCs 1155, 1212, 1215\nThese RFCs describe:\nHow MIB modules are defined with CCITT X.208 ASN.1 data description language\nThe subset of the ASN.1 language that is used in MIBs\nThe addition of the APPLICATION data type to ASN.1, specifically for use with SNMP MIBs\nAll ASN.1 constructs are serialized using the CCITT X.209 BER for transmission across the wire\ndefinition of the high-level structure of the Internet branch (iso(1).org(3).dod(6).internet(1)) of the MIB naming tree\nthe definition and description of an SNMP managed object"
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 19,
    "text": "SMIv2\n\n\nStructure of Management Information\nSMIv2 is described in RFCs 1442, 1443, 1444\nThese RFCs describe:\nSMIv2 is a backward compatible update to SMIv1\nThe only exception is the Counter64 type defined by SMIv2\nCounter64 cannot be created in SMIv2\nRFC 2089 defines how bilingual (SMIv1 & SMIv2) agents handle the Counter64 data type\nIETF requires that new and revised RFCs specify MIB modules using SMIv2"
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 20,
    "text": "ASN.1\n\n\nAbstract Syntax Notation One\nASN.1 is nothing more than a language definition. It is similar to C/C++ and other programming languages.\nSyntax examples:\n-- two dashes is a comment -- The C equivalent is written in the comment\nMostSevereAlarm ::= INTEGER            -- typedef MostSevereAlarm int;\ncircuitAlarms MostSevereAlarm ::= 3    -- MostSevereAlarm circuitAlarms = 3;\nMostSevereAlarm ::= INTEGER (1..5)  -- specify a valid range\nErrorCounts ::= SEQUENCE {\n    circuitID\t      OCTET STRING,\n    erroredSeconds\t      INTEGER,\n    unavailableSeconds  INTEGER\n}    -- data structures are defined using the SEQUENCE keyword"
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 21,
    "text": "BER\n\n\nBasic Encoding Rules\nThe relationship between ASN.1 and BER parallels that of source code and machine code.\nCCITT X.209 specifies the Basic Encoding Rules\nAll SNMP messages are converted / serialized from ASN.1 notation into smaller, binary data (BER)"
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 22,
    "text": "INTEGER -- signed 32-bit integer\nOCTET STRING\nOBJECT IDENTIFIER (OID)\nNULL -- not actually data type, but data value\nIpAddress -- OCTET STRING of size 4, in network byte order (B.E.)\nCounter -- unsigned 32-bit integer (rolls over)\nGauge -- unsigned 32-bit integer (will top out and stay there)\nTimeTicks -- unsigned 32-bit integer (rolls over after 497 days)\nOpaque -- used to create new data types not in SNMPv1\nDateAndTime, DisplayString, MacAddress, PhysAddress, TimeInterval, TimeStamp, TruthValue, VariablePointer -- textual conventions used as types\nSNMP Data Types\n\n\nYellow items defined by ASN.1\nOrange items defined by RFC 1155"
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 23,
    "text": "Managed “Objects” & MIBs\n\n\nAlways defined and referenced within the context of a MIB\nA typical MIB variable definition:\nsysContact OBJECT-TYPE\t-- OBJECT-TYPE is a macro\n      SYNTAX\tDisplayString (SIZE (0..255))\n      ACCESS\tread-write\t-- or read-write, write-only, not-accessible\n      STATUS\tmandatory\t-- or optional, deprecated, obsolete\n      DESCRIPTION\n\t“Chris Francois\n\t  cfrancois@acm.org\n\t  (360)650-0000”\n      ::= { system 4 }"
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 24,
    "text": "Basic Message Format\n\n\n\n\n\n\n\nMessage Length\nMessage Version\nCommunity String\nPDU Header\nPDU Body\n\n\nMessage Preamble\n\n\nSNMP Protocol Data Unit"
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 25,
    "text": "PDU Body\n\n\n\n\nSNMP Message Preamble\n\n\n\n\nPDU Header\n\n\n\n\nSNMP Message Formats"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 1,
    "text": "1\nProcess to Process (TCP and UDP)"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 2,
    "text": "PROCESS-TO-PROCESS DELIVERY\n\nThe transport layer is responsible for process-to-process delivery—the delivery of a packet, part of a message, from one process to another. Two processes communicate in a client/server relationship, as we will see later. \nClient/Server Paradigm\u000bMultiplexing and Demultiplexing\nConnectionless Versus Connection-Oriented Service\nReliable Versus Unreliable\nThree Protocols\nTopics discussed in this section:"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 3,
    "text": "The transport layer is responsible for process-to-process delivery."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 4,
    "text": "Types of data deliveries"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 5,
    "text": "Port numbers"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 6,
    "text": "IP addresses versus port numbers"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 7,
    "text": "IANA ranges"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 8,
    "text": "Socket address"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 9,
    "text": "Multiplexing and demultiplexing"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 10,
    "text": "Error control"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 11,
    "text": "Position of UDP, TCP, and SCTP in TCP/IP suite"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 12,
    "text": "USER DATAGRAM PROTOCOL (UDP)\n\nThe User Datagram Protocol (UDP) is called a connectionless, unreliable transport protocol. It does not add anything to the services of IP except to provide process-to-process communication instead of host-to-host communication. \nWell-Known Ports for UDP\u000bUser Datagram\nChecksum\nUDP Operation\nUse of UDP\nTopics discussed in this section:"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 13,
    "text": "Well-known ports used with UDP"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 14,
    "text": "In UNIX, the well-known ports are stored in a file called /etc/services. Each line in this file gives the name of the server and the well-known port number. We can use the\ngrep utility to extract the line corresponding to the desired application. The following shows the port for FTP. Note that FTP can use port 21 with either UDP or TCP.\nExample"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 15,
    "text": "Example (continued)\nSNMP uses two port numbers (161 and 162), each for a different purpose, as we will see in Chapter 28."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 16,
    "text": "User datagram format"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 17,
    "text": "UDP length \u000b=  IP length – IP header’s length"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 18,
    "text": "Pseudoheader for checksum calculation"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 19,
    "text": "Figure 23.11 shows the checksum calculation for a very small user datagram with only 7 bytes of data. Because the number of bytes of data is odd, padding is added for checksum calculation. The pseudoheader as well as the padding will be dropped when the user datagram is delivered to IP.\nExample"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 20,
    "text": "Checksum calculation of a simple UDP user datagram"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 21,
    "text": "Queues in UDP"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 22,
    "text": "TCP\n\nTCP is a connection-oriented protocol; it creates a virtual connection between two TCPs to send data. In addition, TCP uses flow and error control mechanisms at the transport level. \nTCP Services\u000bTCP Features\nSegment\nA TCP Connection\nFlow Control\nError Control\nTopics discussed in this section:"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 23,
    "text": "Well-known ports used by TCP"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 24,
    "text": "Stream delivery"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 25,
    "text": "Sending and receiving buffers"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 26,
    "text": "TCP segments"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 27,
    "text": "The bytes of data being transferred in each connection are numbered by TCP.\nThe numbering starts with a randomly generated number."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 28,
    "text": "The following shows the sequence number for each segment:\nExample"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 29,
    "text": "The value in the sequence number field of a segment defines the\nnumber of the first data byte \u000bcontained in that segment."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 30,
    "text": "The value of the acknowledgment field in a segment defines\nthe number of the next byte a party expects to receive.\nThe acknowledgment number is cumulative."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 31,
    "text": "TCP segment format"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 32,
    "text": "Control field"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 33,
    "text": "Description of flags in the control field"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 34,
    "text": "Connection establishment using three-way handshaking"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 35,
    "text": "A SYN segment cannot carry data, but it consumes one sequence number."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 36,
    "text": "A SYN + ACK segment cannot \u000bcarry data, but does consume one \u000bsequence number."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 37,
    "text": "An ACK segment, if carrying no data, consumes no sequence number."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 38,
    "text": "Data transfer"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 39,
    "text": "Connection termination using three-way handshaking"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 40,
    "text": "The FIN segment consumes one sequence number if it does \u000bnot carry data."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 41,
    "text": "The FIN + ACK segment consumes \u000bone sequence number if it \u000bdoes not carry data."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 42,
    "text": "Half-close"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 43,
    "text": "Sliding window"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 44,
    "text": "A sliding window is used to make transmission more efficient as well as\nto control the flow of data so that the destination does not become\noverwhelmed with data. \u000bTCP sliding windows are byte-oriented."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 45,
    "text": "What is the value of the receiver window (rwnd) for host A if the receiver, host B, has a buffer size of 5000 bytes and 1000 bytes of received and unprocessed data?\nExample \nSolution\nThe value of rwnd = 5000 − 1000 = 4000. Host B can receive only 4000 bytes of data before overflowing its buffer. Host B advertises this value in its next segment to A."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 46,
    "text": "What is the size of the window for host A if the value of rwnd is 3000 bytes and the value of cwnd is 3500 bytes?\nExample \nSolution\nThe size of the window is the smaller of rwnd and cwnd, which is 3000 bytes."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 47,
    "text": "Figure 23.23 shows an unrealistic example of a sliding window. The sender has sent bytes up to 202. We assume that cwnd is 20 (in reality this value is thousands of bytes). The receiver has sent an acknowledgment number of 200 with an rwnd of 9 bytes (in reality this value is thousands of bytes). The size of the sender window is the minimum of rwnd and cwnd, or 9 bytes. Bytes 200 to 202 are sent, but not acknowledged. Bytes 203 to 208 can be sent without worrying about acknowledgment. Bytes 209 and above cannot be sent.\nExample"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 48,
    "text": "Example"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 49,
    "text": "Some points about TCP sliding windows:\n❏ The size of the window is the lesser of rwnd and\u000b     cwnd.\n❏ The source does not have to send a full window’s\u000b     worth of data.\n❏ The window can be opened or closed by the\u000b     receiver, but should not be shrunk.\n❏ The destination can send an acknowledgment at\u000b     any time as long as it does not result in a shrinking\u000b     window.\n❏ The receiver can temporarily shut down the\u000b    window; the sender, however, can always send a\u000b    segment of 1 byte after the window is shut down."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 50,
    "text": "ACK segments do not consume sequence numbers and are not acknowledged."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 51,
    "text": "In modern implementations, a retransmission occurs if the retransmission timer expires or three duplicate ACK segments have arrived."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 52,
    "text": "No retransmission timer is set for an ACK segment."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 53,
    "text": "Data may arrive out of order and be temporarily stored by the receiving TCP,\nbut TCP guarantees that no out-of-order segment is delivered to the process."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 54,
    "text": "Normal operation"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 55,
    "text": "Lost segment"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 56,
    "text": "The receiver TCP delivers only ordered data to the process."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 57,
    "text": "Fast retransmission"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 58,
    "text": "SCTP\n\nStream Control Transmission Protocol (SCTP) is a new reliable, message-oriented transport layer protocol. SCTP, however, is mostly designed for Internet applications that have recently been introduced. These new applications need a more sophisticated service than TCP can provide. \nSCTP Services and Features\nPacket Format\nAn SCTP Association\nFlow Control and Error Control\nTopics discussed in this section:"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 59,
    "text": "SCTP is a message-oriented, reliable protocol that combines the best features of UDP and TCP."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 60,
    "text": "Multiple-stream concept"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 61,
    "text": "An association in SCTP can involve multiple streams."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 62,
    "text": "Multihoming concept"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 63,
    "text": "SCTP association allows multiple IP addresses for each end."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 64,
    "text": "In SCTP, a data chunk is numbered using a TSN."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 65,
    "text": "To distinguish between different streams, SCTP uses an SI."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 66,
    "text": "To distinguish between different data chunks belonging to the same stream, SCTP uses SSNs."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 67,
    "text": "TCP has segments; SCTP has packets."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 68,
    "text": "Comparison between a TCP segment and an SCTP packet"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 69,
    "text": "In SCTP, control information and data information are carried in separate chunks."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 70,
    "text": "Packet, data chunks, and streams"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 71,
    "text": "Data chunks are identified by three items: TSN, SI, and SSN.\nTSN is a cumulative number identifying the association; SI defines the stream; SSN defines the chunk in a stream."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 72,
    "text": "In SCTP, acknowledgment numbers are used to acknowledge only data chunks;\ncontrol chunks are acknowledged by other control chunks if necessary."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 73,
    "text": "SCTP packet format"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 74,
    "text": "In an SCTP packet, control chunks come before data chunks."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 75,
    "text": "General header"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 76,
    "text": "Chunks"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 77,
    "text": "A connection in SCTP is called an association."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 78,
    "text": "No other chunk is allowed in a packet carrying an INIT or INIT ACK chunk.\nA COOKIE ECHO or a COOKIE ACK chunk can carry data chunks."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 79,
    "text": "Four-way handshaking"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 80,
    "text": "In SCTP, only DATA chunks \u000bconsume TSNs;\nDATA chunks are the only chunks \u000bthat are acknowledged."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 81,
    "text": "Simple data transfer"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 82,
    "text": "The acknowledgment in SCTP defines the cumulative TSN, the TSN of the last data chunk received in order."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 83,
    "text": "Association termination"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 84,
    "text": "Flow control, receiver site"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 85,
    "text": "Flow control, sender site"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 86,
    "text": "Flow control scenario"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 87,
    "text": "Error control, receiver site"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 88,
    "text": "Error control, sender site"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 1,
    "text": "1\nRole of Transport Layer\nApplication layer\nCommunication for specific applications\nE.g., HyperText Transfer Protocol (HTTP), File Transfer Protocol (FTP), Network News Transfer Protocol (NNTP)\nTransport layer\nCommunication between processes (e.g., socket)\nRelies on network layer and serves the application layer\nE.g., TCP and UDP\nNetwork layer\nLogical communication between nodes\nHides details of the link technology\nE.g., IP"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 2,
    "text": "2\nTransport Protocols\nProvide logical communication between application processes running on different hosts\nRun on end hosts \nSender: breaks application messages into segments, \u000band passes to network layer\nReceiver: reassembles segments into messages, passes to application layer\nMultiple transport protocol available to applications\nInternet: TCP and UDP"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 3,
    "text": "3\nInternet Transport Protocols\nDatagram messaging service (UDP)\nNo-frills extension of “best-effort” IP\nReliable, in-order delivery (TCP)\nConnection set-up\nDiscarding of corrupted packets\nRetransmission of lost packets\nFlow control\nCongestion control (next lecture)\nOther services not available\nDelay guarantees\nBandwidth guarantees"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 4,
    "text": "4\n\n\nMultiplexing and Demultiplexing\nHost receives IP datagrams\nEach datagram has source and destination IP address, \nEach datagram carries one transport-layer segment\nEach segment has source and destination port number \nHost uses IP addresses and port numbers to direct the segment to appropriate socket\nsource port #\ndest port #\n\n\n\n32 bits\n\n\napplication\ndata \n(message)\nother header fields\nTCP/UDP segment format"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 5,
    "text": "5\nUnreliable Message Delivery Service\nLightweight communication between processes\nAvoid overhead and delays of ordered, reliable delivery\nSend messages to and receive them from a socket\nUser Datagram Protocol (UDP)\nIP plus port numbers to support (de)multiplexing\nOptional error checking on the packet contents\n\n\n\n\n\n\n SRC port\n DST port\nchecksum\nlength\nDATA"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 6,
    "text": "6\nWhy Would Anyone Use UDP?\nFiner control over what data is sent and when\nAs soon as an application process writes into the socket\n… UDP will package the data and send the packet\nNo delay for connection establishment \nUDP just blasts away without any formal preliminaries\n… which avoids introducing any unnecessary delays\nNo connection state\nNo allocation of buffers, parameters, sequence #s, etc.\n… making it easier to handle many active clients at once\nSmall packet header overhead\nUDP header is only eight-bytes long"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 7,
    "text": "7\nPopular Applications That Use UDP\nMultimedia streaming\nRetransmitting lost/corrupted packets is not worthwhile\nBy the time the packet is retransmitted, it’s too late\nE.g., telephone calls, video conferencing, gaming\nSimple query protocols like Domain Name System\nOverhead of connection establishment is overkill\nEasier to have application retransmit if needed\n\n\n“Address for www.cnn.com?”\n“12.3.4.15”"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 8,
    "text": "8\nTransmission Control Protocol (TCP)\nConnection oriented\nExplicit set-up and tear-down of TCP session\nStream-of-bytes service\nSends and receives a stream of bytes, not messages\nReliable, in-order delivery\nChecksums to detect corrupted data\nAcknowledgments & retransmissions for reliable delivery\nSequence numbers to detect losses and reorder data\nFlow control\nPrevent overflow of the receiver’s buffer space\nCongestion control\nAdapt to network congestion for the greater good"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 9,
    "text": "9\nAn Analogy: Talking on a Cell Phone\nAlice and Bob on their cell phones\nBoth Alice and Bob are talking\nWhat if Alice couldn’t understand Bob?\nBob asks Alice to repeat what she said\nWhat if Bob hasn’t heard Alice for a while?\nIs Alice just being quiet?\nOr, have Bob and Alice lost reception?\nHow long should Bob just keep on talking?\nMaybe Alice should periodically say “uh huh”\n… or Bob should ask “Can you hear me now?” "
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 10,
    "text": "10\nSome Take-Aways from the Example\nAcknowledgments from receiver\nPositive: “okay” or “ACK”\nNegative: “please repeat that” or “NACK”\nTimeout by the sender (“stop and wait”)\nDon’t wait indefinitely without receiving some response\n… whether a positive or a negative acknowledgment\nRetransmission by the sender\nAfter receiving a “NACK” from the receiver\nAfter receiving no feedback from the receiver"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 11,
    "text": "11\nChallenges of Reliable Data Transfer\nOver a perfectly reliable channel\nAll of the data arrives in order, just as it was sent\nSimple: sender sends data, and receiver receives data\nOver a channel with bit errors\nAll of the data arrives in order, but some bits corrupted\nReceiver detects errors and says “please repeat that”\nSender retransmits the data that were corrupted\nOver a lossy channel with bit errors\nSome data are missing, and some bits are corrupted\nReceiver detects errors but cannot always detect loss\nSender must wait for acknowledgment (“ACK” or “OK”)\n… and retransmit data after some time if no ACK arrives"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 12,
    "text": "12\nTCP Support for Reliable Delivery\nChecksum\nUsed to detect corrupted data at the receiver\n…leading the receiver to drop the packet\nSequence numbers\nUsed to detect missing data\n... and for putting the data back in order\nRetransmission\nSender retransmits lost or corrupted data\nTimeout based on estimates of round-trip time\nFast retransmit algorithm for rapid retransmission"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 13,
    "text": "13\nTCP Segments"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 14,
    "text": "14\nTCP “Stream of Bytes” Service\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nByte 0\nByte 1\nByte 2\nByte 3\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nByte 0\nByte 1\nByte 2\nByte 3\n\n\nHost A\nHost B\nByte 80\n\nByte 80"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 15,
    "text": "15\n…Emulated Using TCP “Segments”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nByte 0\nByte 1\nByte 2\nByte 3\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nByte 0\nByte 1\nByte 2\nByte 3\n\n\nHost A\nHost B\n\nByte 80\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nTCP Data\nTCP Data\nByte 80\nSegment sent when:\nSegment full (Max Segment Size),\nNot full, but times out, or\n“Pushed” by application."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 16,
    "text": "16\nTCP Segment\nIP packet\nNo bigger than Maximum Transmission Unit (MTU)\nE.g., up to 1500 bytes on an Ethernet\nTCP packet\nIP packet with a TCP header and data inside\nTCP header is typically 20 bytes long\nTCP segment\nNo more than Maximum Segment Size (MSS) bytes\nE.g., up to 1460 consecutive bytes from the stream\n\n\nIP Hdr\n\n\nIP Data\nTCP Hdr\nTCP Data (segment)"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 17,
    "text": "17\n\nSequence Numbers\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nHost A\nHost B\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nTCP Data\nTCP Data\n\nTCP \nHDR\n\nTCP \nHDR\nISN (initial sequence number)\n\nSequence number = 1st byte\n\nACK sequence number = next expected byte"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 18,
    "text": "18\nInitial Sequence Number (ISN)\nSequence number for the very first byte\nE.g., Why not a de facto ISN of 0?\nPractical issue\nIP addresses and port #s uniquely identify a connection\nEventually, though, these port #s do get used again\n… and there is a chance an old packet is still in flight\n… and might be associated with the new connection\nSo, TCP requires changing the ISN over time\nSet from a 32-bit clock that ticks every 4 microseconds\n… which only wraps around once every 4.55 hours!\nBut, this means the hosts need to exchange ISNs"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 19,
    "text": "19\nTCP Three-Way Handshake"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 20,
    "text": "20\nEstablishing a TCP Connection\nThree-way handshake to establish connection\nHost A sends a SYN (open) to the host B\nHost B returns a SYN acknowledgment (SYN ACK)\nHost A sends an ACK to acknowledge the SYN ACK\n\n\n\n\nSYN\nSYN ACK\nACK\nData\n\n\nA\nB\n\nData\nEach host tells its ISN to the other host."
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 21,
    "text": "21\n\nTCP Header\n\nSource port\n\nDestination port\n\nSequence number\n\nAcknowledgment\n\n\nAdvertised window\nHdrLen\n\n\nFlags\n0\n\n\nChecksum\nUrgent pointer\n\nOptions (variable)\nData\nFlags:\nSYN\nFIN\nRST\nPSH\nURG\nACK"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 22,
    "text": "22\nStep 1: A’s Initial SYN Packet\n\n\nA’s port\n\nB’s port\n\nA’s Initial Sequence Number\n\nAcknowledgment\n\n\nAdvertised window\n20\n\n\nFlags\n0\n\n\nChecksum\nUrgent pointer\n\nOptions (variable)\nFlags:\nSYN\nFIN\nRST\nPSH\nURG\nACK\nA tells B it wants to open a connection…"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 23,
    "text": "23\nStep 2: B’s SYN-ACK Packet\n\n\nB’s port\n\nA’s port\n\nB’s Initial Sequence Number\n\nA’s ISN plus 1\n\n\nAdvertised window\n20\n\n\nFlags\n0\n\n\nChecksum\nUrgent pointer\n\nOptions (variable)\nFlags:\nSYN\nFIN\nRST\nPSH\nURG\nACK\nB tells A it accepts, and is ready to hear the next byte…\n… upon receiving this packet, A can start sending data"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 24,
    "text": "24\nStep 3: A’s ACK of the SYN-ACK\n\n\nA’s port\n\nB’s port\n\n\nB’s ISN plus 1\n\n\nAdvertised window\n20\n\n\nFlags\n0\n\n\nChecksum\nUrgent pointer\n\nOptions (variable)\nFlags:\nSYN\nFIN\nRST\nPSH\nURG\nACK\nA tells B it wants is okay to start sending\nSequence number\n… upon receiving this packet, B can start sending data"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 25,
    "text": "25\nWhat if the SYN Packet Gets Lost?\nSuppose the SYN packet gets lost\nPacket is lost inside the network, or\nServer rejects the packet (e.g., listen queue is full)\nEventually, no SYN-ACK arrives\nSender sets a timer and wait for the SYN-ACK\n… and retransmits the SYN-ACK if needed\nHow should the TCP sender set the timer?\nSender has no idea how far away the receiver is\nHard to guess a reasonable length of time to wait\nSome TCPs use a default of 3 or 6 seconds"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 26,
    "text": "26\nSYN Loss and Web Downloads\nUser clicks on a hypertext link\nBrowser creates a socket and does a “connect”\nThe “connect” triggers the OS to transmit a SYN\nIf the SYN is lost…\nThe 3-6 seconds of delay may be very long\nThe user may get impatient\n… and click the hyperlink again, or click “reload”\nUser triggers an “abort” of the “connect”\nBrowser creates a new socket and does  a “connect”\nEssentially, forces a faster send of a new SYN packet!\nSometimes very effective, and the page comes fast"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 27,
    "text": "27\nTCP Retransmissions"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 28,
    "text": "28\n\nAutomatic Repeat reQuest (ARQ)\nTime\n\nTimeout\nAutomatic Repeat Request\nReceiver sends acknowledgment (ACK) when it receives packet\nSender waits for ACK and timeouts if it does not arrive within some time period\nSimplest ARQ protocol\nStop and wait\nSend a packet, stop and wait until ACK arrives \nSender\nReceiver"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 29,
    "text": "29\nReasons for Retransmission\nTimeout\n\nPacket\nTimeout\nTimeout\nTimeout\n\nTimeout\nTimeout\n\n\nACK lost\nDUPLICATE \u000bPACKET\nPacket lost\nEarly timeout\nDUPLICATE\u000bPACKETS"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 30,
    "text": "30\nHow Long Should Sender Wait?\nSender sets a timeout to wait for an ACK\nToo short: wasted retransmissions\nToo long: excessive delays when packet lost\nTCP sets timeout as a function of the RTT\nExpect ACK to arrive after an RTT\n… plus a fudge factor to account for queuing\nBut, how does the sender know the RTT?\nCan estimate the RTT by watching the ACKs\nSmooth estimate: keep a running average of the RTT\nEstimatedRTT = a * EstimatedRTT + (1 –a ) * SampleRTT\nCompute timeout: TimeOut = 2 * EstimatedRTT"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 31,
    "text": "31\nExample RTT Estimation"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 32,
    "text": "32\nA Flaw in This Approach\nAn ACK doesn’t really acknowledge a transmission\nRather, it acknowledges receipt of the data\nConsider a retransmission of a lost packet\nIf you assume the ACK goes with the 1st transmission\n… the SampleRTT comes out way too large\nConsider a duplicate packet \nIf you assume the ACK goes with the 2nd transmission\n… the Sample RTT comes out way too small\nSimple solution in the Karn/Partridge algorithm\nOnly collect samples for segments sent one single time"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 33,
    "text": "33\nYet Another Limitation…\nDoesn’t consider variance in the RTT\nIf variance is small, the EstimatedRTT is pretty accurate\n… but, if variance is large, the estimate isn’t all that good\nBetter to directly consider the variance\nConsider difference: SampleRTT – EstimatedRTT\nBoost the estimate based on the difference\nJacobson/Karels algorithm\nSee Section 5.2 of the Peterson/Davie book for details"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 34,
    "text": "34\nTCP Sliding Window"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 35,
    "text": "35\nMotivation for Sliding Window\nStop-and-wait is inefficient\nOnly one TCP segment is “in flight” at a time\nEspecially bad when delay-bandwidth product is high\nNumerical example\n1.5 Mbps link with a 45 msec round-trip time (RTT)\nDelay-bandwidth product is 67.5 Kbits (or 8 KBytes)\nBut, sender can send at most one packet per RTT\nAssuming a segment size of 1 KB (8 Kbits)\n… leads to 8 Kbits/segment / 45 msec/segment  182 Kbps\nThat’s just one-eighth of the 1.5 Mbps link capacity"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 36,
    "text": "36\nSliding Window\nAllow a larger amount of data “in flight”\nAllow sender to get ahead of the receiver\n… though not too far ahead\n\nSending process\n\nReceiving process\n\n\n\n\n\n\n\n\n\nLast byte ACKed\nLast byte sent\nTCP\n\n\n\n\nTCP\n\n\nNext byte expected\nLast byte written\nLast byte read\n\n\nLast byte received"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 37,
    "text": "37\nReceiver Buffering\nWindow size\nAmount that can be sent without acknowledgment\nReceiver needs to be able to store this amount of data\nReceiver advertises the window to the receiver\nTells the receiver the amount of free space left\n… and the sender agrees not to exceed this amount\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nWindow Size\n\n\n\n\n\n\n\nOutstanding\nUn-ack’d data\nData OK \nto send\nData not OK \nto send yet\nData ACK’d"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 38,
    "text": "38\n\nTCP Header for Receiver Buffering\n\nSource port\n\nDestination port\n\nSequence number\n\nAcknowledgment\n\n\nAdvertised window\nHdrLen\n\n\nFlags\n0\n\n\nChecksum\nUrgent pointer\n\nOptions (variable)\nData\nFlags:\nSYN\nFIN\nRST\nPSH\nURG\nACK"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 39,
    "text": "39\nFast Retransmission"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 40,
    "text": "40\nTimeout is Inefficient\nTimeout-based retransmission\nSender transmits a packet and waits until timer expires\n… and then retransmits from the lost packet onward"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 41,
    "text": "41\nFast Retransmission\nBetter solution possible under sliding window\nAlthough packet n might have been lost\n… packets n+1, n+2, and so on might get through\nIdea: have the receiver send ACK packets\nACK says that receiver is still awaiting nth packet\nAnd repeated ACKs suggest later packets have arrived\nSender can view the “duplicate ACKs” as an early hint\n… that the nth packet must have been lost\n… and perform the retransmission early\nFast retransmission\nSender retransmits data after the triple duplicate ACK"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 42,
    "text": "42\nEffectiveness of Fast Retransmit\nWhen does Fast Retransmit work best?\nLong data transfers\nHigh likelihood of many packets in flight\nHigh window size\nHigh likelihood of many packets in flight\nLow burstiness in packet losses\nHigher likelihood that later packets arrive successfully\nImplications for Web traffic\nMost Web transfers are short (e.g., 10 packets)\nShort HTML files or small images\nSo, often there aren’t many packets in flight\n… making fast retransmit less likely to “kick in”\nForcing users to like “reload” more often… "
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 43,
    "text": "43\nTearing Down the Connection"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 44,
    "text": "44\nTearing Down the Connection\nClosing the connection\nFinish (FIN) to close and receive remaining bytes\nAnd other host sends a FIN ACK to acknowledge\nReset (RST) to close and not receive remaining bytes\n\n\n\n\n\nSYN\nSYN ACK\nACK\nData\n\n\nFIN\nFIN ACK\n\n\n\nACK\n\ntime\nA\nB\n\n\n\n\nFIN\n\nACK"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 45,
    "text": "45\nSending/Receiving the FIN Packet\nSending a FIN: close()\nProcess is done sending data via the socket\nProcess invokes “close()” to close the socket\nOnce TCP has sent all of the outstanding bytes…\n… then TCP sends a FIN\nReceiving a FIN: EOF\nProcess is reading data from the socket\nEventually, the attempt to read returns an EOF"
  },
  {
    "unit": "Unit 1",
    "topic": "Slide",
    "source": "ppt",
    "page": 46,
    "text": "46\nConclusions\nTransport protocols\nMultiplexing and demultiplexing\nSequence numbers\nWindow-based flow control\nTimer-based retransmission\nChecksum-based error detection\nReading for this week\nSections 2.5, 5.1-5.2, and 6.1-6.4\nNext lecture\nCongestion control"
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 1,
    "text": "The TCP Segment Header\nTCP header length in 32 bit words, \nURG-urgent, ACK- ack number is valid, PSH-push, RST-reset connection, \nSYN-used to establish connection, FIN-used to release connection"
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 2,
    "text": "The TCP Segment Header (2)\nThe pseudoheader (part of the IP header) included in the TCP checksum."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 3,
    "text": "TCP Options\nSome TCP options are:\n\nMaximum segment size (MSS): Specified what is the payload the sender is able to receive. (Default MSS = 536 bytes, i.e., Segment size = MSS + 20). SMSS/RMSS is Sender/Receiver MSS.\n\nWindow scale: The window size field allows for upto 2^16 bytes of data. But this might be inefficient for high bw x delay situations. This options TCP indicate a scaling factor.\n\nNegative acknowledgement: Lets receiver user NAKs to get realize selective repeat rather than the normal go-back-N TCP behaviour."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 4,
    "text": "TCP Connection Establishment\n(a) TCP connection establishment in the normal case.\n(b) Call collision.\n6-31\nInitial sequence numbers are not 0. TCP uses a clock tick counter (at 4 usecs rate) to setup the initial sequence numbers. This scheme prevents delayed duplicates."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 5,
    "text": "TCP Connection Establishment\nEach side releases the connection independently.\n\nIf A send a FIN to B and B ACKs that FIN. It only means no data will flow from A to B. Data can still flow from B to A indefinitely.\n\nIn all 4 messages are required to completely release the connection. A FIN and ACK for each side. However, the second FIN and the first ACK can be combined for 3 messages.\n\nTCP avoids the Two-Army problem in connection release using timers. If the FIN is not ACKed within within a fixed time, the connection is released."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 6,
    "text": "TCP Connection Management Modeling\nThe states used in the TCP connection management finite state machine."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 7,
    "text": "TCP Connection Management Modeling (2)\nTCP connection management finite state machine.  The heavy solid line is the normal path for a client.  The heavy dashed line is the normal path for a server.  The light lines are unusual events.  Each transition is labeled by the event causing it and the action resulting from it, separated by a slash."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 8,
    "text": "TCP Transmission Policy\u000b Window Management in TCP"
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 9,
    "text": "Sender\n\nReceiver\nThe senders application performs a 2K write to the receivers buffer, which is now half full.\nEmpty\n0\n4K"
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 10,
    "text": "Sender\n\nReceiver\n\nSEQ=0\n2K\nApplication does a 2K write\n\nEmpty\n0\n4K\n\n2K\nThe receiver acknowledges the first 2048 bytes and informs the sender that there is space in the buffer for 2048 bytes."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 11,
    "text": "Sender\n\nReceiver\n\n\nSEQ=0\n2K\nACK=2048 WIN=2048\nApplication does a 2K write\n\nEmpty\n0\n4K\nFull\n\n2K\nThe sender’s application writes another 2K.  The receivers buffer is now full and the sender is blocked."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 12,
    "text": "Sender\n\nReceiver\n\n\n\nSEQ=0\n2K\nACK=2048 WIN=2048\nSEQ=2048\n2K\nApplication does a 2K write\n\nApplication does a 2K write\n\nSender is blocked\nEmpty\n0\n4K\nFull\n\n2K\nThe receiver acknowledges the next 2048 (total of 4096) bytes and informs the sender that there is no space in the buffer. The sender is still blocked."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 13,
    "text": "Sender\n\nReceiver\n\n\n\n\nSEQ=0\n2K\nACK=2048 WIN=2048\nSEQ=2048\n2K\nACK=4096 WIN=0\nApplication does a 2K write\n\nApplication does a 2K write\n\n{\nSender is blocked\nEmpty\n0\n4K\nFull\n\n2K\nThe receiver clears 2048 bytes from the buffer and informs the sender that this space is available for use. The sender is now unblocked and may send 2K."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 14,
    "text": "Sender\n\nReceiver\n\n\n\n\n\nSEQ=0\n2K\nACK=2048 WIN=2048\nSEQ=2048\n2K\nACK=4096 WIN=0\nACK=4096 WIN=2048\nApplication does a 2K write\n\nApplication does a 2K write\n\n{\nSender is blocked\nSender may send up to 2K\n\nEmpty\n0\n4K\nFull\n\n2K\n2K\n\nThe sender’s application writes another 1K.  The receivers buffer now has 1K of space available."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 15,
    "text": "TCP Transmission Policy\nWindow management in TCP."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 16,
    "text": "TCP Transmission Policy\nSender TCP is not required to send data as soon as it arrives from the application.\nSender TCP might buffer to create larger segments (up to receiver window size)\n\n\nReceiver TCP is not required to send ACK as soon as receives a  segment.\nReceiver might delay ACK for up to 500 msecs hoping to piggyback ACK on data from receiver to sender. Such ACKS are called delayed ACKs"
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 17,
    "text": "TCP Transmission Policy \nSilly window syndrome."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 18,
    "text": "Nagle's algorithm\nPurpose is to allow the sender TCP to make efficient use of the network, while still being responsive to the sender applications.\n\nIdea:\nIf application data comes in byte by byte, send first byte only. Then buffer all application data till until ACK for first byte comes in.  If network is slow and application is fast, the second segment will contain a lot of data.  \nSend second segment and buffer all data till ACK for second segment comes in.\n\nThis way the algorithm is clocking the sends to speed of the network and simultaneously preventing sending several one byte segments back to back.\n\nAn exception to this rule is to always send (not wait for ACK) if enough data for half the receiver window or MSS."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 19,
    "text": "TCP congestion control\nWe looked at how TCP handles flow control. In addition we know the congestion happens. The only real way to handle congestion is for the sender to reduce sending rate.\n\nSo how does on detect congestion ?\nIn old days, packets were lost due to transmission errors and congestion. But nowadays, transmission errors are very rare (except for wireless).  So, TCP assumes a lost packet as an indicator of congestion.\n\nSo does TCP deal with congestion ?\nIt maintains an indicator of network capacity, called the congestion window"
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 20,
    "text": "TCP Congestion Control\n(a) A fast network feeding a low capacity receiver.\n(b) A slow network feeding a high-capacity receiver."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 21,
    "text": "TCP congestion control\nIn essence TCP deals with two potential problems separately:\n\nProblem\t\t\tSolution\nReceiver capacity\t\tReceiver window (rwnd)\nNetwork capacity\t\tCongestion window (cwnd)\n\n\nEach window reflect the number of bytes the sender may transmit. The sender sends the minimum of these two sizes. This size is the effective window.\n\nEffective window is the minimum of what the sender thinks is all right to send (congestion window) and what the receiver this is ok to send (receiver window). \nWe assume that both rwnd and cwnd are measured in bytes (an alternative is SMSS)."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 22,
    "text": "TCP Congestion Control – 4 Stages\nTCP uses these stages in updating cwnd.\n1. Slow start:  Initial state. Rapidly grow cwnd \n2. Congestion avoidance: Slowly grow cwnd.\n3. Fast retransmit: Retransmit without waiting for timeout.\n4. Fast recovery: Don't reset cwnd.\n\n}\nControl amount of data injected into network\nREADING: TCP Congestion Control RFC 2581\nhttp://www.rfc-editor.org/rfc/rfc2581.txt"
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 23,
    "text": "TCP Congestion Control – Slow start\nThis is the initial state or state after loss of data.\n\ncwnd grows by multiples of SMSS per ACK\n\nInitial window (IW) is 1 SMSS. So after the ACK comes in cwnd becomes 2 SMSS. Then after the 2 ACKs come in the cwnd grows to 4 SMSS and so on. So  growth is in fact exponential.\n\nAfter data loss cwnd is set to the Loss Window (LW) size of 1 SMSS. \n\nSlow start threshold (ssthresh) is used to change from slow start to congestion avoidance. \nIf cwnd < ssthesh, slow start else congestion avoidance.\n\nInitial ssthresh is usually set to rwnd."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 24,
    "text": "TCP Congestion Control – Congestion Avoidance\nThis stage follows slow start after cwnd > ssthresh\n\ncwnd grows by 1 SMSS per RTT.\n\nThis stage continues until congestion is detected. \nFor every non-duplicate ACK update cwnd using:\n\ncwnd += SMSS * (SMSS/cwnd)\nAssuming cwnd bytes are sent in a burst in full SMSS segments,  \nafter an interval of RTT after the burst (cwnd/SMMS) ACKs will be received. So  the total cwnd will increase by \nSMSS * (SMSS/cwnd) * (cwnd/SMSS), which is simply SMMS.\nHence using the above updating formula cwnd  will increase by 1 SMSS per RTT."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 25,
    "text": "TCP congestion control – Adjusting ssthresh\nWhen TCP detects a loss, cwnd falls to LW (1 SMSS). Also the ssthresh is adjusted using: \n\nssthresh = max (FlightSize / 2, 2*SMSS) \n\nFlightSize is the number of unacked bytes (bytes still on the wire).  In most cases cwnd is equal to FlightSize."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 26,
    "text": "TCP Congestion Control \nAn example of the Internet congestion algorithm."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 27,
    "text": "TCP congestion control – Fast Retransmit and Fast Recovery\nTCP receiver should send duplicate ACK when out-of-order segment arrives. A duplicate ACK at sender could mean:\n1. Lost segment (all subsequent segments will generate duplicate ACKs)\n2. Re-ordered segments.\n3. Network replicated ACK or data segment.\n\nFast retransmit algo says retransmit segment after getting 3 duplicate acks, without waiting for RTO (Retransmit Timeout) to expire.\n\nFast recovery says don't treat the above retransmit as a lost segment (since RTO did not expire), so don't reset cwnd to LW.  The reasoning is that since (duplicate) ACKs are arriving, the receiver is getting segments, so segments are leaving the network. In fast recovery, adjust ssthresh using previous formula."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 28,
    "text": "TCP Timer Management\nOf the several timers TCP maintains the most important is the retransmission timer RTO, (also called timeout) .  After each segment is sent, TCP starts a retransmission timer, if ACK arrives before timer expires, cancel timer. If timer expires first, consider segment lost.\n\nHow long should RTO be ?\nTypically some small multiple of RTT.\n\nSo how to measure RTT ?\nMeasure time between segment sent and  ACK receiver.\n\nUnfortunately, in the Internet RTT are not constant, they a vary a lot."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 29,
    "text": "TCP Timer Management\n(a) Probability density of ACK arrival times in the data link layer.  \n(b) Probability density of  ACK arrival times for TCP."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 30,
    "text": "Maintaining RTO\nTCP  dynamically updates the current RTT and most recent \nmeasurement M (how long it took to receive the last ACK) using:\nHowever, using a constant multiple of RTT as the RTO is inflexible since it fails to respond to variance. TCP keep an estimator of deviation D. D keeps track of the the variance in RTT, i.e, in RTT – M using:\nThe final retransmission timeout (RTO) is calculated as:"
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 31,
    "text": "RTO exceptions\nAssume a segment times out and is then retransmitted. An ACK for the segment arrives.\n\nSo for purposes for calculating M how do we decide if the ack is for the first send or the retransmission ? \n\nWe cannot.  It might be for the first, but very delayed, or might be for the second. So we cannot use ACKs of retransmitted segments for calculating M (or updating RTT).\n\nRule: Don't use acks of retransmitted segments to update RTT. Instead, if segment times out, simply double RTO.\n\nThis is called the Karn's algorithm."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 32,
    "text": "Other timers\nPersistent timer: Assume receiver advertises a window = 0.  Sender stop sending. Receiver send segment with new window size. This segment is lost. Sender will keep waiting forever. \nAfter getting a window of 0 the sender uses a persistent timer periodically to probe the receiver to send window advertisements. Once it gets a non-zero window the timer is stopped.\n\n\nKeep alive timer: During long periods of inactivity, one side might send to the other a keep alive probe to check if the other side is alive."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 33,
    "text": "Wireless TCP\nWireless network can lose packet in wireless “links”.\n\nSince TCP assumes loss is due to route congestion, it will reduce sending rate.\nIf the loss due to wireless link, TCP should resend asap, i.e., increase overall sending rate.\n\nTherefore, the usual TCP will perform very badly on lossy wireless networks.\n\nProblem complicated by heterogeneous networks. If part wired and part wireless, then  reaction of TCP should depend on where the loss occurred (wired or wireless part)."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 34,
    "text": "Split TCP\nSplitting a TCP connection into two connections.\nBut now ACK to sender does not mean mobile host got it. It simply means the base station got it. No end-to-end semantics."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 35,
    "text": "Wireless TCP – Balakrishnan et. al\n\n\n\n\n\n\n\n\n\n\n\nWireless\nSnooping agent\nSnooping agent caches  segments from fixed to mobile hosts and forwards it to mobile host with small timeout of its own. If agent does not see mobile host's ack, the agent retransmits the segment.\nIf agent sees two duplicates acks from mobile host (indicator of lost segment) it drops the acks (does not forwards to fixed host) and retransmits from cache. \nAdvantage: It is completely transparent to both hosts.\nFixed host\nMobile host\nBase station"
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 36,
    "text": "Transactional TCP\n(a) Remote Procedure Call (RPC) using normal TPC.\n(b) RPC using T/TCP."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 37,
    "text": "Performance Issues\nPerformance Problems in Computer Networks\nNetwork Performance Measurement\nSystem Design for Better Performance\nFast TPDU Processing"
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 38,
    "text": "Performance Problems in Computer Networks\n(a) At t = 0,   \n(b) After 500 μsec, \n(c) After 20 msec,  \n(d) After 40 msec.\nTransmitting 1MB from San Diego to Boston\n\nOther network performance problem causes:\nSynchronous overload:  Broadcast storm due to bad UDP broadcast \nSegment. Power loss leading to DHCP/file server overload."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 39,
    "text": "Network Performance Measurement\nThe basic loop for improving network performance.\nMeasure relevant network parameters, performance.\nTry to understand what is going on.\nChange one parameter."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 40,
    "text": "Network Performance Measurement\nMake sure that the sample size is large enough\nMake sure that he samples are representatives\nBe careful when using a coarse-grained clock\nBe sure that nothing unexpected is going on during your tests.\nCaching can wreak havoc with measurements.\nUnderstand what you are measuring.\nBe careful about extrapolating the results."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 41,
    "text": "System Design for Better Performance\nRules:\nCPU speed is more important than network speed.\nReduce packet count to reduce software overhead.\nMinimize context switches.\nMinimize copying.\nYou can buy more bandwidth but not lower delay.\nAvoiding congestion is better than recovering from it.\nAvoid timeouts."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 42,
    "text": "Fast TPDU Processing\nThe fast path from sender to receiver is shown with a heavy line.\nThe processing steps on this path are shaded."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 43,
    "text": "Fast TPDU Processing (2)\n(a) TCP header.  (b) IP header. In both cases, the shaded fields are taken from the prototype without change."
  },
  {
    "unit": "Unit 3",
    "topic": "Slide",
    "source": "ppt",
    "page": 44,
    "text": "Timing Wheel\nA timing wheel."
  }
]